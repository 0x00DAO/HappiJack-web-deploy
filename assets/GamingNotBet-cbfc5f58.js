import{N as z,n as m,G as T,m as v,H as u,J as B,F as C,s as e,K as k,B as w,S as l,R as i,t as a,I as p,w as y,D as x,A as F,u as H,l as G,L as W,C as N,v as D,y as R,o as I,M as E,O as M}from"./index-50cfc3e1.js";import{C as U}from"./closable-3c26f926.js";import{s as O,c as L}from"./Loading-dfbbc092.js";import{M as Q}from"./math-7bc6a3cc.js";import{M as P,P as K,I as Y}from"./information-741a0fdd.js";import{S as J}from"./index-37bbd726.js";import{C as V}from"./CountDownFrame-00bba504.js";import{T as X}from"./index-28426153.js";import"./index-c97041cf.js";import"./useForceUpdate-4488d5e5.js";import"./CheckOutlined-ecc7dc5c.js";import"./TextArea-c1345024.js";const Z="/assets/buy_ticket_bg_vector-0731bf82.png",_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGUSURBVHgB7VbRccMgDJUzgUdgg3qDjlBv0BHMBvYmzgZuJvB1g25gb5BuoEIqLgrBIAf+knfHcQbp6SGwAOCFABBRmbbYBplwPJZT6uCCY0EBKBLhB/cdzHdtWm/azOwszjTWBXyUSETMkOZmlGMM+C9REZHgHa3QrdSSt55NQ2NHvM2K3hKxJcAP3jPCybQaEqBAXEgfEJE+W7RyB71hs0lmxgfm/wl7QEpd2oeI3QWRec22Q8EOAS6FY8IuKoBsJreFIAyuWOoU5AuoWTbvztAh4NNSf6yqaoVMGI5f053oU0sEfFD/BeXguN6TlixdjcA2uQVk57ZV9PuJSLltBEuK9wB5WKE08FouFRQC/pfqSz3w50IZWKl/g3JQ1P+AQMA39S2Ug+M6JS2pcLjymbx8BHziwsadZtxTPuNcorLuO/HLSMODwOt1vu8yImfNUtfDTqDgOpeQ8Dt9lKyCztDE/AbIAWXi7Amxz6+G2Sgam/D2+fbw9vki/GdWCjMWLGS+kI4C8KwsNGa3LPvXfeG58Adarnz4vNBoNgAAAABJRU5ErkJggg==",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEISURBVHgB7ZXhEYIwDIVbzwFwA0dhE9nAOgF1sjqCG+AGsEFs7tIz9FoKFNQf/e4UjiYvj7Q5hCgUCgQAXOyvh/3psJarK5mBzl7O4jsMUsrT6ImzN5U1JyaFr3EQP+avDAz4Z7tj+CHZCqtZozav5Qco77S2gZhVZwC1mC5OmooFVp6ROteADW+YnsYac5I0JZgNDBhKU0uSKtcukW/AEXzz1BSk25VmmFqMGXBT8BD5POma3gJqfcvadvHW12xBzfRU9BDahSuMP0Y6ELPYAOVpGKNCQa64AW/8cg1QbgOfiehXiecYiGmUj9GR3eO8VnNanLsNlpe74R248YUdwRe9i0KhQLwBTDvXbFf0UTgAAAAASUVORK5CYII=",{Countdown:$}=J,ee=()=>Q.generateRandomNumber(1e5,999999),te=/^(?:[1-9]\d{0,5}|999999)$/,ne=z.create(()=>{const s=m.useRef(null),[h,g]=m.useState(`${ee()}`),[A,o]=m.useState(new T),b=t=>{const n=t.target.value;if(d(n))g(parseInt(`${n}`,10).toString());else{const r=n.replace(/[^0-9]/g,"");r.length>6?t.target.value=r.slice(-6):t.target.value=r,d(t.target.value)?g(parseInt(`${t.target.value}`,10).toString()):g("")}},d=t=>t===void 0?!1:te.test(t),f=v(),j=async()=>{const t=u.getData("LATEST_GAME_ID");if(B(t)){C("Invalid lottery id");return}try{if(!d(h))throw new Error("Invalid lucky number input");O(),await(await(await y.instance.getContract(x.LotteryGameSellSystem)).buyLotteryTicketETH(t,parseInt(h),u.ticketPrice)).wait(),L(),F("Buy ticket successfully"),f.hide()}catch(n){C(n!=null&&n.message&&n.message.length<60?n.message:"Buy ticket failed"),L()}},c=()=>{f.hide()};return m.useEffect(()=>{const t=u.getData("LATEST_GAME_ID");if(B(t)){C("Invalid lottery id");return}t&&(async()=>{const S=await(await y.instance.getContract(x.LotteryGameSystem)).getGame(t);S&&o(S),s.current&&(s.current.focus(),s.current.value=`${h}`)})()}),e.jsx(P,{...k(f),title:"",centered:!0,closable:!1,width:1160,footer:[e.jsx(w,{onClick:j,disabled:!d(h),className:"start-btn",style:{width:460,height:100,borderRadius:40,fontSize:40,fontWeight:700,display:"grid",alignItems:"center",margin:"0 auto"},children:"Pay to win"})],children:e.jsxs(l,{direction:"vertical",style:{width:"100%",position:"relative"},children:[e.jsxs(i,{style:{position:"absolute",width:"100%",left:0,top:0},children:[e.jsx(a,{span:23}),e.jsx(a,{span:1,children:e.jsx(p,{preview:!1,src:U,style:{cursor:"pointer",width:48,height:48},onClick:()=>f.hide()})})]}),e.jsx(i,{style:{width:"100%",height:50,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold"},children:"SETTING LUCKY NUMBER"})}),e.jsx(i,{style:{width:"100%",height:100,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("input",{ref:s,style:{paddingLeft:20,color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:90,fontWeight:"bold",letterSpacing:22,display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:500,backgroundColor:"transparent",border:"none",textAlign:"center",caretColor:"#05e6c4"},autoComplete:"off",inputMode:"decimal",name:"depositAmount",onChange:b})}),e.jsxs(i,{style:{width:"100%",height:100,display:"flex",justifyContent:"center"},children:[e.jsx("label",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",color:"#91A7BE"},children:"The prize amount is determined by the Lucky Numbers"}),e.jsx(p,{src:Z,preview:!1})]}),e.jsxs(i,{style:{width:"100%",height:300,marginTop:30},children:[e.jsxs(i,{style:{width:"100%"},children:[e.jsx(a,{span:12,style:{paddingLeft:150},children:e.jsxs(l,{direction:"horizontal",children:[e.jsx(p,{src:q,preview:!1}),e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:30},children:"Tickets Left"})]})}),e.jsx(a,{span:12,children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},children:A.remainingTicket})})]}),e.jsxs(i,{style:{width:"100%"},children:[e.jsx(a,{span:12,style:{paddingLeft:150},children:e.jsxs(l,{direction:"horizontal",children:[e.jsx(p,{src:_,preview:!1}),e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:30},children:"Time Left"})]})}),e.jsx(a,{span:12,children:e.jsx("label",{children:e.jsx($,{valueStyle:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},value:A.endTime*1e3,onFinish:c})})})]}),e.jsxs(i,{style:{width:"100%"},children:[e.jsx(a,{span:12,style:{paddingLeft:150},children:e.jsx(l,{direction:"horizontal",children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:70},children:"Winning Chance"})})}),e.jsx(a,{span:12,children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},children:"100%"})})]}),e.jsxs(i,{style:{width:"100%"},children:[e.jsx(a,{span:12,style:{paddingLeft:150},children:e.jsx(l,{direction:"horizontal",children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:70},children:"Jackpot"})})}),e.jsx(a,{span:12,children:e.jsxs("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},children:[u.ticketPrice," ",A.tokenSymbol]})})]})]})]})})});function ye(){const s=H(),h=G(),g=W(),A=v(ne),[o,b]=m.useState(new T),d=async(c,t)=>{const r=await(await y.instance.getContract(x.LotteryGameSystem)).getGame(c,!0);b(r),await y.instance.getAddress()===t&&g(`/game/${r.isFull?"joined":"waiting"}/${c}`)};m.useEffect(()=>{async function c(){const t=s.id,r=await(await y.instance.getContract(x.LotteryGameSystem)).getGame(t);return b(r),I.instance.on(E.event,d),()=>I.instance.off(E.event,d)}c()},[h.pathname]);const f=()=>{if(!s||!(s!=null&&s.id))M.error("Invalid lottery id");else{const c=s.id;u.setData("LATEST_GAME_ID",c),A.show()}},j=()=>{g("/")};return e.jsx(e.Fragment,{children:e.jsxs(l,{direction:"vertical",size:"large",style:{minHeight:`${N}`,width:"100%",display:"flex",justifyContent:"center"},children:[e.jsx(i,{gutter:0,style:{alignItems:"center",background:"rgba(33, 60, 153, 0.70)",flexShrink:0,width:"100%",display:"flex",flexDirection:"column",position:"absolute",top:120},children:e.jsx(a,{span:24,style:{flex:1,paddingBottom:10,paddingTop:10},children:e.jsx(X.Text,{style:{fontSize:50,fontFamily:"Eras Bold ITC",color:"#52c41a",display:"flex",paddingLeft:120,paddingRight:120,justifyContent:"center",background:"linear-gradient(to right, #FDECB2, #FDA6EC, #CD59CC)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",lineHeight:1.2,width:"100%",maxHeight:"2.4em",overflow:"hidden",textOverflow:"ellipsis"},children:o.ad})})}),e.jsx(i,{style:{display:"flex",justifyContent:"center",alignContent:"center"},children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold"},children:"Jackpot"})}),e.jsx(i,{style:{display:"flex",justifyContent:"center",alignContent:"center"},children:e.jsxs("label",{style:{color:"#fcdf47",fontFamily:"Arimo Hebrew Subset",fontSize:80,fontWeight:"bold"},children:[o.TicketPrice," ",o.tokenSymbol]})}),e.jsx(l,{direction:"horizontal",size:"small",hidden:!o.hasHash,style:{display:"flex",justifyContent:"center",alignContent:"center"},children:e.jsxs(w,{type:"text",style:{display:"flex"},target:"_blank",href:`${D(y.instance.chainId)}/tx/${o.transactionHash}`,disabled:!o.hasHash,children:[e.jsxs("p",{style:{color:"#91a7be",fontSize:30,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold",marginLeft:-10},children:["TX: ",o.shortHash]}),e.jsx("svg",{style:{marginTop:2,marginLeft:30,color:"#91a7be",fontSize:40,display:"none"},stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",focusable:"false",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),e.jsx(i,{style:{display:"flex",justifyContent:"center",alignContent:"center"},children:e.jsxs("label",{style:{fontFamily:"Eras Bold ITC",fontSize:50,color:"#eb91ff"},children:["100%"," ",e.jsx("span",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:40,fontWeight:"bold"},children:"Winning Rate"})]})}),e.jsxs(l,{direction:"vertical",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsxs("label",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:30,color:"#91a7be"},children:["Remaining Tickets: ",o.remainingTicket]}),e.jsx(V,{timeLeft:o.endTime*1e3-new Date().getTime(),onFinished:j})]}),e.jsxs(l,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:30,marginLeft:40},children:[e.jsx(w,{onClick:f,className:"start-btn",style:{fontFamily:"Arimo Hebrew Sunset",width:654,height:100,borderRadius:40,fontSize:40,fontWeight:700},children:"Pay to win"}),e.jsx(K,{content:R,title:"Rules",placement:"right",children:e.jsx(w,{style:{width:42,height:42,background:"transparent",border:"none",marginLeft:35},icon:e.jsx(p,{src:Y,preview:!1,style:{width:42,height:42}}),type:"default"})})]})]})})}export{ye as default};
