var j=Object.defineProperty;var S=(i,o,e)=>o in i?j(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e;var a=(i,o,e)=>(S(i,typeof o!="symbol"?o+"":o,e),e);import{bh as A,bi as p,bj as h,bk as E,aX as y,aT as R,w as c,bl as B,y as u,ab as H,bm as W,n as x,l as F,z as b,q as t,S as C,C as z,R as w,s as d,B as L}from"./index-4dd48bff.js";import{s as I,c as O}from"./Loading-0fd7b30b.js";import{T as k}from"./index-6c8acddd.js";import"./CheckOutlined-b1b236aa.js";import"./useLocale-e841f857.js";import"./TextArea-4ee532d8.js";import"./index-784ac562.js";const T=class extends A{constructor(){super(...arguments);a(this,"Owner",null);a(this,"TokenType",y.ChainToken);a(this,"TokenAddress",null);a(this,"Amount","0")}get _primaryKey(){return""}get primaryKey(){return[p(h.from(this.Owner).toHexString(),32),p(h.from(this.TokenType).toHexString(),32),p(h.from(this.TokenAddress).toHexString(),32)]}static get attributes(){return[{key:"TokenType",type:"address"},{key:"TokenType",type:"uint256",format:e=>parseInt(e.toString())},{key:"TokenAddress",type:"address"},{key:"Amount",type:"uint256",format:e=>e&&e.toString()!=="0x"?E(e):"0"}]}static formatter(e,r){return T.fillWith(super.formatter(e,r))}};let m=T;a(m,"tableName","LotteryGameWalletSafeBoxTable");class f extends R{constructor(){super(...arguments);a(this,"Amount","0");a(this,"TokenType",y.ChainToken);a(this,"TokenAddress",null);a(this,"Owner",null)}get tokenSymbol(){return c.instance.getTokenSymbolByTokenType(this.TokenType)}get isEmpty(){return!this.Amount||B(this.Amount).lte(h.from(0))}async withdrawETH(){await(await c.instance.getContract(u.LotteryGameLotteryWalletSafeBoxSystem)).withdrawETH()}async withdrawERC20(){await(await c.instance.getContract(u.LotteryGameLotteryWalletSafeBoxSystem)).withdrawERC20(this.TokenAddress)}async withdraw(){this.TokenType===y.ChainToken?await this.withdrawETH():await this.withdrawERC20()}static async create(e=y.ChainToken,r=W){if(!H.isWalletConnected)throw new Error("Wallet is not connected");const g=await c.instance.getContract(u.GameRoot).getContract(),n=await c.instance.getAddress(),s=await m.queryByKeys(g,[n,e,r],1),l=new f;return l.TokenType=e,l.TokenAddress=r,l.Owner=n,l.Amount=s.Amount,l}}function Z(){const[i,o]=x.useState(new f),e=async()=>{const n=await f.create();o(n)},r=async()=>{try{I(),await i.withdraw(),await e()}catch(n){b.error(n!=null&&n.message&&n.message.length<30?n.message:"claim failed")}finally{O()}},g=F();return x.useEffect(()=>{async function n(){await e()}try{n()}catch(s){b.error(s!=null&&s.message&&s.message.length<30?s.message:"claim failed")}},[g.pathname]),t.jsx(t.Fragment,{children:t.jsxs(C,{direction:"vertical",size:"large",style:{display:"grid",justifyContent:"center",alignContent:"center",minHeight:`${z}`,marginTop:-230},children:[t.jsx(w,{gutter:0,children:t.jsxs(d,{span:"auto",style:{maxWidth:"100%"},children:[t.jsx(k.Text,{style:{fontSize:90,fontWeight:700,fontFamily:"Eras Bold ITC",display:"grid",justifyContent:"center",alignContent:"center",WebkitTextFillColor:"white",WebkitTextStroke:"2px #8C59F9"},children:"Total Amount"}),t.jsx(k.Text,{style:{fontSize:60,fontFamily:"Arimo Hebrew Subset",fontWeight:700,color:"white",display:"grid",justifyContent:"center",alignContent:"center"},children:`${i.Amount} ${i.tokenSymbol}`})]})}),t.jsx(C,{style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx(L,{style:{fontSize:40,fontWeight:700,width:556,height:100,color:"white"},shape:"round",onClick:r,disabled:i.isEmpty,children:"Claim"})}),t.jsxs("div",{style:{width:1440,height:430,position:"fixed",bottom:0,left:"50%",transform:"translate(-50%, 0)"},children:[t.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",borderTopLeftRadius:40,borderTopRightRadius:40,border:"4px solid #6d89f5",borderBottom:"none",background:"linear-gradient(90deg, #2A5698 0%, #6706B2 100%)",opacity:.7,zIndex:-1}}),t.jsxs(w,{style:{width:"100%",height:80,position:"relative"},children:[t.jsx("div",{style:{width:480,height:77,background:"#4222c3",borderBottomLeftRadius:40,borderBottomRightRadius:40,position:"absolute",left:"50%",top:4,transform:"translate(-50%, 0)",opacity:.7}}),t.jsx("div",{style:{width:480,height:70,top:3,background:"#4c50b7",borderBottomLeftRadius:40,borderBottomRightRadius:40,position:"absolute",left:"50%",transform:"translate(-51%, 0)",opacity:.7}}),t.jsx("label",{style:{position:"absolute",color:"#FAFF16",fontSize:30,fontFamily:"Eras Bold ITC",width:480,height:70,left:"50%",transform:"translate(-30%,25%)"},children:"Recent transactions"})]}),t.jsxs(w,{style:{width:1432,height:50,background:"#4c50b7",margin:"0 auto",marginTop:30},children:[t.jsx(d,{span:8,style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx("p",{style:{fontSize:24,color:"#faff16",fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginTop:10},children:"Game ID"})}),t.jsx(d,{span:8,style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx("p",{style:{fontSize:24,color:"#faff16",fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginTop:10},children:"Draw Time"})}),t.jsx(d,{span:8,style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx("p",{style:{fontSize:24,color:"#faff16",fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginTop:10},children:"Type"})})]})]})]})})}export{Z as default};
