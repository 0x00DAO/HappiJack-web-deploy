import{r as Iv,c as or,d as xv,g as Ov,e as Qr,a as Pv,E as Yc,_ as Cv}from"./index-81fcd937.js";import{s as Av,f as Tv,a as Nv,d as Rv,g as Fv,b as jf,c as Uv,e as jv,h as Jc,i as _l,j as $v,k as Lv,l as $f,m as Xc,p as Mv,J as Pi,n as Zc,o as Qc,q as eu,r as Ii,t as fi,u as tu,v as zv,H as Xi}from"./http-f7c1febb.js";var ru={},Ca={},je={},Lf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function t(y,w){var O=y>>>16&65535,A=y&65535,q=w>>>16&65535,W=w&65535;return A*W+(O*W+A*q<<16>>>0)|0}n.mul=Math.imul||t;function r(y,w){return y+w|0}n.add=r;function s(y,w){return y-w|0}n.sub=s;function o(y,w){return y<<w|y>>>32-w}n.rotl=o;function f(y,w){return y<<32-w|y>>>w}n.rotr=f;function m(y){return typeof y=="number"&&isFinite(y)&&Math.floor(y)===y}n.isInteger=Number.isInteger||m,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(y){return n.isInteger(y)&&y>=-n.MAX_SAFE_INTEGER&&y<=n.MAX_SAFE_INTEGER}})(Lf);Object.defineProperty(je,"__esModule",{value:!0});var Mf=Lf;function qv(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])<<16>>16}je.readInt16BE=qv;function Hv(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])>>>0}je.readUint16BE=Hv;function Bv(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])<<16>>16}je.readInt16LE=Bv;function Kv(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])>>>0}je.readUint16LE=Kv;function zf(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>8,t[r+1]=n>>>0,t}je.writeUint16BE=zf;je.writeInt16BE=zf;function qf(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t}je.writeUint16LE=qf;je.writeInt16LE=qf;function Nc(n,t){return t===void 0&&(t=0),n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}je.readInt32BE=Nc;function Rc(n,t){return t===void 0&&(t=0),(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}je.readUint32BE=Rc;function Fc(n,t){return t===void 0&&(t=0),n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]}je.readInt32LE=Fc;function Uc(n,t){return t===void 0&&(t=0),(n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t])>>>0}je.readUint32LE=Uc;function Da(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>24,t[r+1]=n>>>16,t[r+2]=n>>>8,t[r+3]=n>>>0,t}je.writeUint32BE=Da;je.writeInt32BE=Da;function Sa(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24,t}je.writeUint32LE=Sa;je.writeInt32LE=Sa;function Vv(n,t){t===void 0&&(t=0);var r=Nc(n,t),s=Nc(n,t+4);return r*4294967296+s-(s>>31)*4294967296}je.readInt64BE=Vv;function kv(n,t){t===void 0&&(t=0);var r=Rc(n,t),s=Rc(n,t+4);return r*4294967296+s}je.readUint64BE=kv;function Gv(n,t){t===void 0&&(t=0);var r=Fc(n,t),s=Fc(n,t+4);return s*4294967296+r-(r>>31)*4294967296}je.readInt64LE=Gv;function Wv(n,t){t===void 0&&(t=0);var r=Uc(n,t),s=Uc(n,t+4);return s*4294967296+r}je.readUint64LE=Wv;function Hf(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Da(n/4294967296>>>0,t,r),Da(n>>>0,t,r+4),t}je.writeUint64BE=Hf;je.writeInt64BE=Hf;function Bf(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Sa(n>>>0,t,r),Sa(n/4294967296>>>0,t,r+4),t}je.writeUint64LE=Bf;je.writeInt64LE=Bf;function Yv(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,f=n/8+r-1;f>=r;f--)s+=t[f]*o,o*=256;return s}je.readUintBE=Yv;function Jv(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,f=r;f<r+n/8;f++)s+=t[f]*o,o*=256;return s}je.readUintLE=Jv;function Xv(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Mf.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,f=n/8+s-1;f>=s;f--)r[f]=t/o&255,o*=256;return r}je.writeUintBE=Xv;function Zv(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Mf.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,f=s;f<s+n/8;f++)r[f]=t/o&255,o*=256;return r}je.writeUintLE=Zv;function Qv(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t)}je.readFloat32BE=Qv;function eb(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t,!0)}je.readFloat32LE=eb;function tb(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t)}je.readFloat64BE=tb;function rb(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t,!0)}je.readFloat64LE=rb;function ib(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n),t}je.writeFloat32BE=ib;function nb(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n,!0),t}je.writeFloat32LE=nb;function sb(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n),t}je.writeFloat64BE=sb;function ab(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n,!0),t}je.writeFloat64LE=ab;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});function ob(n){for(var t=0;t<n.length;t++)n[t]=0;return n}Sr.wipe=ob;Object.defineProperty(Ca,"__esModule",{value:!0});var Zt=je,jc=Sr,cb=20;function ub(n,t,r){for(var s=1634760805,o=857760878,f=2036477234,m=1797285236,y=r[3]<<24|r[2]<<16|r[1]<<8|r[0],w=r[7]<<24|r[6]<<16|r[5]<<8|r[4],O=r[11]<<24|r[10]<<16|r[9]<<8|r[8],A=r[15]<<24|r[14]<<16|r[13]<<8|r[12],q=r[19]<<24|r[18]<<16|r[17]<<8|r[16],W=r[23]<<24|r[22]<<16|r[21]<<8|r[20],H=r[27]<<24|r[26]<<16|r[25]<<8|r[24],$=r[31]<<24|r[30]<<16|r[29]<<8|r[28],X=t[3]<<24|t[2]<<16|t[1]<<8|t[0],ee=t[7]<<24|t[6]<<16|t[5]<<8|t[4],ue=t[11]<<24|t[10]<<16|t[9]<<8|t[8],j=t[15]<<24|t[14]<<16|t[13]<<8|t[12],M=s,P=o,N=f,S=m,c=y,_=w,Z=O,l=A,d=q,v=W,I=H,b=$,p=X,F=ee,L=ue,J=j,C=0;C<cb;C+=2)M=M+c|0,p^=M,p=p>>>32-16|p<<16,d=d+p|0,c^=d,c=c>>>32-12|c<<12,P=P+_|0,F^=P,F=F>>>32-16|F<<16,v=v+F|0,_^=v,_=_>>>32-12|_<<12,N=N+Z|0,L^=N,L=L>>>32-16|L<<16,I=I+L|0,Z^=I,Z=Z>>>32-12|Z<<12,S=S+l|0,J^=S,J=J>>>32-16|J<<16,b=b+J|0,l^=b,l=l>>>32-12|l<<12,N=N+Z|0,L^=N,L=L>>>32-8|L<<8,I=I+L|0,Z^=I,Z=Z>>>32-7|Z<<7,S=S+l|0,J^=S,J=J>>>32-8|J<<8,b=b+J|0,l^=b,l=l>>>32-7|l<<7,P=P+_|0,F^=P,F=F>>>32-8|F<<8,v=v+F|0,_^=v,_=_>>>32-7|_<<7,M=M+c|0,p^=M,p=p>>>32-8|p<<8,d=d+p|0,c^=d,c=c>>>32-7|c<<7,M=M+_|0,J^=M,J=J>>>32-16|J<<16,I=I+J|0,_^=I,_=_>>>32-12|_<<12,P=P+Z|0,p^=P,p=p>>>32-16|p<<16,b=b+p|0,Z^=b,Z=Z>>>32-12|Z<<12,N=N+l|0,F^=N,F=F>>>32-16|F<<16,d=d+F|0,l^=d,l=l>>>32-12|l<<12,S=S+c|0,L^=S,L=L>>>32-16|L<<16,v=v+L|0,c^=v,c=c>>>32-12|c<<12,N=N+l|0,F^=N,F=F>>>32-8|F<<8,d=d+F|0,l^=d,l=l>>>32-7|l<<7,S=S+c|0,L^=S,L=L>>>32-8|L<<8,v=v+L|0,c^=v,c=c>>>32-7|c<<7,P=P+Z|0,p^=P,p=p>>>32-8|p<<8,b=b+p|0,Z^=b,Z=Z>>>32-7|Z<<7,M=M+_|0,J^=M,J=J>>>32-8|J<<8,I=I+J|0,_^=I,_=_>>>32-7|_<<7;Zt.writeUint32LE(M+s|0,n,0),Zt.writeUint32LE(P+o|0,n,4),Zt.writeUint32LE(N+f|0,n,8),Zt.writeUint32LE(S+m|0,n,12),Zt.writeUint32LE(c+y|0,n,16),Zt.writeUint32LE(_+w|0,n,20),Zt.writeUint32LE(Z+O|0,n,24),Zt.writeUint32LE(l+A|0,n,28),Zt.writeUint32LE(d+q|0,n,32),Zt.writeUint32LE(v+W|0,n,36),Zt.writeUint32LE(I+H|0,n,40),Zt.writeUint32LE(b+$|0,n,44),Zt.writeUint32LE(p+X|0,n,48),Zt.writeUint32LE(F+ee|0,n,52),Zt.writeUint32LE(L+ue|0,n,56),Zt.writeUint32LE(J+j|0,n,60)}function Kf(n,t,r,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var f,m;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");f=new Uint8Array(16),m=f.length-t.length,f.set(t,m)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");f=t,m=o}for(var y=new Uint8Array(64),w=0;w<r.length;w+=64){ub(y,f,n);for(var O=w;O<w+64&&O<r.length;O++)s[O]=r[O]^y[O-w];lb(f,0,m)}return jc.wipe(y),o===0&&jc.wipe(f),s}Ca.streamXOR=Kf;function hb(n,t,r,s){return s===void 0&&(s=0),jc.wipe(r),Kf(n,t,r,r,s)}Ca.stream=hb;function lb(n,t,r){for(var s=1;r--;)s=s+(n[t]&255)|0,n[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var Vf={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});function fb(n,t,r){return~(n-1)&t|n-1&r}Ci.select=fb;function db(n,t){return(n|0)-(t|0)-1>>>31&1}Ci.lessOrEqual=db;function kf(n,t){if(n.length!==t.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^t[s];return 1&r-1>>>8}Ci.compare=kf;function pb(n,t){return n.length===0||t.length===0?!1:kf(n,t)!==0}Ci.equal=pb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Ci,r=Sr;n.DIGEST_LENGTH=16;var s=function(){function m(y){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var w=y[0]|y[1]<<8;this._r[0]=w&8191;var O=y[2]|y[3]<<8;this._r[1]=(w>>>13|O<<3)&8191;var A=y[4]|y[5]<<8;this._r[2]=(O>>>10|A<<6)&7939;var q=y[6]|y[7]<<8;this._r[3]=(A>>>7|q<<9)&8191;var W=y[8]|y[9]<<8;this._r[4]=(q>>>4|W<<12)&255,this._r[5]=W>>>1&8190;var H=y[10]|y[11]<<8;this._r[6]=(W>>>14|H<<2)&8191;var $=y[12]|y[13]<<8;this._r[7]=(H>>>11|$<<5)&8065;var X=y[14]|y[15]<<8;this._r[8]=($>>>8|X<<8)&8191,this._r[9]=X>>>5&127,this._pad[0]=y[16]|y[17]<<8,this._pad[1]=y[18]|y[19]<<8,this._pad[2]=y[20]|y[21]<<8,this._pad[3]=y[22]|y[23]<<8,this._pad[4]=y[24]|y[25]<<8,this._pad[5]=y[26]|y[27]<<8,this._pad[6]=y[28]|y[29]<<8,this._pad[7]=y[30]|y[31]<<8}return m.prototype._blocks=function(y,w,O){for(var A=this._fin?0:2048,q=this._h[0],W=this._h[1],H=this._h[2],$=this._h[3],X=this._h[4],ee=this._h[5],ue=this._h[6],j=this._h[7],M=this._h[8],P=this._h[9],N=this._r[0],S=this._r[1],c=this._r[2],_=this._r[3],Z=this._r[4],l=this._r[5],d=this._r[6],v=this._r[7],I=this._r[8],b=this._r[9];O>=16;){var p=y[w+0]|y[w+1]<<8;q+=p&8191;var F=y[w+2]|y[w+3]<<8;W+=(p>>>13|F<<3)&8191;var L=y[w+4]|y[w+5]<<8;H+=(F>>>10|L<<6)&8191;var J=y[w+6]|y[w+7]<<8;$+=(L>>>7|J<<9)&8191;var C=y[w+8]|y[w+9]<<8;X+=(J>>>4|C<<12)&8191,ee+=C>>>1&8191;var k=y[w+10]|y[w+11]<<8;ue+=(C>>>14|k<<2)&8191;var te=y[w+12]|y[w+13]<<8;j+=(k>>>11|te<<5)&8191;var se=y[w+14]|y[w+15]<<8;M+=(te>>>8|se<<8)&8191,P+=se>>>5|A;var ie=0,ye=ie;ye+=q*N,ye+=W*(5*b),ye+=H*(5*I),ye+=$*(5*v),ye+=X*(5*d),ie=ye>>>13,ye&=8191,ye+=ee*(5*l),ye+=ue*(5*Z),ye+=j*(5*_),ye+=M*(5*c),ye+=P*(5*S),ie+=ye>>>13,ye&=8191;var le=ie;le+=q*S,le+=W*N,le+=H*(5*b),le+=$*(5*I),le+=X*(5*v),ie=le>>>13,le&=8191,le+=ee*(5*d),le+=ue*(5*l),le+=j*(5*Z),le+=M*(5*_),le+=P*(5*c),ie+=le>>>13,le&=8191;var be=ie;be+=q*c,be+=W*S,be+=H*N,be+=$*(5*b),be+=X*(5*I),ie=be>>>13,be&=8191,be+=ee*(5*v),be+=ue*(5*d),be+=j*(5*l),be+=M*(5*Z),be+=P*(5*_),ie+=be>>>13,be&=8191;var Y=ie;Y+=q*_,Y+=W*c,Y+=H*S,Y+=$*N,Y+=X*(5*b),ie=Y>>>13,Y&=8191,Y+=ee*(5*I),Y+=ue*(5*v),Y+=j*(5*d),Y+=M*(5*l),Y+=P*(5*Z),ie+=Y>>>13,Y&=8191;var G=ie;G+=q*Z,G+=W*_,G+=H*c,G+=$*S,G+=X*N,ie=G>>>13,G&=8191,G+=ee*(5*b),G+=ue*(5*I),G+=j*(5*v),G+=M*(5*d),G+=P*(5*l),ie+=G>>>13,G&=8191;var z=ie;z+=q*l,z+=W*Z,z+=H*_,z+=$*c,z+=X*S,ie=z>>>13,z&=8191,z+=ee*N,z+=ue*(5*b),z+=j*(5*I),z+=M*(5*v),z+=P*(5*d),ie+=z>>>13,z&=8191;var h=ie;h+=q*d,h+=W*l,h+=H*Z,h+=$*_,h+=X*c,ie=h>>>13,h&=8191,h+=ee*S,h+=ue*N,h+=j*(5*b),h+=M*(5*I),h+=P*(5*v),ie+=h>>>13,h&=8191;var R=ie;R+=q*v,R+=W*d,R+=H*l,R+=$*Z,R+=X*_,ie=R>>>13,R&=8191,R+=ee*c,R+=ue*S,R+=j*N,R+=M*(5*b),R+=P*(5*I),ie+=R>>>13,R&=8191;var he=ie;he+=q*I,he+=W*v,he+=H*d,he+=$*l,he+=X*Z,ie=he>>>13,he&=8191,he+=ee*_,he+=ue*c,he+=j*S,he+=M*N,he+=P*(5*b),ie+=he>>>13,he&=8191;var pe=ie;pe+=q*b,pe+=W*I,pe+=H*v,pe+=$*d,pe+=X*l,ie=pe>>>13,pe&=8191,pe+=ee*Z,pe+=ue*_,pe+=j*c,pe+=M*S,pe+=P*N,ie+=pe>>>13,pe&=8191,ie=(ie<<2)+ie|0,ie=ie+ye|0,ye=ie&8191,ie=ie>>>13,le+=ie,q=ye,W=le,H=be,$=Y,X=G,ee=z,ue=h,j=R,M=he,P=pe,w+=16,O-=16}this._h[0]=q,this._h[1]=W,this._h[2]=H,this._h[3]=$,this._h[4]=X,this._h[5]=ee,this._h[6]=ue,this._h[7]=j,this._h[8]=M,this._h[9]=P},m.prototype.finish=function(y,w){w===void 0&&(w=0);var O=new Uint16Array(10),A,q,W,H;if(this._leftover){for(H=this._leftover,this._buffer[H++]=1;H<16;H++)this._buffer[H]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(A=this._h[1]>>>13,this._h[1]&=8191,H=2;H<10;H++)this._h[H]+=A,A=this._h[H]>>>13,this._h[H]&=8191;for(this._h[0]+=A*5,A=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=A,A=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=A,O[0]=this._h[0]+5,A=O[0]>>>13,O[0]&=8191,H=1;H<10;H++)O[H]=this._h[H]+A,A=O[H]>>>13,O[H]&=8191;for(O[9]-=8192,q=(A^1)-1,H=0;H<10;H++)O[H]&=q;for(q=~q,H=0;H<10;H++)this._h[H]=this._h[H]&q|O[H];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,W=this._h[0]+this._pad[0],this._h[0]=W&65535,H=1;H<8;H++)W=(this._h[H]+this._pad[H]|0)+(W>>>16)|0,this._h[H]=W&65535;return y[w+0]=this._h[0]>>>0,y[w+1]=this._h[0]>>>8,y[w+2]=this._h[1]>>>0,y[w+3]=this._h[1]>>>8,y[w+4]=this._h[2]>>>0,y[w+5]=this._h[2]>>>8,y[w+6]=this._h[3]>>>0,y[w+7]=this._h[3]>>>8,y[w+8]=this._h[4]>>>0,y[w+9]=this._h[4]>>>8,y[w+10]=this._h[5]>>>0,y[w+11]=this._h[5]>>>8,y[w+12]=this._h[6]>>>0,y[w+13]=this._h[6]>>>8,y[w+14]=this._h[7]>>>0,y[w+15]=this._h[7]>>>8,this._finished=!0,this},m.prototype.update=function(y){var w=0,O=y.length,A;if(this._leftover){A=16-this._leftover,A>O&&(A=O);for(var q=0;q<A;q++)this._buffer[this._leftover+q]=y[w+q];if(O-=A,w+=A,this._leftover+=A,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(O>=16&&(A=O-O%16,this._blocks(y,w,A),w+=A,O-=A),O){for(var q=0;q<O;q++)this._buffer[this._leftover+q]=y[w+q];this._leftover+=O}return this},m.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var y=new Uint8Array(16);return this.finish(y),y},m.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},m}();n.Poly1305=s;function o(m,y){var w=new s(m);w.update(y);var O=w.digest();return w.clean(),O}n.oneTimeAuth=o;function f(m,y){return m.length!==n.DIGEST_LENGTH||y.length!==n.DIGEST_LENGTH?!1:t.equal(m,y)}n.equal=f})(Vf);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Ca,r=Vf,s=Sr,o=je,f=Ci;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var m=new Uint8Array(16),y=function(){function w(O){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,O.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(O)}return w.prototype.seal=function(O,A,q,W){if(O.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var H=new Uint8Array(16);H.set(O,H.length-O.length);var $=new Uint8Array(32);t.stream(this._key,H,$,4);var X=A.length+this.tagLength,ee;if(W){if(W.length!==X)throw new Error("ChaCha20Poly1305: incorrect destination length");ee=W}else ee=new Uint8Array(X);return t.streamXOR(this._key,H,A,ee,4),this._authenticate(ee.subarray(ee.length-this.tagLength,ee.length),$,ee.subarray(0,ee.length-this.tagLength),q),s.wipe(H),ee},w.prototype.open=function(O,A,q,W){if(O.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(A.length<this.tagLength)return null;var H=new Uint8Array(16);H.set(O,H.length-O.length);var $=new Uint8Array(32);t.stream(this._key,H,$,4);var X=new Uint8Array(this.tagLength);if(this._authenticate(X,$,A.subarray(0,A.length-this.tagLength),q),!f.equal(X,A.subarray(A.length-this.tagLength,A.length)))return null;var ee=A.length-this.tagLength,ue;if(W){if(W.length!==ee)throw new Error("ChaCha20Poly1305: incorrect destination length");ue=W}else ue=new Uint8Array(ee);return t.streamXOR(this._key,H,A.subarray(0,A.length-this.tagLength),ue,4),s.wipe(H),ue},w.prototype.clean=function(){return s.wipe(this._key),this},w.prototype._authenticate=function(O,A,q,W){var H=new r.Poly1305(A);W&&(H.update(W),W.length%16>0&&H.update(m.subarray(W.length%16))),H.update(q),q.length%16>0&&H.update(m.subarray(q.length%16));var $=new Uint8Array(8);W&&o.writeUint64LE(W.length,$),H.update($),o.writeUint64LE(q.length,$),H.update($);for(var X=H.digest(),ee=0;ee<X.length;ee++)O[ee]=X[ee];H.clean(),s.wipe(X),s.wipe($)},w}();n.ChaCha20Poly1305=y})(ru);var Gf={},os={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});function gb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}iu.isSerializableHash=gb;Object.defineProperty(os,"__esModule",{value:!0});var Yr=iu,_b=Ci,yb=Sr,Wf=function(){function n(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Yr.isSerializableHash(this._inner)&&Yr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),yb.wipe(s)}return n.prototype.reset=function(){if(!Yr.isSerializableHash(this._inner)||!Yr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Yr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Yr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(t){return this._inner.update(t),this},n.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(!Yr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(t){if(!Yr.isSerializableHash(this._inner)||!Yr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(t){if(!Yr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},n}();os.HMAC=Wf;function vb(n,t,r){var s=new Wf(n,t);s.update(r);var o=s.digest();return s.clean(),o}os.hmac=vb;os.equal=_b.equal;Object.defineProperty(Gf,"__esModule",{value:!0});var yl=os,vl=Sr,bb=function(){function n(t,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var f=yl.hmac(this._hash,s,r);this._hmac=new yl.HMAC(t,f),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),vl.wipe(this._buffer),vl.wipe(this._counter),this._bufpos=0},n}(),mb=Gf.HKDF=bb,On={},Aa={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.BrowserRandomSource=void 0;const bl=65536;class wb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=bl)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,bl)));return r}}Ta.BrowserRandomSource=wb;function Eb(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.NodeRandomSource=void 0;const Db=Sr;class Sb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Eb<"u"){const t=Iv;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,Db.wipe)(r),s}}Na.NodeRandomSource=Sb;Object.defineProperty(Aa,"__esModule",{value:!0});Aa.SystemRandomSource=void 0;const Ib=Ta,xb=Na;class Ob{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Ib.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new xb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Aa.SystemRandomSource=Ob;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const t=Aa,r=je,s=Sr;n.defaultRandomSource=new t.SystemRandomSource;function o(O,A=n.defaultRandomSource){return A.randomBytes(O)}n.randomBytes=o;function f(O=n.defaultRandomSource){const A=o(4,O),q=(0,r.readUint32LE)(A);return(0,s.wipe)(A),q}n.randomUint32=f;const m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function y(O,A=m,q=n.defaultRandomSource){if(A.length<2)throw new Error("randomString charset is too short");if(A.length>256)throw new Error("randomString charset is too long");let W="";const H=A.length,$=256-256%H;for(;O>0;){const X=o(Math.ceil(O*256/$),q);for(let ee=0;ee<X.length&&O>0;ee++){const ue=X[ee];ue<$&&(W+=A.charAt(ue%H),O--)}(0,s.wipe)(X)}return W}n.randomString=y;function w(O,A=m,q=n.defaultRandomSource){const W=Math.ceil(O/(Math.log(A.length)/Math.LN2));return y(W,A,q)}n.randomStringForEntropy=w})(On);var Ra={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=je,r=Sr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function y(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},y.prototype.update=function(w,O){if(O===void 0&&(O=w.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this._bytesHashed+=O,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&O>0;)this._buffer[this._bufferLength++]=w[A++],O--;this._bufferLength===this.blockSize&&(f(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(O>=this.blockSize&&(A=f(this._temp,this._state,w,A,O),O%=this.blockSize);O>0;)this._buffer[this._bufferLength++]=w[A++],O--;return this},y.prototype.finish=function(w){if(!this._finished){var O=this._bytesHashed,A=this._bufferLength,q=O/536870912|0,W=O<<3,H=O%64<56?64:128;this._buffer[A]=128;for(var $=A+1;$<H-8;$++)this._buffer[$]=0;t.writeUint32BE(q,this._buffer,H-8),t.writeUint32BE(W,this._buffer,H-4),f(this._temp,this._state,this._buffer,0,H),this._finished=!0}for(var $=0;$<this.digestLength/4;$++)t.writeUint32BE(this._state[$],w,$*4);return this},y.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(w){return this._state.set(w.state),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(w){r.wipe(w.state),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},y}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function f(y,w,O,A,q){for(;q>=64;){for(var W=w[0],H=w[1],$=w[2],X=w[3],ee=w[4],ue=w[5],j=w[6],M=w[7],P=0;P<16;P++){var N=A+P*4;y[P]=t.readUint32BE(O,N)}for(var P=16;P<64;P++){var S=y[P-2],c=(S>>>17|S<<32-17)^(S>>>19|S<<32-19)^S>>>10;S=y[P-15];var _=(S>>>7|S<<32-7)^(S>>>18|S<<32-18)^S>>>3;y[P]=(c+y[P-7]|0)+(_+y[P-16]|0)}for(var P=0;P<64;P++){var c=(((ee>>>6|ee<<26)^(ee>>>11|ee<<21)^(ee>>>25|ee<<7))+(ee&ue^~ee&j)|0)+(M+(o[P]+y[P]|0)|0)|0,_=((W>>>2|W<<32-2)^(W>>>13|W<<32-13)^(W>>>22|W<<32-22))+(W&H^W&$^H&$)|0;M=j,j=ue,ue=ee,ee=X+c|0,X=$,$=H,H=W,W=c+_|0}w[0]+=W,w[1]+=H,w[2]+=$,w[3]+=X,w[4]+=ee,w[5]+=ue,w[6]+=j,w[7]+=M,A+=64,q-=64}return A}function m(y){var w=new s;w.update(y);var O=w.digest();return w.clean(),O}n.hash=m})(Ra);var nu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const t=On,r=Sr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(P){const N=new Float64Array(16);if(P)for(let S=0;S<P.length;S++)N[S]=P[S];return N}const o=new Uint8Array(32);o[0]=9;const f=s([56129,1]);function m(P){let N=1;for(let S=0;S<16;S++){let c=P[S]+N+65535;N=Math.floor(c/65536),P[S]=c-N*65536}P[0]+=N-1+37*(N-1)}function y(P,N,S){const c=~(S-1);for(let _=0;_<16;_++){const Z=c&(P[_]^N[_]);P[_]^=Z,N[_]^=Z}}function w(P,N){const S=s(),c=s();for(let _=0;_<16;_++)c[_]=N[_];m(c),m(c),m(c);for(let _=0;_<2;_++){S[0]=c[0]-65517;for(let l=1;l<15;l++)S[l]=c[l]-65535-(S[l-1]>>16&1),S[l-1]&=65535;S[15]=c[15]-32767-(S[14]>>16&1);const Z=S[15]>>16&1;S[14]&=65535,y(c,S,1-Z)}for(let _=0;_<16;_++)P[2*_]=c[_]&255,P[2*_+1]=c[_]>>8}function O(P,N){for(let S=0;S<16;S++)P[S]=N[2*S]+(N[2*S+1]<<8);P[15]&=32767}function A(P,N,S){for(let c=0;c<16;c++)P[c]=N[c]+S[c]}function q(P,N,S){for(let c=0;c<16;c++)P[c]=N[c]-S[c]}function W(P,N,S){let c,_,Z=0,l=0,d=0,v=0,I=0,b=0,p=0,F=0,L=0,J=0,C=0,k=0,te=0,se=0,ie=0,ye=0,le=0,be=0,Y=0,G=0,z=0,h=0,R=0,he=0,pe=0,Ie=0,He=0,Ve=0,$e=0,dt=0,pt=0,Me=S[0],xe=S[1],Re=S[2],Fe=S[3],ze=S[4],Pe=S[5],Ue=S[6],Se=S[7],Ce=S[8],Be=S[9],Oe=S[10],ke=S[11],We=S[12],et=S[13],tt=S[14],Je=S[15];c=N[0],Z+=c*Me,l+=c*xe,d+=c*Re,v+=c*Fe,I+=c*ze,b+=c*Pe,p+=c*Ue,F+=c*Se,L+=c*Ce,J+=c*Be,C+=c*Oe,k+=c*ke,te+=c*We,se+=c*et,ie+=c*tt,ye+=c*Je,c=N[1],l+=c*Me,d+=c*xe,v+=c*Re,I+=c*Fe,b+=c*ze,p+=c*Pe,F+=c*Ue,L+=c*Se,J+=c*Ce,C+=c*Be,k+=c*Oe,te+=c*ke,se+=c*We,ie+=c*et,ye+=c*tt,le+=c*Je,c=N[2],d+=c*Me,v+=c*xe,I+=c*Re,b+=c*Fe,p+=c*ze,F+=c*Pe,L+=c*Ue,J+=c*Se,C+=c*Ce,k+=c*Be,te+=c*Oe,se+=c*ke,ie+=c*We,ye+=c*et,le+=c*tt,be+=c*Je,c=N[3],v+=c*Me,I+=c*xe,b+=c*Re,p+=c*Fe,F+=c*ze,L+=c*Pe,J+=c*Ue,C+=c*Se,k+=c*Ce,te+=c*Be,se+=c*Oe,ie+=c*ke,ye+=c*We,le+=c*et,be+=c*tt,Y+=c*Je,c=N[4],I+=c*Me,b+=c*xe,p+=c*Re,F+=c*Fe,L+=c*ze,J+=c*Pe,C+=c*Ue,k+=c*Se,te+=c*Ce,se+=c*Be,ie+=c*Oe,ye+=c*ke,le+=c*We,be+=c*et,Y+=c*tt,G+=c*Je,c=N[5],b+=c*Me,p+=c*xe,F+=c*Re,L+=c*Fe,J+=c*ze,C+=c*Pe,k+=c*Ue,te+=c*Se,se+=c*Ce,ie+=c*Be,ye+=c*Oe,le+=c*ke,be+=c*We,Y+=c*et,G+=c*tt,z+=c*Je,c=N[6],p+=c*Me,F+=c*xe,L+=c*Re,J+=c*Fe,C+=c*ze,k+=c*Pe,te+=c*Ue,se+=c*Se,ie+=c*Ce,ye+=c*Be,le+=c*Oe,be+=c*ke,Y+=c*We,G+=c*et,z+=c*tt,h+=c*Je,c=N[7],F+=c*Me,L+=c*xe,J+=c*Re,C+=c*Fe,k+=c*ze,te+=c*Pe,se+=c*Ue,ie+=c*Se,ye+=c*Ce,le+=c*Be,be+=c*Oe,Y+=c*ke,G+=c*We,z+=c*et,h+=c*tt,R+=c*Je,c=N[8],L+=c*Me,J+=c*xe,C+=c*Re,k+=c*Fe,te+=c*ze,se+=c*Pe,ie+=c*Ue,ye+=c*Se,le+=c*Ce,be+=c*Be,Y+=c*Oe,G+=c*ke,z+=c*We,h+=c*et,R+=c*tt,he+=c*Je,c=N[9],J+=c*Me,C+=c*xe,k+=c*Re,te+=c*Fe,se+=c*ze,ie+=c*Pe,ye+=c*Ue,le+=c*Se,be+=c*Ce,Y+=c*Be,G+=c*Oe,z+=c*ke,h+=c*We,R+=c*et,he+=c*tt,pe+=c*Je,c=N[10],C+=c*Me,k+=c*xe,te+=c*Re,se+=c*Fe,ie+=c*ze,ye+=c*Pe,le+=c*Ue,be+=c*Se,Y+=c*Ce,G+=c*Be,z+=c*Oe,h+=c*ke,R+=c*We,he+=c*et,pe+=c*tt,Ie+=c*Je,c=N[11],k+=c*Me,te+=c*xe,se+=c*Re,ie+=c*Fe,ye+=c*ze,le+=c*Pe,be+=c*Ue,Y+=c*Se,G+=c*Ce,z+=c*Be,h+=c*Oe,R+=c*ke,he+=c*We,pe+=c*et,Ie+=c*tt,He+=c*Je,c=N[12],te+=c*Me,se+=c*xe,ie+=c*Re,ye+=c*Fe,le+=c*ze,be+=c*Pe,Y+=c*Ue,G+=c*Se,z+=c*Ce,h+=c*Be,R+=c*Oe,he+=c*ke,pe+=c*We,Ie+=c*et,He+=c*tt,Ve+=c*Je,c=N[13],se+=c*Me,ie+=c*xe,ye+=c*Re,le+=c*Fe,be+=c*ze,Y+=c*Pe,G+=c*Ue,z+=c*Se,h+=c*Ce,R+=c*Be,he+=c*Oe,pe+=c*ke,Ie+=c*We,He+=c*et,Ve+=c*tt,$e+=c*Je,c=N[14],ie+=c*Me,ye+=c*xe,le+=c*Re,be+=c*Fe,Y+=c*ze,G+=c*Pe,z+=c*Ue,h+=c*Se,R+=c*Ce,he+=c*Be,pe+=c*Oe,Ie+=c*ke,He+=c*We,Ve+=c*et,$e+=c*tt,dt+=c*Je,c=N[15],ye+=c*Me,le+=c*xe,be+=c*Re,Y+=c*Fe,G+=c*ze,z+=c*Pe,h+=c*Ue,R+=c*Se,he+=c*Ce,pe+=c*Be,Ie+=c*Oe,He+=c*ke,Ve+=c*We,$e+=c*et,dt+=c*tt,pt+=c*Je,Z+=38*le,l+=38*be,d+=38*Y,v+=38*G,I+=38*z,b+=38*h,p+=38*R,F+=38*he,L+=38*pe,J+=38*Ie,C+=38*He,k+=38*Ve,te+=38*$e,se+=38*dt,ie+=38*pt,_=1,c=Z+_+65535,_=Math.floor(c/65536),Z=c-_*65536,c=l+_+65535,_=Math.floor(c/65536),l=c-_*65536,c=d+_+65535,_=Math.floor(c/65536),d=c-_*65536,c=v+_+65535,_=Math.floor(c/65536),v=c-_*65536,c=I+_+65535,_=Math.floor(c/65536),I=c-_*65536,c=b+_+65535,_=Math.floor(c/65536),b=c-_*65536,c=p+_+65535,_=Math.floor(c/65536),p=c-_*65536,c=F+_+65535,_=Math.floor(c/65536),F=c-_*65536,c=L+_+65535,_=Math.floor(c/65536),L=c-_*65536,c=J+_+65535,_=Math.floor(c/65536),J=c-_*65536,c=C+_+65535,_=Math.floor(c/65536),C=c-_*65536,c=k+_+65535,_=Math.floor(c/65536),k=c-_*65536,c=te+_+65535,_=Math.floor(c/65536),te=c-_*65536,c=se+_+65535,_=Math.floor(c/65536),se=c-_*65536,c=ie+_+65535,_=Math.floor(c/65536),ie=c-_*65536,c=ye+_+65535,_=Math.floor(c/65536),ye=c-_*65536,Z+=_-1+37*(_-1),_=1,c=Z+_+65535,_=Math.floor(c/65536),Z=c-_*65536,c=l+_+65535,_=Math.floor(c/65536),l=c-_*65536,c=d+_+65535,_=Math.floor(c/65536),d=c-_*65536,c=v+_+65535,_=Math.floor(c/65536),v=c-_*65536,c=I+_+65535,_=Math.floor(c/65536),I=c-_*65536,c=b+_+65535,_=Math.floor(c/65536),b=c-_*65536,c=p+_+65535,_=Math.floor(c/65536),p=c-_*65536,c=F+_+65535,_=Math.floor(c/65536),F=c-_*65536,c=L+_+65535,_=Math.floor(c/65536),L=c-_*65536,c=J+_+65535,_=Math.floor(c/65536),J=c-_*65536,c=C+_+65535,_=Math.floor(c/65536),C=c-_*65536,c=k+_+65535,_=Math.floor(c/65536),k=c-_*65536,c=te+_+65535,_=Math.floor(c/65536),te=c-_*65536,c=se+_+65535,_=Math.floor(c/65536),se=c-_*65536,c=ie+_+65535,_=Math.floor(c/65536),ie=c-_*65536,c=ye+_+65535,_=Math.floor(c/65536),ye=c-_*65536,Z+=_-1+37*(_-1),P[0]=Z,P[1]=l,P[2]=d,P[3]=v,P[4]=I,P[5]=b,P[6]=p,P[7]=F,P[8]=L,P[9]=J,P[10]=C,P[11]=k,P[12]=te,P[13]=se,P[14]=ie,P[15]=ye}function H(P,N){W(P,N,N)}function $(P,N){const S=s();for(let c=0;c<16;c++)S[c]=N[c];for(let c=253;c>=0;c--)H(S,S),c!==2&&c!==4&&W(S,S,N);for(let c=0;c<16;c++)P[c]=S[c]}function X(P,N){const S=new Uint8Array(32),c=new Float64Array(80),_=s(),Z=s(),l=s(),d=s(),v=s(),I=s();for(let L=0;L<31;L++)S[L]=P[L];S[31]=P[31]&127|64,S[0]&=248,O(c,N);for(let L=0;L<16;L++)Z[L]=c[L];_[0]=d[0]=1;for(let L=254;L>=0;--L){const J=S[L>>>3]>>>(L&7)&1;y(_,Z,J),y(l,d,J),A(v,_,l),q(_,_,l),A(l,Z,d),q(Z,Z,d),H(d,v),H(I,_),W(_,l,_),W(l,Z,v),A(v,_,l),q(_,_,l),H(Z,_),q(l,d,I),W(_,l,f),A(_,_,d),W(l,l,_),W(_,d,I),W(d,Z,c),H(Z,v),y(_,Z,J),y(l,d,J)}for(let L=0;L<16;L++)c[L+16]=_[L],c[L+32]=l[L],c[L+48]=Z[L],c[L+64]=d[L];const b=c.subarray(32),p=c.subarray(16);$(b,b),W(p,p,b);const F=new Uint8Array(32);return w(F,p),F}n.scalarMult=X;function ee(P){return X(P,o)}n.scalarMultBase=ee;function ue(P){if(P.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const N=new Uint8Array(P);return{publicKey:ee(N),secretKey:N}}n.generateKeyPairFromSeed=ue;function j(P){const N=(0,t.randomBytes)(32,P),S=ue(N);return(0,r.wipe)(N),S}n.generateKeyPair=j;function M(P,N,S=!1){if(P.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(N.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=X(P,N);if(S){let _=0;for(let Z=0;Z<c.length;Z++)_|=c[Z];if(_===0)throw new Error("X25519: invalid shared key")}return c}n.sharedKey=M})(nu);function su(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Yf(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?su(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function $c(n,t){t||(t=n.reduce((o,f)=>o+f.length,0));const r=Yf(t);let s=0;for(const o of n)r.set(o,s),s+=o.length;return su(r)}function Pb(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var f=n.charAt(o),m=f.charCodeAt(0);if(r[m]!==255)throw new TypeError(f+" is ambiguous");r[m]=o}var y=n.length,w=n.charAt(0),O=Math.log(y)/Math.log(256),A=Math.log(256)/Math.log(y);function q($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var X=0,ee=0,ue=0,j=$.length;ue!==j&&$[ue]===0;)ue++,X++;for(var M=(j-ue)*A+1>>>0,P=new Uint8Array(M);ue!==j;){for(var N=$[ue],S=0,c=M-1;(N!==0||S<ee)&&c!==-1;c--,S++)N+=256*P[c]>>>0,P[c]=N%y>>>0,N=N/y>>>0;if(N!==0)throw new Error("Non-zero carry");ee=S,ue++}for(var _=M-ee;_!==M&&P[_]===0;)_++;for(var Z=w.repeat(X);_<M;++_)Z+=n.charAt(P[_]);return Z}function W($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var X=0;if($[X]!==" "){for(var ee=0,ue=0;$[X]===w;)ee++,X++;for(var j=($.length-X)*O+1>>>0,M=new Uint8Array(j);$[X];){var P=r[$.charCodeAt(X)];if(P===255)return;for(var N=0,S=j-1;(P!==0||N<ue)&&S!==-1;S--,N++)P+=y*M[S]>>>0,M[S]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ue=N,X++}if($[X]!==" "){for(var c=j-ue;c!==j&&M[c]===0;)c++;for(var _=new Uint8Array(ee+(j-c)),Z=ee;c!==j;)_[Z++]=M[c++];return _}}}function H($){var X=W($);if(X)return X;throw new Error(`Non-${t} character`)}return{encode:q,decodeUnsafe:W,decode:H}}var Cb=Pb,Ab=Cb;const Tb=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Nb=n=>new TextEncoder().encode(n),Rb=n=>new TextDecoder().decode(n);class Fb{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Ub{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Jf(this,t)}}class jb{constructor(t){this.decoders=t}or(t){return Jf(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Jf=(n,t)=>new jb({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class $b{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new Fb(t,r,s),this.decoder=new Ub(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Fa=({name:n,prefix:t,encode:r,decode:s})=>new $b(n,t,r,s),cs=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:o}=Ab(r,t);return Fa({prefix:n,name:t,encode:s,decode:f=>Tb(o(f))})},Lb=(n,t,r,s)=>{const o={};for(let A=0;A<t.length;++A)o[t[A]]=A;let f=n.length;for(;n[f-1]==="=";)--f;const m=new Uint8Array(f*r/8|0);let y=0,w=0,O=0;for(let A=0;A<f;++A){const q=o[n[A]];if(q===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|q,y+=r,y>=8&&(y-=8,m[O++]=255&w>>y)}if(y>=r||255&w<<8-y)throw new SyntaxError("Unexpected end of data");return m},Mb=(n,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let f="",m=0,y=0;for(let w=0;w<n.length;++w)for(y=y<<8|n[w],m+=8;m>r;)m-=r,f+=t[o&y>>m];if(m&&(f+=t[o&y<<r-m]),s)for(;f.length*r&7;)f+="=";return f},Wt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>Fa({prefix:t,name:n,encode(o){return Mb(o,s,r)},decode(o){return Lb(o,s,r,n)}}),zb=Fa({prefix:"\0",name:"identity",encode:n=>Rb(n),decode:n=>Nb(n)}),qb=Object.freeze(Object.defineProperty({__proto__:null,identity:zb},Symbol.toStringTag,{value:"Module"})),Hb=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Bb=Object.freeze(Object.defineProperty({__proto__:null,base2:Hb},Symbol.toStringTag,{value:"Module"})),Kb=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Vb=Object.freeze(Object.defineProperty({__proto__:null,base8:Kb},Symbol.toStringTag,{value:"Module"})),kb=cs({prefix:"9",name:"base10",alphabet:"0123456789"}),Gb=Object.freeze(Object.defineProperty({__proto__:null,base10:kb},Symbol.toStringTag,{value:"Module"})),Wb=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Yb=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Jb=Object.freeze(Object.defineProperty({__proto__:null,base16:Wb,base16upper:Yb},Symbol.toStringTag,{value:"Module"})),Xb=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Zb=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qb=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),em=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tm=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rm=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),im=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nm=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),sm=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),am=Object.freeze(Object.defineProperty({__proto__:null,base32:Xb,base32hex:tm,base32hexpad:im,base32hexpadupper:nm,base32hexupper:rm,base32pad:Qb,base32padupper:em,base32upper:Zb,base32z:sm},Symbol.toStringTag,{value:"Module"})),om=cs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cm=cs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),um=Object.freeze(Object.defineProperty({__proto__:null,base36:om,base36upper:cm},Symbol.toStringTag,{value:"Module"})),hm=cs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lm=cs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),fm=Object.freeze(Object.defineProperty({__proto__:null,base58btc:hm,base58flickr:lm},Symbol.toStringTag,{value:"Module"})),dm=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pm=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gm=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_m=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ym=Object.freeze(Object.defineProperty({__proto__:null,base64:dm,base64pad:pm,base64url:gm,base64urlpad:_m},Symbol.toStringTag,{value:"Module"})),Xf=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),vm=Xf.reduce((n,t,r)=>(n[r]=t,n),[]),bm=Xf.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function mm(n){return n.reduce((t,r)=>(t+=vm[r],t),"")}function wm(n){const t=[];for(const r of n){const s=bm[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const Em=Fa({prefix:"🚀",name:"base256emoji",encode:mm,decode:wm}),Dm=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Em},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const ml={...qb,...Bb,...Vb,...Gb,...Jb,...am,...um,...fm,...ym,...Dm};function Zf(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const wl=Zf("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),lc=Zf("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=Yf(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),Qf={utf8:wl,"utf-8":wl,hex:ml.base16,latin1:lc,ascii:lc,binary:lc,...ml};function yr(n,t="utf8"){const r=Qf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?su(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function ur(n,t="utf8"){const r=Qf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var me={},ed={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,y,w,O,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(_){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};_(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},y=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},O=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",f),_("__metadata",m),_("__awaiter",y),_("__generator",w),_("__exportStar",O),_("__createBinding",c),_("__values",A),_("__read",q),_("__spread",W),_("__spreadArrays",H),_("__await",$),_("__asyncGenerator",X),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",j),_("__importStar",M),_("__importDefault",P),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(ed);var Ua=ed.exports,fc={},Wn={},El;function Sm(){if(El)return Wn;El=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.delay=void 0;function n(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Wn.delay=n,Wn}var Vi={},dc={},ki={},Dl;function Im(){return Dl||(Dl=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.ONE_THOUSAND=ki.ONE_HUNDRED=void 0,ki.ONE_HUNDRED=100,ki.ONE_THOUSAND=1e3),ki}var pc={},Sl;function xm(){return Sl||(Sl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(pc)),pc}var Il;function td(){return Il||(Il=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Ua;t.__exportStar(Im(),n),t.__exportStar(xm(),n)}(dc)),dc}var xl;function Om(){if(xl)return Vi;xl=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.fromMiliseconds=Vi.toMiliseconds=void 0;const n=td();function t(s){return s*n.ONE_THOUSAND}Vi.toMiliseconds=t;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Vi.fromMiliseconds=r,Vi}var Ol;function Pm(){return Ol||(Ol=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Ua;t.__exportStar(Sm(),n),t.__exportStar(Om(),n)}(fc)),fc}var En={},Pl;function Cm(){if(Pl)return En;Pl=1,Object.defineProperty(En,"__esModule",{value:!0}),En.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:o})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return En.Watch=n,En.default=n,En}var gc={},Yn={},Cl;function Am(){if(Cl)return Yn;Cl=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.IWatch=void 0;class n{}return Yn.IWatch=n,Yn}var Al;function Tm(){return Al||(Al=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Ua.__exportStar(Am(),n)}(gc)),gc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Ua;t.__exportStar(Pm(),n),t.__exportStar(Cm(),n),t.__exportStar(Tm(),n),t.__exportStar(td(),n)})(me);var as={};(function(n){const t=Nv,r=Rv,s=Av,o=Tv,f=j=>j==null,m=Symbol("encodeFragmentIdentifier");function y(j){switch(j.arrayFormat){case"index":return M=>(P,N)=>{const S=P.length;return N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,[A(M,j),"[",S,"]"].join("")]:[...P,[A(M,j),"[",A(S,j),"]=",A(N,j)].join("")]};case"bracket":return M=>(P,N)=>N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,[A(M,j),"[]"].join("")]:[...P,[A(M,j),"[]=",A(N,j)].join("")];case"colon-list-separator":return M=>(P,N)=>N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,[A(M,j),":list="].join("")]:[...P,[A(M,j),":list=",A(N,j)].join("")];case"comma":case"separator":case"bracket-separator":{const M=j.arrayFormat==="bracket-separator"?"[]=":"=";return P=>(N,S)=>S===void 0||j.skipNull&&S===null||j.skipEmptyString&&S===""?N:(S=S===null?"":S,N.length===0?[[A(P,j),M,A(S,j)].join("")]:[[N,A(S,j)].join(j.arrayFormatSeparator)])}default:return M=>(P,N)=>N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,A(M,j)]:[...P,[A(M,j),"=",A(N,j)].join("")]}}function w(j){let M;switch(j.arrayFormat){case"index":return(P,N,S)=>{if(M=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!M){S[P]=N;return}S[P]===void 0&&(S[P]={}),S[P][M[1]]=N};case"bracket":return(P,N,S)=>{if(M=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!M){S[P]=N;return}if(S[P]===void 0){S[P]=[N];return}S[P]=[].concat(S[P],N)};case"colon-list-separator":return(P,N,S)=>{if(M=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!M){S[P]=N;return}if(S[P]===void 0){S[P]=[N];return}S[P]=[].concat(S[P],N)};case"comma":case"separator":return(P,N,S)=>{const c=typeof N=="string"&&N.includes(j.arrayFormatSeparator),_=typeof N=="string"&&!c&&q(N,j).includes(j.arrayFormatSeparator);N=_?q(N,j):N;const Z=c||_?N.split(j.arrayFormatSeparator).map(l=>q(l,j)):N===null?N:q(N,j);S[P]=Z};case"bracket-separator":return(P,N,S)=>{const c=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!c){S[P]=N&&q(N,j);return}const _=N===null?[]:N.split(j.arrayFormatSeparator).map(Z=>q(Z,j));if(S[P]===void 0){S[P]=_;return}S[P]=[].concat(S[P],_)};default:return(P,N,S)=>{if(S[P]===void 0){S[P]=N;return}S[P]=[].concat(S[P],N)}}}function O(j){if(typeof j!="string"||j.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function A(j,M){return M.encode?M.strict?t(j):encodeURIComponent(j):j}function q(j,M){return M.decode?r(j):j}function W(j){return Array.isArray(j)?j.sort():typeof j=="object"?W(Object.keys(j)).sort((M,P)=>Number(M)-Number(P)).map(M=>j[M]):j}function H(j){const M=j.indexOf("#");return M!==-1&&(j=j.slice(0,M)),j}function $(j){let M="";const P=j.indexOf("#");return P!==-1&&(M=j.slice(P)),M}function X(j){j=H(j);const M=j.indexOf("?");return M===-1?"":j.slice(M+1)}function ee(j,M){return M.parseNumbers&&!Number.isNaN(Number(j))&&typeof j=="string"&&j.trim()!==""?j=Number(j):M.parseBooleans&&j!==null&&(j.toLowerCase()==="true"||j.toLowerCase()==="false")&&(j=j.toLowerCase()==="true"),j}function ue(j,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),O(M.arrayFormatSeparator);const P=w(M),N=Object.create(null);if(typeof j!="string"||(j=j.trim().replace(/^[?#&]/,""),!j))return N;for(const S of j.split("&")){if(S==="")continue;let[c,_]=s(M.decode?S.replace(/\+/g," "):S,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(M.arrayFormat)?_:q(_,M),P(q(c,M),_,N)}for(const S of Object.keys(N)){const c=N[S];if(typeof c=="object"&&c!==null)for(const _ of Object.keys(c))c[_]=ee(c[_],M);else N[S]=ee(c,M)}return M.sort===!1?N:(M.sort===!0?Object.keys(N).sort():Object.keys(N).sort(M.sort)).reduce((S,c)=>{const _=N[c];return _&&typeof _=="object"&&!Array.isArray(_)?S[c]=W(_):S[c]=_,S},Object.create(null))}n.extract=X,n.parse=ue,n.stringify=(j,M)=>{if(!j)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),O(M.arrayFormatSeparator);const P=_=>M.skipNull&&f(j[_])||M.skipEmptyString&&j[_]==="",N=y(M),S={};for(const _ of Object.keys(j))P(_)||(S[_]=j[_]);const c=Object.keys(S);return M.sort!==!1&&c.sort(M.sort),c.map(_=>{const Z=j[_];return Z===void 0?"":Z===null?A(_,M):Array.isArray(Z)?Z.length===0&&M.arrayFormat==="bracket-separator"?A(_,M)+"[]":Z.reduce(N(_),[]).join("&"):A(_,M)+"="+A(Z,M)}).filter(_=>_.length>0).join("&")},n.parseUrl=(j,M)=>{M=Object.assign({decode:!0},M);const[P,N]=s(j,"#");return Object.assign({url:P.split("?")[0]||"",query:ue(X(j),M)},M&&M.parseFragmentIdentifier&&N?{fragmentIdentifier:q(N,M)}:{})},n.stringifyUrl=(j,M)=>{M=Object.assign({encode:!0,strict:!0,[m]:!0},M);const P=H(j.url).split("?")[0]||"",N=n.extract(j.url),S=n.parse(N,{sort:!1}),c=Object.assign(S,j.query);let _=n.stringify(c,M);_&&(_=`?${_}`);let Z=$(j.url);return j.fragmentIdentifier&&(Z=`#${M[m]?A(j.fragmentIdentifier,M):j.fragmentIdentifier}`),`${P}${_}${Z}`},n.pick=(j,M,P)=>{P=Object.assign({parseFragmentIdentifier:!0,[m]:!1},P);const{url:N,query:S,fragmentIdentifier:c}=n.parseUrl(j,P);return n.stringifyUrl({url:N,query:o(S,M),fragmentIdentifier:c},P)},n.exclude=(j,M,P)=>{const N=Array.isArray(M)?S=>!M.includes(S):(S,c)=>!M(S,c);return n.pick(j,N,P)}})(as);const Nm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Rm(n,t=[]){const r=[];return Object.keys(n).forEach(s=>{if(t.length&&!t.includes(s))return;const o=n[s];r.push(...o.accounts)}),r}function rd(n,t){return n.includes(":")?[n]:t.chains||[]}const id="base10",cr="base16",Lc="base64pad",au="utf8",nd=0,Zi=1,Fm=0,Tl=1,Mc=12,ou=32;function Um(){const n=nu.generateKeyPair();return{privateKey:ur(n.secretKey,cr),publicKey:ur(n.publicKey,cr)}}function zc(){const n=On.randomBytes(ou);return ur(n,cr)}function jm(n,t){const r=nu.sharedKey(yr(n,cr),yr(t,cr)),s=new mb(Ra.SHA256,r).expand(ou);return ur(s,cr)}function $m(n){const t=Ra.hash(yr(n,cr));return ur(t,cr)}function In(n){const t=Ra.hash(yr(n,au));return ur(t,cr)}function Lm(n){return yr(`${n}`,id)}function us(n){return Number(ur(n,id))}function Mm(n){const t=Lm(typeof n.type<"u"?n.type:nd);if(us(t)===Zi&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?yr(n.senderPublicKey,cr):void 0,s=typeof n.iv<"u"?yr(n.iv,cr):On.randomBytes(Mc),o=new ru.ChaCha20Poly1305(yr(n.symKey,cr)).seal(s,yr(n.message,au));return qm({type:t,sealed:o,iv:s,senderPublicKey:r})}function zm(n){const t=new ru.ChaCha20Poly1305(yr(n.symKey,cr)),{sealed:r,iv:s}=Ia(n.encoded),o=t.open(s,r);if(o===null)throw new Error("Failed to decrypt");return ur(o,au)}function qm(n){if(us(n.type)===Zi){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur($c([n.type,n.senderPublicKey,n.iv,n.sealed]),Lc)}return ur($c([n.type,n.iv,n.sealed]),Lc)}function Ia(n){const t=yr(n,Lc),r=t.slice(Fm,Tl),s=Tl;if(us(r)===Zi){const y=s+ou,w=y+Mc,O=t.slice(s,y),A=t.slice(y,w),q=t.slice(w);return{type:r,sealed:q,iv:A,senderPublicKey:O}}const o=s+Mc,f=t.slice(s,o),m=t.slice(o);return{type:r,sealed:m,iv:f}}function Hm(n,t){const r=Ia(n);return sd({type:us(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?ur(r.senderPublicKey,cr):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function sd(n){const t=(n==null?void 0:n.type)||nd;if(t===Zi){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function Nl(n){return n.type===Zi&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var Bm=Object.defineProperty,Rl=Object.getOwnPropertySymbols,Km=Object.prototype.hasOwnProperty,Vm=Object.prototype.propertyIsEnumerable,Fl=(n,t,r)=>t in n?Bm(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Ul=(n,t)=>{for(var r in t||(t={}))Km.call(t,r)&&Fl(n,r,t[r]);if(Rl)for(var r of Rl(t))Vm.call(t,r)&&Fl(n,r,t[r]);return n};const km="ReactNative",Yi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Gm="js";function cu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ad(){return!Uv()&&!!jf()&&navigator.product===km}function uu(){return!cu()&&!!jf()}function od(){return ad()?Yi.reactNative:cu()?Yi.node:uu()?Yi.browser:Yi.unknown}function Wm(n,t){let r=as.parse(n);return r=Ul(Ul({},r),t),n=as.stringify(r),n}function Ym(){return Fv()||{name:"",description:"",url:"",icons:[""]}}function Jm(){const n=xv();if(n===null)return"unknown";const t=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[t,n.name,n.version].join("-"):[t,n.version].join("-")}function Xm(){var n;const t=od();return t===Yi.browser?[t,((n=jv())==null?void 0:n.host)||"unknown"].join(":"):t}function Zm(n,t,r){const s=Jm(),o=Xm();return[[n,t].join("-"),[Gm,r].join("-"),s,o].join("/")}function Qm({protocol:n,version:t,relayUrl:r,sdkVersion:s,auth:o,projectId:f,useOnCloseEvent:m}){const y=r.split("?"),w=Zm(n,t,s),O={auth:o,ua:w,projectId:f,useOnCloseEvent:m||void 0},A=Wm(y[1]||"",O);return y[0]+"?"+A}function Ji(n,t){return n.filter(r=>t.includes(r)).length===n.length}function cd(n){return Object.fromEntries(n.entries())}function ud(n){return new Map(Object.entries(n))}function Dn(n=me.FIVE_MINUTES,t){const r=me.toMiliseconds(n||me.FIVE_MINUTES);let s,o,f;return{resolve:m=>{f&&s&&(clearTimeout(f),s(m))},reject:m=>{f&&o&&(clearTimeout(f),o(m))},done:()=>new Promise((m,y)=>{f=setTimeout(()=>{y(new Error(t))},r),s=m,o=y})}}function xa(n,t,r){return new Promise(async(s,o)=>{const f=setTimeout(()=>o(new Error(r)),t);try{const m=await n;s(m)}catch(m){o(m)}clearTimeout(f)})}function hd(n,t){if(typeof t=="string"&&t.startsWith(`${n}:`))return t;if(n.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(n.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${n}`)}function ew(n){return hd("topic",n)}function tw(n){return hd("id",n)}function ld(n){const[t,r]=n.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function Zr(n,t){return me.fromMiliseconds((t||Date.now())+me.toMiliseconds(n))}function xi(n){return Date.now()>=me.toMiliseconds(n)}function zt(n,t){return`${n}${t?`:${t}`:""}`}function _c(n=[],t=[]){return[...new Set([...n,...t])]}const rw="irn";function qc(n){return(n==null?void 0:n.relay)||{protocol:rw}}function ma(n){const t=Nm[n];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${n}`);return t}var iw=Object.defineProperty,jl=Object.getOwnPropertySymbols,nw=Object.prototype.hasOwnProperty,sw=Object.prototype.propertyIsEnumerable,$l=(n,t,r)=>t in n?iw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,aw=(n,t)=>{for(var r in t||(t={}))nw.call(t,r)&&$l(n,r,t[r]);if(jl)for(var r of jl(t))sw.call(t,r)&&$l(n,r,t[r]);return n};function ow(n,t="-"){const r={},s="relay"+t;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const f=o.replace(s,""),m=n[o];r[f]=m}}),r}function cw(n){const t=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,t),o=n.substring(t+1,r).split("@"),f=typeof r<"u"?n.substring(r):"",m=as.parse(f);return{protocol:s,topic:uw(o[0]),version:parseInt(o[1],10),symKey:m.symKey,relay:ow(m)}}function uw(n){return n.startsWith("//")?n.substring(2):n}function hw(n,t="-"){const r="relay",s={};return Object.keys(n).forEach(o=>{const f=r+t+o;n[o]&&(s[f]=n[o])}),s}function lw(n){return`${n.protocol}:${n.topic}@${n.version}?`+as.stringify(aw({symKey:n.symKey},hw(n.relay)))}function Pn(n){const t=[];return n.forEach(r=>{const[s,o]=r.split(":");t.push(`${s}:${o}`)}),t}function fw(n){const t=[];return Object.values(n).forEach(r=>{t.push(...Pn(r.accounts))}),t}function dw(n,t){const r=[];return Object.values(n).forEach(s=>{Pn(s.accounts).includes(t)&&r.push(...s.methods)}),r}function pw(n,t){const r=[];return Object.values(n).forEach(s=>{Pn(s.accounts).includes(t)&&r.push(...s.events)}),r}function gw(n,t){const r=Ea(n,t);if(r)throw new Error(r.message);const s={};for(const[o,f]of Object.entries(n))s[o]={methods:f.methods,events:f.events,chains:f.accounts.map(m=>`${m.split(":")[0]}:${m.split(":")[1]}`)};return s}function fd(n){return n.includes(":")}function wa(n){return fd(n)?n.split(":")[0]:n}const _w={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},yw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(n,t){const{message:r,code:s}=yw[n];return{message:t?`${r} ${t}`:r,code:s}}function Tt(n,t){const{message:r,code:s}=_w[n];return{message:t?`${r} ${t}`:r,code:s}}function di(n,t){return Array.isArray(n)?typeof t<"u"&&n.length?n.every(t):!0:!1}function xn(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ar(n){return typeof n>"u"}function kt(n,t){return t&&ar(n)?!0:typeof n=="string"&&!!n.trim().length}function hu(n,t){return t&&ar(n)?!0:typeof n=="number"&&!isNaN(n)}function vw(n,t){const{requiredNamespaces:r}=t,s=Object.keys(n.namespaces),o=Object.keys(r);let f=!0;return Ji(o,s)?(s.forEach(m=>{const{accounts:y,methods:w,events:O}=n.namespaces[m],A=Pn(y),q=r[m];(!Ji(rd(m,q),A)||!Ji(q.methods,w)||!Ji(q.events,O))&&(f=!1)}),f):!1}function lu(n){return kt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function bw(n){if(kt(n,!1)&&n.includes(":")){const t=n.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&lu(r)}}return!1}function mw(n){if(kt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function ww(n){var t;return(t=n==null?void 0:n.proposer)==null?void 0:t.publicKey}function Ew(n){return n==null?void 0:n.topic}function Dw(n,t){let r=null;return kt(n==null?void 0:n.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Ll(n){let t=!0;return di(n)?n.length&&(t=n.every(r=>kt(r,!1))):t=!1,t}function Sw(n,t,r){let s=null;return di(t)?t.forEach(o=>{s||(!lu(o)||!o.includes(n))&&(s=Tt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):s=Tt("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),s}function Iw(n,t){let r=null;return Object.entries(n).forEach(([s,o])=>{if(r)return;const f=Sw(s,rd(s,o),`${t} requiredNamespace`);f&&(r=f)}),r}function xw(n,t){let r=null;return di(n)?n.forEach(s=>{r||bw(s)||(r=Tt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Tt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Ow(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=xw(s==null?void 0:s.accounts,`${t} namespace`);o&&(r=o)}),r}function Pw(n,t){let r=null;return Ll(n==null?void 0:n.methods)?Ll(n==null?void 0:n.events)||(r=Tt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Tt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function dd(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=Pw(s,`${t}, namespace`);o&&(r=o)}),r}function Cw(n,t,r){let s=null;if(n&&xn(n)){const o=dd(n,t);o&&(s=o);const f=Iw(n,t);f&&(s=f)}else s=de("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Ea(n,t){let r=null;if(n&&xn(n)){const s=dd(n,t);s&&(r=s);const o=Ow(n,t);o&&(r=o)}else r=de("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function pd(n){return kt(n.protocol,!0)}function Aw(n,t){let r=!1;return t&&!n?r=!0:n&&di(n)&&n.length&&n.forEach(s=>{r=pd(s)}),r}function Tw(n){return typeof n=="number"}function _r(n){return typeof n<"u"&&typeof n!==null}function Nw(n){return!(!n||typeof n!="object"||!n.code||!hu(n.code,!1)||!n.message||!kt(n.message,!1))}function Rw(n){return!(ar(n)||!kt(n.method,!1))}function Fw(n){return!(ar(n)||ar(n.result)&&ar(n.error)||!hu(n.id,!1)||!kt(n.jsonrpc,!1))}function Uw(n){return!(ar(n)||!kt(n.name,!1))}function Ml(n,t){return!(!lu(t)||!fw(n).includes(t))}function jw(n,t,r){return kt(r,!1)?dw(n,t).includes(r):!1}function $w(n,t,r){return kt(r,!1)?pw(n,t).includes(r):!1}function zl(n,t,r){let s=null;const o=Lw(n),f=Mw(t),m=Object.keys(o),y=Object.keys(f),w=ql(Object.keys(n)),O=ql(Object.keys(t)),A=w.filter(q=>!O.includes(q));return A.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${A.toString()}
      Received: ${Object.keys(t).toString()}`)),Ji(m,y)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${m.toString()}
      Approved: ${y.toString()}`)),Object.keys(t).forEach(q=>{if(!q.includes(":")||s)return;const W=Pn(t[q].accounts);W.includes(q)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${q}
        Required: ${q}
        Approved: ${W.toString()}`))}),m.forEach(q=>{s||(Ji(o[q].methods,f[q].methods)?Ji(o[q].events,f[q].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${q}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${q}`))}),s}function Lw(n){const t={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?t[r]=n[r]:(s=n[r].chains)==null||s.forEach(o=>{t[o]={methods:n[r].methods,events:n[r].events}})}),t}function ql(n){return[...new Set(n.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Mw(n){const t={};return Object.keys(n).forEach(r=>{if(r.includes(":"))t[r]=n[r];else{const s=Pn(n[r].accounts);s==null||s.forEach(o=>{t[o]={accounts:n[r].accounts.filter(f=>f.includes(`${o}:`)),methods:n[r].methods,events:n[r].events}})}}),t}function zw(n,t){return hu(n,!1)&&n<=t.max&&n>=t.min}var ja={},gd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,y,w,O,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(_){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};_(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},y=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},O=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",f),_("__metadata",m),_("__awaiter",y),_("__generator",w),_("__exportStar",O),_("__createBinding",c),_("__values",A),_("__read",q),_("__spread",W),_("__spreadArrays",H),_("__await",$),_("__asyncGenerator",X),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",j),_("__importStar",M),_("__importDefault",P),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(gd);var _d=gd.exports,hs={};Object.defineProperty(hs,"__esModule",{value:!0});function qw(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}hs.safeJsonParse=qw;function Hw(n){return typeof n=="string"?n:JSON.stringify(n,(t,r)=>typeof r>"u"?null:r)}hs.safeJsonStringify=Hw;var Jn={exports:{}},Hl;function Bw(){return Hl||(Hl=1,function(){let n;function t(){}n=t,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof or<"u"&&or.localStorage?Jn.exports=or.localStorage:typeof window<"u"&&window.localStorage?Jn.exports=window.localStorage:Jn.exports=new t}()),Jn.exports}var yc={},Xn={},Bl;function Kw(){if(Bl)return Xn;Bl=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.IKeyValueStorage=void 0;class n{}return Xn.IKeyValueStorage=n,Xn}var Zn={},Kl;function Vw(){if(Kl)return Zn;Kl=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.parseEntry=void 0;const n=hs;function t(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return Zn.parseEntry=t,Zn}var Vl;function kw(){return Vl||(Vl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=_d;t.__exportStar(Kw(),n),t.__exportStar(Vw(),n)}(yc)),yc}Object.defineProperty(ja,"__esModule",{value:!0});ja.KeyValueStorage=void 0;const Sn=_d,kl=hs,Gw=Sn.__importDefault(Bw()),Ww=kw();class yd{constructor(){this.localStorage=Gw.default}getKeys(){return Sn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Sn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(Ww.parseEntry)})}getItem(t){return Sn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return kl.safeJsonParse(r)})}setItem(t,r){return Sn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,kl.safeJsonStringify(r))})}removeItem(t){return Sn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}ja.KeyValueStorage=yd;var Yw=ja.default=yd,ls={},vd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,y,w,O,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(_){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};_(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},y=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},O=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",f),_("__metadata",m),_("__awaiter",y),_("__generator",w),_("__exportStar",O),_("__createBinding",c),_("__values",A),_("__read",q),_("__spread",W),_("__spreadArrays",H),_("__await",$),_("__asyncGenerator",X),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",j),_("__importStar",M),_("__importDefault",P),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(vd);var $a=vd.exports,Qn={},vc={},es={};class Qi{}const Jw=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Qi},Symbol.toStringTag,{value:"Module"})),Xw=Ov(Jw);var Gl;function Zw(){if(Gl)return es;Gl=1,Object.defineProperty(es,"__esModule",{value:!0}),es.IHeartBeat=void 0;const n=Xw;class t extends n.IEvents{constructor(s){super()}}return es.IHeartBeat=t,es}var Wl;function bd(){return Wl||(Wl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),$a.__exportStar(Zw(),n)}(vc)),vc}var bc={},Gi={},Yl;function Qw(){if(Yl)return Gi;Yl=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.HEARTBEAT_EVENTS=Gi.HEARTBEAT_INTERVAL=void 0;const n=me;return Gi.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Gi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Gi}var Jl;function md(){return Jl||(Jl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),$a.__exportStar(Qw(),n)}(bc)),bc}var Xl;function eE(){if(Xl)return Qn;Xl=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.HeartBeat=void 0;const n=$a,t=Qr,r=me,s=bd(),o=md();class f extends s.IHeartBeat{constructor(y){super(y),this.events=new t.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(y==null?void 0:y.interval)||o.HEARTBEAT_INTERVAL}static init(y){return n.__awaiter(this,void 0,void 0,function*(){const w=new f(y);return yield w.init(),w})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(y,w){this.events.on(y,w)}once(y,w){this.events.once(y,w)}off(y,w){this.events.off(y,w)}removeListener(y,w){this.events.removeListener(y,w)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return Qn.HeartBeat=f,Qn}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=$a;t.__exportStar(eE(),n),t.__exportStar(bd(),n),t.__exportStar(md(),n)})(ls);var Qe={},wd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,y,w,O,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(_){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};_(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},y=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},O=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",f),_("__metadata",m),_("__awaiter",y),_("__generator",w),_("__exportStar",O),_("__createBinding",c),_("__values",A),_("__read",q),_("__spread",W),_("__spreadArrays",H),_("__await",$),_("__asyncGenerator",X),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",j),_("__importStar",M),_("__importDefault",P),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(wd);var tE=wd.exports,mc,Zl;function rE(){if(Zl)return mc;Zl=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}mc=t;function t(r,s,o){var f=o&&o.stringify||n,m=1;if(typeof r=="object"&&r!==null){var y=s.length+m;if(y===1)return r;var w=new Array(y);w[0]=f(r);for(var O=1;O<y;O++)w[O]=f(s[O]);return w.join(" ")}if(typeof r!="string")return r;var A=s.length;if(A===0)return r;for(var q="",W=1-m,H=-1,$=r&&r.length||0,X=0;X<$;){if(r.charCodeAt(X)===37&&X+1<$){switch(H=H>-1?H:0,r.charCodeAt(X+1)){case 100:case 102:if(W>=A||s[W]==null)break;H<X&&(q+=r.slice(H,X)),q+=Number(s[W]),H=X+2,X++;break;case 105:if(W>=A||s[W]==null)break;H<X&&(q+=r.slice(H,X)),q+=Math.floor(Number(s[W])),H=X+2,X++;break;case 79:case 111:case 106:if(W>=A||s[W]===void 0)break;H<X&&(q+=r.slice(H,X));var ee=typeof s[W];if(ee==="string"){q+="'"+s[W]+"'",H=X+2,X++;break}if(ee==="function"){q+=s[W].name||"<anonymous>",H=X+2,X++;break}q+=f(s[W]),H=X+2,X++;break;case 115:if(W>=A)break;H<X&&(q+=r.slice(H,X)),q+=String(s[W]),H=X+2,X++;break;case 37:H<X&&(q+=r.slice(H,X)),q+="%",H=X+2,X++,W--;break}++W}++X}return H===-1?r:(H<$&&(q+=r.slice(H)),q)}return mc}var wc,Ql;function iE(){if(Ql)return wc;Ql=1;const n=rE();wc=o;const t=N().console||{},r={mapHttpRequest:$,mapHttpResponse:$,wrapRequestSerializer:X,wrapResponseSerializer:X,wrapErrorSerializer:X,req:$,res:$,err:W};function s(S,c){return Array.isArray(S)?S.filter(function(Z){return Z!=="!stdSerializers.err"}):S===!0?Object.keys(c):!1}function o(S){S=S||{},S.browser=S.browser||{};const c=S.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const _=S.browser.write||t;S.browser.write&&(S.browser.asObject=!0);const Z=S.serializers||{},l=s(S.browser.serialize,Z);let d=S.browser.serialize;Array.isArray(S.browser.serialize)&&S.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1);const v=["error","fatal","warn","info","debug","trace"];typeof _=="function"&&(_.error=_.fatal=_.warn=_.info=_.debug=_.trace=_),S.enabled===!1&&(S.level="silent");const I=S.level||"info",b=Object.create(_);b.log||(b.log=ee),Object.defineProperty(b,"levelVal",{get:F}),Object.defineProperty(b,"level",{get:L,set:J});const p={transmit:c,serialize:l,asObject:S.browser.asObject,levels:v,timestamp:H(S)};b.levels=o.levels,b.level=I,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=ee,b.serializers=Z,b._serialize=l,b._stdErrSerialize=d,b.child=C,c&&(b._logEvent=q());function F(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function J(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,f(p,b,"error","log"),f(p,b,"fatal","error"),f(p,b,"warn","error"),f(p,b,"info","log"),f(p,b,"debug","log"),f(p,b,"trace","log")}function C(k,te){if(!k)throw new Error("missing bindings for child Pino");te=te||{},l&&k.serializers&&(te.serializers=k.serializers);const se=te.serializers;if(l&&se){var ie=Object.assign({},Z,se),ye=S.browser.serialize===!0?Object.keys(ie):l;delete k.serializers,w([k],ye,ie,this._stdErrSerialize)}function le(be){this._childLevel=(be._childLevel|0)+1,this.error=O(be,k,"error"),this.fatal=O(be,k,"fatal"),this.warn=O(be,k,"warn"),this.info=O(be,k,"info"),this.debug=O(be,k,"debug"),this.trace=O(be,k,"trace"),ie&&(this.serializers=ie,this._serialize=ye),c&&(this._logEvent=q([].concat(be._logEvent.bindings,k)))}return le.prototype=this,new le(this)}return b}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:ue,epochTime:j,unixTime:M,isoTime:P});function f(S,c,_,Z){const l=Object.getPrototypeOf(c);c[_]=c.levelVal>c.levels.values[_]?ee:l[_]?l[_]:t[_]||t[Z]||ee,m(S,c,_)}function m(S,c,_){!S.transmit&&c[_]===ee||(c[_]=function(Z){return function(){const d=S.timestamp(),v=new Array(arguments.length),I=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var b=0;b<v.length;b++)v[b]=arguments[b];if(S.serialize&&!S.asObject&&w(v,this._serialize,this.serializers,this._stdErrSerialize),S.asObject?Z.call(I,y(this,_,v,d)):Z.apply(I,v),S.transmit){const p=S.transmit.level||c.level,F=o.levels.values[p],L=o.levels.values[_];if(L<F)return;A(this,{ts:d,methodLevel:_,methodValue:L,transmitLevel:p,transmitValue:o.levels.values[S.transmit.level||c.level],send:S.transmit.send,val:c.levelVal},v)}}}(c[_]))}function y(S,c,_,Z){S._serialize&&w(_,S._serialize,S.serializers,S._stdErrSerialize);const l=_.slice();let d=l[0];const v={};Z&&(v.time=Z),v.level=o.levels.values[c];let I=(S._childLevel|0)+1;if(I<1&&(I=1),d!==null&&typeof d=="object"){for(;I--&&typeof l[0]=="object";)Object.assign(v,l.shift());d=l.length?n(l.shift(),l):void 0}else typeof d=="string"&&(d=n(l.shift(),l));return d!==void 0&&(v.msg=d),v}function w(S,c,_,Z){for(const l in S)if(Z&&S[l]instanceof Error)S[l]=o.stdSerializers.err(S[l]);else if(typeof S[l]=="object"&&!Array.isArray(S[l]))for(const d in S[l])c&&c.indexOf(d)>-1&&d in _&&(S[l][d]=_[d](S[l][d]))}function O(S,c,_){return function(){const Z=new Array(1+arguments.length);Z[0]=c;for(var l=1;l<Z.length;l++)Z[l]=arguments[l-1];return S[_].apply(this,Z)}}function A(S,c,_){const Z=c.send,l=c.ts,d=c.methodLevel,v=c.methodValue,I=c.val,b=S._logEvent.bindings;w(_,S._serialize||Object.keys(S.serializers),S.serializers,S._stdErrSerialize===void 0?!0:S._stdErrSerialize),S._logEvent.ts=l,S._logEvent.messages=_.filter(function(p){return b.indexOf(p)===-1}),S._logEvent.level.label=d,S._logEvent.level.value=v,Z(d,S._logEvent,I),S._logEvent=q(b)}function q(S){return{ts:0,messages:[],bindings:S||[],level:{label:"",value:0}}}function W(S){const c={type:S.constructor.name,msg:S.message,stack:S.stack};for(const _ in S)c[_]===void 0&&(c[_]=S[_]);return c}function H(S){return typeof S.timestamp=="function"?S.timestamp:S.timestamp===!1?ue:j}function $(){return{}}function X(S){return S}function ee(){}function ue(){return!1}function j(){return Date.now()}function M(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function N(){function S(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return S(self)||S(window)||S(this)||{}}}return wc}var Wi={},ef;function Ed(){return ef||(ef=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.PINO_CUSTOM_CONTEXT_KEY=Wi.PINO_LOGGER_DEFAULTS=void 0,Wi.PINO_LOGGER_DEFAULTS={level:"info"},Wi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Wi}var sr={},tf;function nE(){if(tf)return sr;tf=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.generateChildLogger=sr.formatChildLoggerContext=sr.getLoggerContext=sr.setBrowserLoggerContext=sr.getBrowserLoggerContext=sr.getDefaultLoggerOptions=void 0;const n=Ed();function t(y){return Object.assign(Object.assign({},y),{level:(y==null?void 0:y.level)||n.PINO_LOGGER_DEFAULTS.level})}sr.getDefaultLoggerOptions=t;function r(y,w=n.PINO_CUSTOM_CONTEXT_KEY){return y[w]||""}sr.getBrowserLoggerContext=r;function s(y,w,O=n.PINO_CUSTOM_CONTEXT_KEY){return y[O]=w,y}sr.setBrowserLoggerContext=s;function o(y,w=n.PINO_CUSTOM_CONTEXT_KEY){let O="";return typeof y.bindings>"u"?O=r(y,w):O=y.bindings().context||"",O}sr.getLoggerContext=o;function f(y,w,O=n.PINO_CUSTOM_CONTEXT_KEY){const A=o(y,O);return A.trim()?`${A}/${w}`:w}sr.formatChildLoggerContext=f;function m(y,w,O=n.PINO_CUSTOM_CONTEXT_KEY){const A=f(y,w,O),q=y.child({context:A});return s(q,A,O)}return sr.generateChildLogger=m,sr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const t=tE,r=t.__importDefault(iE());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Ed(),n),t.__exportStar(nE(),n)})(Qe);class sE extends Qi{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class aE extends Qi{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class oE{constructor(t,r){this.logger=t,this.core=r}}let cE=class extends Qi{constructor(t,r){super(),this.relayer=t,this.logger=r}},uE=class extends Qi{constructor(t){super()}},hE=class{constructor(t,r,s,o){this.core=t,this.logger=r,this.name=s}};class lE extends Qi{constructor(t,r){super(),this.relayer=t,this.logger=r}}class fE extends Qi{constructor(t,r){super(),this.core=t,this.logger=r}}let dE=class{constructor(t,r){this.projectId=t,this.logger=r}},pE=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}};class gE{constructor(t){this.client=t}}var fu={},Dd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=je,r=Sr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function y(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},y.prototype.update=function(w,O){if(O===void 0&&(O=w.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var A=0;if(this._bytesHashed+=O,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&O>0;)this._buffer[this._bufferLength++]=w[A++],O--;this._bufferLength===this.blockSize&&(f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(O>=this.blockSize&&(A=f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,w,A,O),O%=this.blockSize);O>0;)this._buffer[this._bufferLength++]=w[A++],O--;return this},y.prototype.finish=function(w){if(!this._finished){var O=this._bytesHashed,A=this._bufferLength,q=O/536870912|0,W=O<<3,H=O%128<112?128:256;this._buffer[A]=128;for(var $=A+1;$<H-8;$++)this._buffer[$]=0;t.writeUint32BE(q,this._buffer,H-8),t.writeUint32BE(W,this._buffer,H-4),f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,H),this._finished=!0}for(var $=0;$<this.digestLength/8;$++)t.writeUint32BE(this._stateHi[$],w,$*8),t.writeUint32BE(this._stateLo[$],w,$*8+4);return this},y.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(w){return this._stateHi.set(w.stateHi),this._stateLo.set(w.stateLo),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(w){r.wipe(w.stateHi),r.wipe(w.stateLo),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},y}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function f(y,w,O,A,q,W,H){for(var $=O[0],X=O[1],ee=O[2],ue=O[3],j=O[4],M=O[5],P=O[6],N=O[7],S=A[0],c=A[1],_=A[2],Z=A[3],l=A[4],d=A[5],v=A[6],I=A[7],b,p,F,L,J,C,k,te;H>=128;){for(var se=0;se<16;se++){var ie=8*se+W;y[se]=t.readUint32BE(q,ie),w[se]=t.readUint32BE(q,ie+4)}for(var se=0;se<80;se++){var ye=$,le=X,be=ee,Y=ue,G=j,z=M,h=P,R=N,he=S,pe=c,Ie=_,He=Z,Ve=l,$e=d,dt=v,pt=I;if(b=N,p=I,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=(j>>>14|l<<32-14)^(j>>>18|l<<32-18)^(l>>>41-32|j<<32-(41-32)),p=(l>>>14|j<<32-14)^(l>>>18|j<<32-18)^(j>>>41-32|l<<32-(41-32)),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=j&M^~j&P,p=l&d^~l&v,J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=o[se*2],p=o[se*2+1],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=y[se%16],p=w[se%16],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,F=k&65535|te<<16,L=J&65535|C<<16,b=F,p=L,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=($>>>28|S<<32-28)^(S>>>34-32|$<<32-(34-32))^(S>>>39-32|$<<32-(39-32)),p=(S>>>28|$<<32-28)^($>>>34-32|S<<32-(34-32))^($>>>39-32|S<<32-(39-32)),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=$&X^$&ee^X&ee,p=S&c^S&_^c&_,J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,R=k&65535|te<<16,pt=J&65535|C<<16,b=Y,p=He,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=F,p=L,J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,Y=k&65535|te<<16,He=J&65535|C<<16,X=ye,ee=le,ue=be,j=Y,M=G,P=z,N=h,$=R,c=he,_=pe,Z=Ie,l=He,d=Ve,v=$e,I=dt,S=pt,se%16===15)for(var ie=0;ie<16;ie++)b=y[ie],p=w[ie],J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=y[(ie+9)%16],p=w[(ie+9)%16],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,F=y[(ie+1)%16],L=w[(ie+1)%16],b=(F>>>1|L<<32-1)^(F>>>8|L<<32-8)^F>>>7,p=(L>>>1|F<<32-1)^(L>>>8|F<<32-8)^(L>>>7|F<<32-7),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,F=y[(ie+14)%16],L=w[(ie+14)%16],b=(F>>>19|L<<32-19)^(L>>>61-32|F<<32-(61-32))^F>>>6,p=(L>>>19|F<<32-19)^(F>>>61-32|L<<32-(61-32))^(L>>>6|F<<32-6),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,y[ie]=k&65535|te<<16,w[ie]=J&65535|C<<16}b=$,p=S,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[0],p=A[0],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[0]=$=k&65535|te<<16,A[0]=S=J&65535|C<<16,b=X,p=c,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[1],p=A[1],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[1]=X=k&65535|te<<16,A[1]=c=J&65535|C<<16,b=ee,p=_,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[2],p=A[2],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[2]=ee=k&65535|te<<16,A[2]=_=J&65535|C<<16,b=ue,p=Z,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[3],p=A[3],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[3]=ue=k&65535|te<<16,A[3]=Z=J&65535|C<<16,b=j,p=l,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[4],p=A[4],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[4]=j=k&65535|te<<16,A[4]=l=J&65535|C<<16,b=M,p=d,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[5],p=A[5],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[5]=M=k&65535|te<<16,A[5]=d=J&65535|C<<16,b=P,p=v,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[6],p=A[6],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[6]=P=k&65535|te<<16,A[6]=v=J&65535|C<<16,b=N,p=I,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=O[7],p=A[7],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,O[7]=N=k&65535|te<<16,A[7]=I=J&65535|C<<16,W+=128,H-=128}return W}function m(y){var w=new s;w.update(y);var O=w.digest();return w.clean(),O}n.hash=m})(Dd);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const t=On,r=Dd,s=Sr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(Y){const G=new Float64Array(16);if(Y)for(let z=0;z<Y.length;z++)G[z]=Y[z];return G}const f=new Uint8Array(32);f[0]=9;const m=o(),y=o([1]),w=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),O=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),A=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),q=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),W=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function H(Y,G){for(let z=0;z<16;z++)Y[z]=G[z]|0}function $(Y){let G=1;for(let z=0;z<16;z++){let h=Y[z]+G+65535;G=Math.floor(h/65536),Y[z]=h-G*65536}Y[0]+=G-1+37*(G-1)}function X(Y,G,z){const h=~(z-1);for(let R=0;R<16;R++){const he=h&(Y[R]^G[R]);Y[R]^=he,G[R]^=he}}function ee(Y,G){const z=o(),h=o();for(let R=0;R<16;R++)h[R]=G[R];$(h),$(h),$(h);for(let R=0;R<2;R++){z[0]=h[0]-65517;for(let pe=1;pe<15;pe++)z[pe]=h[pe]-65535-(z[pe-1]>>16&1),z[pe-1]&=65535;z[15]=h[15]-32767-(z[14]>>16&1);const he=z[15]>>16&1;z[14]&=65535,X(h,z,1-he)}for(let R=0;R<16;R++)Y[2*R]=h[R]&255,Y[2*R+1]=h[R]>>8}function ue(Y,G){let z=0;for(let h=0;h<32;h++)z|=Y[h]^G[h];return(1&z-1>>>8)-1}function j(Y,G){const z=new Uint8Array(32),h=new Uint8Array(32);return ee(z,Y),ee(h,G),ue(z,h)}function M(Y){const G=new Uint8Array(32);return ee(G,Y),G[0]&1}function P(Y,G){for(let z=0;z<16;z++)Y[z]=G[2*z]+(G[2*z+1]<<8);Y[15]&=32767}function N(Y,G,z){for(let h=0;h<16;h++)Y[h]=G[h]+z[h]}function S(Y,G,z){for(let h=0;h<16;h++)Y[h]=G[h]-z[h]}function c(Y,G,z){let h,R,he=0,pe=0,Ie=0,He=0,Ve=0,$e=0,dt=0,pt=0,Me=0,xe=0,Re=0,Fe=0,ze=0,Pe=0,Ue=0,Se=0,Ce=0,Be=0,Oe=0,ke=0,We=0,et=0,tt=0,Je=0,Qt=0,hr=0,Br=0,er=0,ei=0,pi=0,Ti=0,mt=z[0],gt=z[1],wt=z[2],Et=z[3],vt=z[4],_t=z[5],Rt=z[6],Ft=z[7],Dt=z[8],Ut=z[9],St=z[10],Ot=z[11],It=z[12],ht=z[13],jt=z[14],$t=z[15];h=G[0],he+=h*mt,pe+=h*gt,Ie+=h*wt,He+=h*Et,Ve+=h*vt,$e+=h*_t,dt+=h*Rt,pt+=h*Ft,Me+=h*Dt,xe+=h*Ut,Re+=h*St,Fe+=h*Ot,ze+=h*It,Pe+=h*ht,Ue+=h*jt,Se+=h*$t,h=G[1],pe+=h*mt,Ie+=h*gt,He+=h*wt,Ve+=h*Et,$e+=h*vt,dt+=h*_t,pt+=h*Rt,Me+=h*Ft,xe+=h*Dt,Re+=h*Ut,Fe+=h*St,ze+=h*Ot,Pe+=h*It,Ue+=h*ht,Se+=h*jt,Ce+=h*$t,h=G[2],Ie+=h*mt,He+=h*gt,Ve+=h*wt,$e+=h*Et,dt+=h*vt,pt+=h*_t,Me+=h*Rt,xe+=h*Ft,Re+=h*Dt,Fe+=h*Ut,ze+=h*St,Pe+=h*Ot,Ue+=h*It,Se+=h*ht,Ce+=h*jt,Be+=h*$t,h=G[3],He+=h*mt,Ve+=h*gt,$e+=h*wt,dt+=h*Et,pt+=h*vt,Me+=h*_t,xe+=h*Rt,Re+=h*Ft,Fe+=h*Dt,ze+=h*Ut,Pe+=h*St,Ue+=h*Ot,Se+=h*It,Ce+=h*ht,Be+=h*jt,Oe+=h*$t,h=G[4],Ve+=h*mt,$e+=h*gt,dt+=h*wt,pt+=h*Et,Me+=h*vt,xe+=h*_t,Re+=h*Rt,Fe+=h*Ft,ze+=h*Dt,Pe+=h*Ut,Ue+=h*St,Se+=h*Ot,Ce+=h*It,Be+=h*ht,Oe+=h*jt,ke+=h*$t,h=G[5],$e+=h*mt,dt+=h*gt,pt+=h*wt,Me+=h*Et,xe+=h*vt,Re+=h*_t,Fe+=h*Rt,ze+=h*Ft,Pe+=h*Dt,Ue+=h*Ut,Se+=h*St,Ce+=h*Ot,Be+=h*It,Oe+=h*ht,ke+=h*jt,We+=h*$t,h=G[6],dt+=h*mt,pt+=h*gt,Me+=h*wt,xe+=h*Et,Re+=h*vt,Fe+=h*_t,ze+=h*Rt,Pe+=h*Ft,Ue+=h*Dt,Se+=h*Ut,Ce+=h*St,Be+=h*Ot,Oe+=h*It,ke+=h*ht,We+=h*jt,et+=h*$t,h=G[7],pt+=h*mt,Me+=h*gt,xe+=h*wt,Re+=h*Et,Fe+=h*vt,ze+=h*_t,Pe+=h*Rt,Ue+=h*Ft,Se+=h*Dt,Ce+=h*Ut,Be+=h*St,Oe+=h*Ot,ke+=h*It,We+=h*ht,et+=h*jt,tt+=h*$t,h=G[8],Me+=h*mt,xe+=h*gt,Re+=h*wt,Fe+=h*Et,ze+=h*vt,Pe+=h*_t,Ue+=h*Rt,Se+=h*Ft,Ce+=h*Dt,Be+=h*Ut,Oe+=h*St,ke+=h*Ot,We+=h*It,et+=h*ht,tt+=h*jt,Je+=h*$t,h=G[9],xe+=h*mt,Re+=h*gt,Fe+=h*wt,ze+=h*Et,Pe+=h*vt,Ue+=h*_t,Se+=h*Rt,Ce+=h*Ft,Be+=h*Dt,Oe+=h*Ut,ke+=h*St,We+=h*Ot,et+=h*It,tt+=h*ht,Je+=h*jt,Qt+=h*$t,h=G[10],Re+=h*mt,Fe+=h*gt,ze+=h*wt,Pe+=h*Et,Ue+=h*vt,Se+=h*_t,Ce+=h*Rt,Be+=h*Ft,Oe+=h*Dt,ke+=h*Ut,We+=h*St,et+=h*Ot,tt+=h*It,Je+=h*ht,Qt+=h*jt,hr+=h*$t,h=G[11],Fe+=h*mt,ze+=h*gt,Pe+=h*wt,Ue+=h*Et,Se+=h*vt,Ce+=h*_t,Be+=h*Rt,Oe+=h*Ft,ke+=h*Dt,We+=h*Ut,et+=h*St,tt+=h*Ot,Je+=h*It,Qt+=h*ht,hr+=h*jt,Br+=h*$t,h=G[12],ze+=h*mt,Pe+=h*gt,Ue+=h*wt,Se+=h*Et,Ce+=h*vt,Be+=h*_t,Oe+=h*Rt,ke+=h*Ft,We+=h*Dt,et+=h*Ut,tt+=h*St,Je+=h*Ot,Qt+=h*It,hr+=h*ht,Br+=h*jt,er+=h*$t,h=G[13],Pe+=h*mt,Ue+=h*gt,Se+=h*wt,Ce+=h*Et,Be+=h*vt,Oe+=h*_t,ke+=h*Rt,We+=h*Ft,et+=h*Dt,tt+=h*Ut,Je+=h*St,Qt+=h*Ot,hr+=h*It,Br+=h*ht,er+=h*jt,ei+=h*$t,h=G[14],Ue+=h*mt,Se+=h*gt,Ce+=h*wt,Be+=h*Et,Oe+=h*vt,ke+=h*_t,We+=h*Rt,et+=h*Ft,tt+=h*Dt,Je+=h*Ut,Qt+=h*St,hr+=h*Ot,Br+=h*It,er+=h*ht,ei+=h*jt,pi+=h*$t,h=G[15],Se+=h*mt,Ce+=h*gt,Be+=h*wt,Oe+=h*Et,ke+=h*vt,We+=h*_t,et+=h*Rt,tt+=h*Ft,Je+=h*Dt,Qt+=h*Ut,hr+=h*St,Br+=h*Ot,er+=h*It,ei+=h*ht,pi+=h*jt,Ti+=h*$t,he+=38*Ce,pe+=38*Be,Ie+=38*Oe,He+=38*ke,Ve+=38*We,$e+=38*et,dt+=38*tt,pt+=38*Je,Me+=38*Qt,xe+=38*hr,Re+=38*Br,Fe+=38*er,ze+=38*ei,Pe+=38*pi,Ue+=38*Ti,R=1,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=pe+R+65535,R=Math.floor(h/65536),pe=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=He+R+65535,R=Math.floor(h/65536),He=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=xe+R+65535,R=Math.floor(h/65536),xe=h-R*65536,h=Re+R+65535,R=Math.floor(h/65536),Re=h-R*65536,h=Fe+R+65535,R=Math.floor(h/65536),Fe=h-R*65536,h=ze+R+65535,R=Math.floor(h/65536),ze=h-R*65536,h=Pe+R+65535,R=Math.floor(h/65536),Pe=h-R*65536,h=Ue+R+65535,R=Math.floor(h/65536),Ue=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,he+=R-1+37*(R-1),R=1,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=pe+R+65535,R=Math.floor(h/65536),pe=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=He+R+65535,R=Math.floor(h/65536),He=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=xe+R+65535,R=Math.floor(h/65536),xe=h-R*65536,h=Re+R+65535,R=Math.floor(h/65536),Re=h-R*65536,h=Fe+R+65535,R=Math.floor(h/65536),Fe=h-R*65536,h=ze+R+65535,R=Math.floor(h/65536),ze=h-R*65536,h=Pe+R+65535,R=Math.floor(h/65536),Pe=h-R*65536,h=Ue+R+65535,R=Math.floor(h/65536),Ue=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,he+=R-1+37*(R-1),Y[0]=he,Y[1]=pe,Y[2]=Ie,Y[3]=He,Y[4]=Ve,Y[5]=$e,Y[6]=dt,Y[7]=pt,Y[8]=Me,Y[9]=xe,Y[10]=Re,Y[11]=Fe,Y[12]=ze,Y[13]=Pe,Y[14]=Ue,Y[15]=Se}function _(Y,G){c(Y,G,G)}function Z(Y,G){const z=o();let h;for(h=0;h<16;h++)z[h]=G[h];for(h=253;h>=0;h--)_(z,z),h!==2&&h!==4&&c(z,z,G);for(h=0;h<16;h++)Y[h]=z[h]}function l(Y,G){const z=o();let h;for(h=0;h<16;h++)z[h]=G[h];for(h=250;h>=0;h--)_(z,z),h!==1&&c(z,z,G);for(h=0;h<16;h++)Y[h]=z[h]}function d(Y,G){const z=o(),h=o(),R=o(),he=o(),pe=o(),Ie=o(),He=o(),Ve=o(),$e=o();S(z,Y[1],Y[0]),S($e,G[1],G[0]),c(z,z,$e),N(h,Y[0],Y[1]),N($e,G[0],G[1]),c(h,h,$e),c(R,Y[3],G[3]),c(R,R,O),c(he,Y[2],G[2]),N(he,he,he),S(pe,h,z),S(Ie,he,R),N(He,he,R),N(Ve,h,z),c(Y[0],pe,Ie),c(Y[1],Ve,He),c(Y[2],He,Ie),c(Y[3],pe,Ve)}function v(Y,G,z){for(let h=0;h<4;h++)X(Y[h],G[h],z)}function I(Y,G){const z=o(),h=o(),R=o();Z(R,G[2]),c(z,G[0],R),c(h,G[1],R),ee(Y,h),Y[31]^=M(z)<<7}function b(Y,G,z){H(Y[0],m),H(Y[1],y),H(Y[2],y),H(Y[3],m);for(let h=255;h>=0;--h){const R=z[h/8|0]>>(h&7)&1;v(Y,G,R),d(G,Y),d(Y,Y),v(Y,G,R)}}function p(Y,G){const z=[o(),o(),o(),o()];H(z[0],A),H(z[1],q),H(z[2],y),c(z[3],A,q),b(Y,z,G)}function F(Y){if(Y.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const G=(0,r.hash)(Y);G[0]&=248,G[31]&=127,G[31]|=64;const z=new Uint8Array(32),h=[o(),o(),o(),o()];p(h,G),I(z,h);const R=new Uint8Array(64);return R.set(Y),R.set(z,32),{publicKey:z,secretKey:R}}n.generateKeyPairFromSeed=F;function L(Y){const G=(0,t.randomBytes)(32,Y),z=F(G);return(0,s.wipe)(G),z}n.generateKeyPair=L;function J(Y){if(Y.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Y.subarray(32))}n.extractPublicKeyFromSecretKey=J;const C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k(Y,G){let z,h,R,he;for(h=63;h>=32;--h){for(z=0,R=h-32,he=h-12;R<he;++R)G[R]+=z-16*G[h]*C[R-(h-32)],z=Math.floor((G[R]+128)/256),G[R]-=z*256;G[R]+=z,G[h]=0}for(z=0,R=0;R<32;R++)G[R]+=z-(G[31]>>4)*C[R],z=G[R]>>8,G[R]&=255;for(R=0;R<32;R++)G[R]-=z*C[R];for(h=0;h<32;h++)G[h+1]+=G[h]>>8,Y[h]=G[h]&255}function te(Y){const G=new Float64Array(64);for(let z=0;z<64;z++)G[z]=Y[z];for(let z=0;z<64;z++)Y[z]=0;k(Y,G)}function se(Y,G){const z=new Float64Array(64),h=[o(),o(),o(),o()],R=(0,r.hash)(Y.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const he=new Uint8Array(64);he.set(R.subarray(32),32);const pe=new r.SHA512;pe.update(he.subarray(32)),pe.update(G);const Ie=pe.digest();pe.clean(),te(Ie),p(h,Ie),I(he,h),pe.reset(),pe.update(he.subarray(0,32)),pe.update(Y.subarray(32)),pe.update(G);const He=pe.digest();te(He);for(let Ve=0;Ve<32;Ve++)z[Ve]=Ie[Ve];for(let Ve=0;Ve<32;Ve++)for(let $e=0;$e<32;$e++)z[Ve+$e]+=He[Ve]*R[$e];return k(he.subarray(32),z),he}n.sign=se;function ie(Y,G){const z=o(),h=o(),R=o(),he=o(),pe=o(),Ie=o(),He=o();return H(Y[2],y),P(Y[1],G),_(R,Y[1]),c(he,R,w),S(R,R,Y[2]),N(he,Y[2],he),_(pe,he),_(Ie,pe),c(He,Ie,pe),c(z,He,R),c(z,z,he),l(z,z),c(z,z,R),c(z,z,he),c(z,z,he),c(Y[0],z,he),_(h,Y[0]),c(h,h,he),j(h,R)&&c(Y[0],Y[0],W),_(h,Y[0]),c(h,h,he),j(h,R)?-1:(M(Y[0])===G[31]>>7&&S(Y[0],m,Y[0]),c(Y[3],Y[0],Y[1]),0)}function ye(Y,G,z){const h=new Uint8Array(32),R=[o(),o(),o(),o()],he=[o(),o(),o(),o()];if(z.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ie(he,Y))return!1;const pe=new r.SHA512;pe.update(z.subarray(0,32)),pe.update(Y),pe.update(G);const Ie=pe.digest();return te(Ie),b(R,he,Ie),p(he,z.subarray(32)),d(R,he),I(h,R),!ue(z,h)}n.verify=ye;function le(Y){let G=[o(),o(),o(),o()];if(ie(G,Y))throw new Error("Ed25519: invalid public key");let z=o(),h=o(),R=G[1];N(z,y,R),S(h,y,R),Z(h,h),c(z,z,h);let he=new Uint8Array(32);return ee(he,z),he}n.convertPublicKeyToX25519=le;function be(Y){const G=(0,r.hash)(Y.subarray(0,32));G[0]&=248,G[31]&=127,G[31]|=64;const z=new Uint8Array(G.subarray(0,32));return(0,s.wipe)(G),z}n.convertSecretKeyToX25519=be})(fu);const _E="EdDSA",yE="JWT",Sd=".",Id="base64url",vE="utf8",bE="utf8",mE=":",wE="did",EE="key",rf="base58btc",DE="z",SE="K36",IE=32;function Oa(n){return ur(yr(Jc(n),vE),Id)}function xd(n){const t=yr(SE,rf),r=DE+ur($c([t,n]),rf);return[wE,EE,r].join(mE)}function xE(n){return ur(n,Id)}function OE(n){return yr([Oa(n.header),Oa(n.payload)].join(Sd),bE)}function PE(n){return[Oa(n.header),Oa(n.payload),xE(n.signature)].join(Sd)}function nf(n=On.randomBytes(IE)){return fu.generateKeyPairFromSeed(n)}async function CE(n,t,r,s,o=me.fromMiliseconds(Date.now())){const f={alg:_E,typ:yE},m=xd(s.publicKey),y=o+r,w={iss:m,sub:n,aud:t,iat:o,exp:y},O=OE({header:f,payload:w}),A=fu.sign(s.secretKey,O);return PE({header:f,payload:w,signature:A})}const sf=10,AE=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),TE=()=>typeof window<"u",NE=AE();class RE{constructor(t){if(this.url=t,this.events=new Qr.EventEmitter,this.registering=!1,!_l(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Jc(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!_l(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),o(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const o=$v.isReactNative()?void 0:{rejectUnauthorized:!Lv(t)},f=new NE(t,[],o);TE()?f.onerror=m=>{const y=m;s(this.emitError(y.error))}:f.on("error",m=>{s(this.emitError(m))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?$f(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),o=s.message||s.toString(),f=Xc(t,o);this.events.emit("payload",f)}parseError(t,r=this.url){return Mv(t,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>sf&&this.events.setMaxListeners(sf)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var Pa={exports:{}};Pa.exports;(function(n,t){var r=200,s="__lodash_hash_undefined__",o=1,f=2,m=9007199254740991,y="[object Arguments]",w="[object Array]",O="[object AsyncFunction]",A="[object Boolean]",q="[object Date]",W="[object Error]",H="[object Function]",$="[object GeneratorFunction]",X="[object Map]",ee="[object Number]",ue="[object Null]",j="[object Object]",M="[object Promise]",P="[object Proxy]",N="[object RegExp]",S="[object Set]",c="[object String]",_="[object Symbol]",Z="[object Undefined]",l="[object WeakMap]",d="[object ArrayBuffer]",v="[object DataView]",I="[object Float32Array]",b="[object Float64Array]",p="[object Int8Array]",F="[object Int16Array]",L="[object Int32Array]",J="[object Uint8Array]",C="[object Uint8ClampedArray]",k="[object Uint16Array]",te="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,ye=/^(?:0|[1-9]\d*)$/,le={};le[I]=le[b]=le[p]=le[F]=le[L]=le[J]=le[C]=le[k]=le[te]=!0,le[y]=le[w]=le[d]=le[A]=le[v]=le[q]=le[W]=le[H]=le[X]=le[ee]=le[j]=le[N]=le[S]=le[c]=le[l]=!1;var be=typeof or=="object"&&or&&or.Object===Object&&or,Y=typeof self=="object"&&self&&self.Object===Object&&self,G=be||Y||Function("return this")(),z=t&&!t.nodeType&&t,h=z&&!0&&n&&!n.nodeType&&n,R=h&&h.exports===z,he=R&&be.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),Ie=pe&&pe.isTypedArray;function He(x,B){for(var oe=-1,ge=x==null?0:x.length,ot=0,Te=[];++oe<ge;){var lt=x[oe];B(lt,oe,x)&&(Te[ot++]=lt)}return Te}function Ve(x,B){for(var oe=-1,ge=B.length,ot=x.length;++oe<ge;)x[ot+oe]=B[oe];return x}function $e(x,B){for(var oe=-1,ge=x==null?0:x.length;++oe<ge;)if(B(x[oe],oe,x))return!0;return!1}function dt(x,B){for(var oe=-1,ge=Array(x);++oe<x;)ge[oe]=B(oe);return ge}function pt(x){return function(B){return x(B)}}function Me(x,B){return x.has(B)}function xe(x,B){return x==null?void 0:x[B]}function Re(x){var B=-1,oe=Array(x.size);return x.forEach(function(ge,ot){oe[++B]=[ot,ge]}),oe}function Fe(x,B){return function(oe){return x(B(oe))}}function ze(x){var B=-1,oe=Array(x.size);return x.forEach(function(ge){oe[++B]=ge}),oe}var Pe=Array.prototype,Ue=Function.prototype,Se=Object.prototype,Ce=G["__core-js_shared__"],Be=Ue.toString,Oe=Se.hasOwnProperty,ke=function(){var x=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),We=Se.toString,et=RegExp("^"+Be.call(Oe).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?G.Buffer:void 0,Je=G.Symbol,Qt=G.Uint8Array,hr=Se.propertyIsEnumerable,Br=Pe.splice,er=Je?Je.toStringTag:void 0,ei=Object.getOwnPropertySymbols,pi=tt?tt.isBuffer:void 0,Ti=Fe(Object.keys,Object),mt=vr(G,"DataView"),gt=vr(G,"Map"),wt=vr(G,"Promise"),Et=vr(G,"Set"),vt=vr(G,"WeakMap"),_t=vr(Object,"create"),Rt=ri(mt),Ft=ri(gt),Dt=ri(wt),Ut=ri(Et),St=ri(vt),Ot=Je?Je.prototype:void 0,It=Ot?Ot.valueOf:void 0;function ht(x){var B=-1,oe=x==null?0:x.length;for(this.clear();++B<oe;){var ge=x[B];this.set(ge[0],ge[1])}}function jt(){this.__data__=_t?_t(null):{},this.size=0}function $t(x){var B=this.has(x)&&delete this.__data__[x];return this.size-=B?1:0,B}function za(x){var B=this.__data__;if(_t){var oe=B[x];return oe===s?void 0:oe}return Oe.call(B,x)?B[x]:void 0}function qa(x){var B=this.__data__;return _t?B[x]!==void 0:Oe.call(B,x)}function Ha(x,B){var oe=this.__data__;return this.size+=this.has(x)?0:1,oe[x]=_t&&B===void 0?s:B,this}ht.prototype.clear=jt,ht.prototype.delete=$t,ht.prototype.get=za,ht.prototype.has=qa,ht.prototype.set=Ha;function Ir(x){var B=-1,oe=x==null?0:x.length;for(this.clear();++B<oe;){var ge=x[B];this.set(ge[0],ge[1])}}function Ba(){this.__data__=[],this.size=0}function Ka(x){var B=this.__data__,oe=Ni(B,x);if(oe<0)return!1;var ge=B.length-1;return oe==ge?B.pop():Br.call(B,oe,1),--this.size,!0}function Va(x){var B=this.__data__,oe=Ni(B,x);return oe<0?void 0:B[oe][1]}function ka(x){return Ni(this.__data__,x)>-1}function Ga(x,B){var oe=this.__data__,ge=Ni(oe,x);return ge<0?(++this.size,oe.push([x,B])):oe[ge][1]=B,this}Ir.prototype.clear=Ba,Ir.prototype.delete=Ka,Ir.prototype.get=Va,Ir.prototype.has=ka,Ir.prototype.set=Ga;function ti(x){var B=-1,oe=x==null?0:x.length;for(this.clear();++B<oe;){var ge=x[B];this.set(ge[0],ge[1])}}function tn(){this.size=0,this.__data__={hash:new ht,map:new(gt||Ir),string:new ht}}function Wa(x){var B=gi(this,x).delete(x);return this.size-=B?1:0,B}function rn(x){return gi(this,x).get(x)}function Ya(x){return gi(this,x).has(x)}function Ja(x,B){var oe=gi(this,x),ge=oe.size;return oe.set(x,B),this.size+=oe.size==ge?0:1,this}ti.prototype.clear=tn,ti.prototype.delete=Wa,ti.prototype.get=rn,ti.prototype.has=Ya,ti.prototype.set=Ja;function nn(x){var B=-1,oe=x==null?0:x.length;for(this.__data__=new ti;++B<oe;)this.add(x[B])}function ds(x){return this.__data__.set(x,s),this}function ps(x){return this.__data__.has(x)}nn.prototype.add=nn.prototype.push=ds,nn.prototype.has=ps;function $r(x){var B=this.__data__=new Ir(x);this.size=B.size}function Xa(){this.__data__=new Ir,this.size=0}function Za(x){var B=this.__data__,oe=B.delete(x);return this.size=B.size,oe}function Qa(x){return this.__data__.get(x)}function eo(x){return this.__data__.has(x)}function gs(x,B){var oe=this.__data__;if(oe instanceof Ir){var ge=oe.__data__;if(!gt||ge.length<r-1)return ge.push([x,B]),this.size=++oe.size,this;oe=this.__data__=new ti(ge)}return oe.set(x,B),this.size=oe.size,this}$r.prototype.clear=Xa,$r.prototype.delete=Za,$r.prototype.get=Qa,$r.prototype.has=eo,$r.prototype.set=gs;function _s(x,B){var oe=on(x),ge=!oe&&Ps(x),ot=!oe&&!ge&&Tn(x),Te=!oe&&!ge&&!ot&&Ts(x),lt=oe||ge||ot||Te,Lt=lt?dt(x.length,String):[],Xe=Lt.length;for(var ct in x)(B||Oe.call(x,ct))&&!(lt&&(ct=="length"||ot&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ds(ct,Xe)))&&Lt.push(ct);return Lt}function Ni(x,B){for(var oe=x.length;oe--;)if(Os(x[oe][0],B))return oe;return-1}function Cn(x,B,oe){var ge=B(x);return on(x)?ge:Ve(ge,oe(x))}function Ri(x){return x==null?x===void 0?Z:ue:er&&er in Object(x)?ws(x):io(x)}function An(x){return Ui(x)&&Ri(x)==y}function Fi(x,B,oe,ge,ot){return x===B?!0:x==null||B==null||!Ui(x)&&!Ui(B)?x!==x&&B!==B:ys(x,B,oe,ge,Fi,ot)}function ys(x,B,oe,ge,ot,Te){var lt=on(x),Lt=on(B),Xe=lt?w:Kr(x),ct=Lt?w:Kr(B);Xe=Xe==y?j:Xe,ct=ct==y?j:ct;var Pt=Xe==j,lr=ct==j,Mt=Xe==ct;if(Mt&&Tn(x)){if(!Tn(B))return!1;lt=!0,Pt=!1}if(Mt&&!Pt)return Te||(Te=new $r),lt||Ts(x)?sn(x,B,oe,ge,ot,Te):ro(x,B,Xe,oe,ge,ot,Te);if(!(oe&o)){var ft=Pt&&Oe.call(x,"__wrapped__"),tr=lr&&Oe.call(B,"__wrapped__");if(ft||tr){var Lr=ft?x.value():x,xr=tr?B.value():B;return Te||(Te=new $r),ot(Lr,xr,oe,ge,Te)}}return Mt?(Te||(Te=new $r),ms(x,B,oe,ge,ot,Te)):!1}function to(x){if(!As(x)||Is(x))return!1;var B=cn(x)?et:ie;return B.test(ri(x))}function vs(x){return Ui(x)&&Cs(x.length)&&!!le[Ri(x)]}function bs(x){if(!xs(x))return Ti(x);var B=[];for(var oe in Object(x))Oe.call(x,oe)&&oe!="constructor"&&B.push(oe);return B}function sn(x,B,oe,ge,ot,Te){var lt=oe&o,Lt=x.length,Xe=B.length;if(Lt!=Xe&&!(lt&&Xe>Lt))return!1;var ct=Te.get(x);if(ct&&Te.get(B))return ct==B;var Pt=-1,lr=!0,Mt=oe&f?new nn:void 0;for(Te.set(x,B),Te.set(B,x);++Pt<Lt;){var ft=x[Pt],tr=B[Pt];if(ge)var Lr=lt?ge(tr,ft,Pt,B,x,Te):ge(ft,tr,Pt,x,B,Te);if(Lr!==void 0){if(Lr)continue;lr=!1;break}if(Mt){if(!$e(B,function(xr,Vr){if(!Me(Mt,Vr)&&(ft===xr||ot(ft,xr,oe,ge,Te)))return Mt.push(Vr)})){lr=!1;break}}else if(!(ft===tr||ot(ft,tr,oe,ge,Te))){lr=!1;break}}return Te.delete(x),Te.delete(B),lr}function ro(x,B,oe,ge,ot,Te,lt){switch(oe){case v:if(x.byteLength!=B.byteLength||x.byteOffset!=B.byteOffset)return!1;x=x.buffer,B=B.buffer;case d:return!(x.byteLength!=B.byteLength||!Te(new Qt(x),new Qt(B)));case A:case q:case ee:return Os(+x,+B);case W:return x.name==B.name&&x.message==B.message;case N:case c:return x==B+"";case X:var Lt=Re;case S:var Xe=ge&o;if(Lt||(Lt=ze),x.size!=B.size&&!Xe)return!1;var ct=lt.get(x);if(ct)return ct==B;ge|=f,lt.set(x,B);var Pt=sn(Lt(x),Lt(B),ge,ot,Te,lt);return lt.delete(x),Pt;case _:if(It)return It.call(x)==It.call(B)}return!1}function ms(x,B,oe,ge,ot,Te){var lt=oe&o,Lt=an(x),Xe=Lt.length,ct=an(B),Pt=ct.length;if(Xe!=Pt&&!lt)return!1;for(var lr=Xe;lr--;){var Mt=Lt[lr];if(!(lt?Mt in B:Oe.call(B,Mt)))return!1}var ft=Te.get(x);if(ft&&Te.get(B))return ft==B;var tr=!0;Te.set(x,B),Te.set(B,x);for(var Lr=lt;++lr<Xe;){Mt=Lt[lr];var xr=x[Mt],Vr=B[Mt];if(ge)var Nn=lt?ge(Vr,xr,Mt,B,x,Te):ge(xr,Vr,Mt,x,B,Te);if(!(Nn===void 0?xr===Vr||ot(xr,Vr,oe,ge,Te):Nn)){tr=!1;break}Lr||(Lr=Mt=="constructor")}if(tr&&!Lr){var ji=x.constructor,Kt=B.constructor;ji!=Kt&&"constructor"in x&&"constructor"in B&&!(typeof ji=="function"&&ji instanceof ji&&typeof Kt=="function"&&Kt instanceof Kt)&&(tr=!1)}return Te.delete(x),Te.delete(B),tr}function an(x){return Cn(x,ao,Es)}function gi(x,B){var oe=x.__data__;return Ss(B)?oe[typeof B=="string"?"string":"hash"]:oe.map}function vr(x,B){var oe=xe(x,B);return to(oe)?oe:void 0}function ws(x){var B=Oe.call(x,er),oe=x[er];try{x[er]=void 0;var ge=!0}catch{}var ot=We.call(x);return ge&&(B?x[er]=oe:delete x[er]),ot}var Es=ei?function(x){return x==null?[]:(x=Object(x),He(ei(x),function(B){return hr.call(x,B)}))}:at,Kr=Ri;(mt&&Kr(new mt(new ArrayBuffer(1)))!=v||gt&&Kr(new gt)!=X||wt&&Kr(wt.resolve())!=M||Et&&Kr(new Et)!=S||vt&&Kr(new vt)!=l)&&(Kr=function(x){var B=Ri(x),oe=B==j?x.constructor:void 0,ge=oe?ri(oe):"";if(ge)switch(ge){case Rt:return v;case Ft:return X;case Dt:return M;case Ut:return S;case St:return l}return B});function Ds(x,B){return B=B??m,!!B&&(typeof x=="number"||ye.test(x))&&x>-1&&x%1==0&&x<B}function Ss(x){var B=typeof x;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?x!=="__proto__":x===null}function Is(x){return!!ke&&ke in x}function xs(x){var B=x&&x.constructor,oe=typeof B=="function"&&B.prototype||Se;return x===oe}function io(x){return We.call(x)}function ri(x){if(x!=null){try{return Be.call(x)}catch{}try{return x+""}catch{}}return""}function Os(x,B){return x===B||x!==x&&B!==B}var Ps=An(function(){return arguments}())?An:function(x){return Ui(x)&&Oe.call(x,"callee")&&!hr.call(x,"callee")},on=Array.isArray;function no(x){return x!=null&&Cs(x.length)&&!cn(x)}var Tn=pi||st;function so(x,B){return Fi(x,B)}function cn(x){if(!As(x))return!1;var B=Ri(x);return B==H||B==$||B==O||B==P}function Cs(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=m}function As(x){var B=typeof x;return x!=null&&(B=="object"||B=="function")}function Ui(x){return x!=null&&typeof x=="object"}var Ts=Ie?pt(Ie):vs;function ao(x){return no(x)?_s(x):bs(x)}function at(){return[]}function st(){return!1}n.exports=so})(Pa,Pa.exports);var FE=Pa.exports;const UE=Pv(FE);function jE(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var f=n.charAt(o),m=f.charCodeAt(0);if(r[m]!==255)throw new TypeError(f+" is ambiguous");r[m]=o}var y=n.length,w=n.charAt(0),O=Math.log(y)/Math.log(256),A=Math.log(256)/Math.log(y);function q($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var X=0,ee=0,ue=0,j=$.length;ue!==j&&$[ue]===0;)ue++,X++;for(var M=(j-ue)*A+1>>>0,P=new Uint8Array(M);ue!==j;){for(var N=$[ue],S=0,c=M-1;(N!==0||S<ee)&&c!==-1;c--,S++)N+=256*P[c]>>>0,P[c]=N%y>>>0,N=N/y>>>0;if(N!==0)throw new Error("Non-zero carry");ee=S,ue++}for(var _=M-ee;_!==M&&P[_]===0;)_++;for(var Z=w.repeat(X);_<M;++_)Z+=n.charAt(P[_]);return Z}function W($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var X=0;if($[X]!==" "){for(var ee=0,ue=0;$[X]===w;)ee++,X++;for(var j=($.length-X)*O+1>>>0,M=new Uint8Array(j);$[X];){var P=r[$.charCodeAt(X)];if(P===255)return;for(var N=0,S=j-1;(P!==0||N<ue)&&S!==-1;S--,N++)P+=y*M[S]>>>0,M[S]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ue=N,X++}if($[X]!==" "){for(var c=j-ue;c!==j&&M[c]===0;)c++;for(var _=new Uint8Array(ee+(j-c)),Z=ee;c!==j;)_[Z++]=M[c++];return _}}}function H($){var X=W($);if(X)return X;throw new Error(`Non-${t} character`)}return{encode:q,decodeUnsafe:W,decode:H}}var $E=jE,LE=$E;const Od=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},ME=n=>new TextEncoder().encode(n),zE=n=>new TextDecoder().decode(n);let qE=class{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}};class HE{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Pd(this,t)}}class BE{constructor(t){this.decoders=t}or(t){return Pd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Pd=(n,t)=>new BE({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class KE{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new qE(t,r,s),this.decoder=new HE(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const La=({name:n,prefix:t,encode:r,decode:s})=>new KE(n,t,r,s),fs=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:o}=LE(r,t);return La({prefix:n,name:t,encode:s,decode:f=>Od(o(f))})},VE=(n,t,r,s)=>{const o={};for(let A=0;A<t.length;++A)o[t[A]]=A;let f=n.length;for(;n[f-1]==="=";)--f;const m=new Uint8Array(f*r/8|0);let y=0,w=0,O=0;for(let A=0;A<f;++A){const q=o[n[A]];if(q===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|q,y+=r,y>=8&&(y-=8,m[O++]=255&w>>y)}if(y>=r||255&w<<8-y)throw new SyntaxError("Unexpected end of data");return m},kE=(n,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let f="",m=0,y=0;for(let w=0;w<n.length;++w)for(y=y<<8|n[w],m+=8;m>r;)m-=r,f+=t[o&y>>m];if(m&&(f+=t[o&y<<r-m]),s)for(;f.length*r&7;)f+="=";return f},Yt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>La({prefix:t,name:n,encode(o){return kE(o,s,r)},decode(o){return VE(o,s,r,n)}}),GE=La({prefix:"\0",name:"identity",encode:n=>zE(n),decode:n=>ME(n)});var WE=Object.freeze({__proto__:null,identity:GE});const YE=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var JE=Object.freeze({__proto__:null,base2:YE});const XE=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ZE=Object.freeze({__proto__:null,base8:XE});const QE=fs({prefix:"9",name:"base10",alphabet:"0123456789"});var e3=Object.freeze({__proto__:null,base10:QE});const t3=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),r3=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var i3=Object.freeze({__proto__:null,base16:t3,base16upper:r3});const n3=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s3=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),a3=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o3=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c3=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u3=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),h3=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),l3=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f3=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var d3=Object.freeze({__proto__:null,base32:n3,base32upper:s3,base32pad:a3,base32padupper:o3,base32hex:c3,base32hexupper:u3,base32hexpad:h3,base32hexpadupper:l3,base32z:f3});const p3=fs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),g3=fs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _3=Object.freeze({__proto__:null,base36:p3,base36upper:g3});const y3=fs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),v3=fs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var b3=Object.freeze({__proto__:null,base58btc:y3,base58flickr:v3});const m3=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),w3=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),E3=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),D3=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var S3=Object.freeze({__proto__:null,base64:m3,base64pad:w3,base64url:E3,base64urlpad:D3});const Cd=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),I3=Cd.reduce((n,t,r)=>(n[r]=t,n),[]),x3=Cd.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function O3(n){return n.reduce((t,r)=>(t+=I3[r],t),"")}function P3(n){const t=[];for(const r of n){const s=x3[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const C3=La({prefix:"🚀",name:"base256emoji",encode:O3,decode:P3});var A3=Object.freeze({__proto__:null,base256emoji:C3}),T3=Ad,af=128,N3=127,R3=~N3,F3=Math.pow(2,31);function Ad(n,t,r){t=t||[],r=r||0;for(var s=r;n>=F3;)t[r++]=n&255|af,n/=128;for(;n&R3;)t[r++]=n&255|af,n>>>=7;return t[r]=n|0,Ad.bytes=r-s+1,t}var U3=Hc,j3=128,of=127;function Hc(n,s){var r=0,s=s||0,o=0,f=s,m,y=n.length;do{if(f>=y)throw Hc.bytes=0,new RangeError("Could not decode varint");m=n[f++],r+=o<28?(m&of)<<o:(m&of)*Math.pow(2,o),o+=7}while(m>=j3);return Hc.bytes=f-s,r}var $3=Math.pow(2,7),L3=Math.pow(2,14),M3=Math.pow(2,21),z3=Math.pow(2,28),q3=Math.pow(2,35),H3=Math.pow(2,42),B3=Math.pow(2,49),K3=Math.pow(2,56),V3=Math.pow(2,63),k3=function(n){return n<$3?1:n<L3?2:n<M3?3:n<z3?4:n<q3?5:n<H3?6:n<B3?7:n<K3?8:n<V3?9:10},G3={encode:T3,decode:U3,encodingLength:k3},Td=G3;const cf=(n,t,r=0)=>(Td.encode(n,t,r),t),uf=n=>Td.encodingLength(n),Bc=(n,t)=>{const r=t.byteLength,s=uf(n),o=s+uf(r),f=new Uint8Array(o+r);return cf(n,f,0),cf(r,f,s),f.set(t,o),new W3(n,r,t,f)};class W3{constructor(t,r,s,o){this.code=t,this.size=r,this.digest=s,this.bytes=o}}const Nd=({name:n,code:t,encode:r})=>new Y3(n,t,r);class Y3{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Bc(this.code,r):r.then(s=>Bc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Rd=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),J3=Nd({name:"sha2-256",code:18,encode:Rd("SHA-256")}),X3=Nd({name:"sha2-512",code:19,encode:Rd("SHA-512")});var Z3=Object.freeze({__proto__:null,sha256:J3,sha512:X3});const Fd=0,Q3="identity",Ud=Od,e6=n=>Bc(Fd,Ud(n)),t6={code:Fd,name:Q3,encode:Ud,digest:e6};var r6=Object.freeze({__proto__:null,identity:t6});new TextEncoder,new TextDecoder;const hf={...WE,...JE,...ZE,...e3,...i3,...d3,..._3,...b3,...S3,...A3};({...Z3,...r6});function jd(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function i6(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?jd(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function $d(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const lf=$d("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Ec=$d("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=i6(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),n6={utf8:lf,"utf-8":lf,hex:hf.base16,latin1:Ec,ascii:Ec,binary:Ec,...hf};function s6(n,t="utf8"){const r=n6[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jd(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const Ld="wc",a6=2,du="core",Oi=`${Ld}@2:${du}:`,o6={name:du,logger:"error"},c6={database:":memory:"},u6="crypto",ff="client_ed25519_seed",h6=me.ONE_DAY,l6="keychain",f6="0.3",d6="messages",p6="0.3",g6=me.SIX_HOURS,_6="publisher",Md="irn",y6="error",zd="wss://relay.walletconnect.com",v6="relayer",qt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},b6="_subscription",ts={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},m6=me.ONE_SECOND/2,w6="2.7.8",E6=1e4,D6="0.3",Xr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},S6="subscription",I6="0.3",x6=me.FIVE_SECONDS*1e3,O6="pairing",P6="0.3",rs={wc_pairingDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:me.ONE_DAY,prompt:!1,tag:0},res:{ttl:me.ONE_DAY,prompt:!1,tag:0}}},Jr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},C6="history",A6="0.3",T6="expirer",Ur={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},N6="0.3",Dc="verify-api",df="https://verify.walletconnect.com";class R6{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=l6,this.version=f6,this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:f}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(f)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,cd(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ud(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class F6{constructor(t,r,s){this.core=t,this.logger=r,this.name=u6,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),f=nf(o);return xd(f.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=Um();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const f=await this.getClientSeed(),m=nf(f),y=zc();return await CE(y,o,h6,m)},this.generateSharedKey=(o,f,m)=>{this.isInitialized();const y=this.getPrivateKey(o),w=jm(y,f);return this.setSymKey(w,m)},this.setSymKey=async(o,f)=>{this.isInitialized();const m=f||$m(o);return await this.keychain.set(m,o),m},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,f,m)=>{this.isInitialized();const y=sd(m),w=Jc(f);if(Nl(y)){const W=y.senderPublicKey,H=y.receiverPublicKey;o=await this.generateSharedKey(W,H)}const O=this.getSymKey(o),{type:A,senderPublicKey:q}=y;return Mm({type:A,symKey:O,message:w,senderPublicKey:q})},this.decode=async(o,f,m)=>{this.isInitialized();const y=Hm(f,m);if(Nl(y)){const A=y.receiverPublicKey,q=y.senderPublicKey;o=await this.generateSharedKey(A,q)}const w=this.getSymKey(o),O=zm({symKey:w,encoded:f});return $f(O)},this.getPayloadType=o=>{const f=Ia(o);return us(f.type)},this.getPayloadSenderPublicKey=o=>{const f=Ia(o);return f.senderPublicKey?ur(f.senderPublicKey,cr):void 0},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new R6(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(ff)}catch{t=zc(),await this.keychain.set(ff,t)}return s6(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class U6 extends oE{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=d6,this.version=p6,this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const f=In(o);let m=this.messages.get(s);return typeof m>"u"&&(m={}),typeof m[f]<"u"||(m[f]=o,this.messages.set(s,m),await this.persist()),f},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const f=this.get(s),m=In(o);return typeof f[m]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(t,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,cd(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ud(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}let j6=class extends cE{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Qr.EventEmitter,this.name=_6,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,o,f)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:f}});try{const m=(f==null?void 0:f.ttl)||g6,y=qc(f),w=(f==null?void 0:f.prompt)||!1,O=(f==null?void 0:f.tag)||0,A=(f==null?void 0:f.id)||zv().toString(),q={topic:s,message:o,opts:{ttl:m,relay:y,prompt:w,tag:O,id:A}};this.queue.set(A,q);try{await await xa(this.rpcPublish(s,o,m,y,w,O,A),this.publishTimeout),this.relayer.events.emit(qt.publish,q)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(qt.connection_stalled);return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:f}})}catch(m){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(m),m}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(t,r,s,o,f,m,y){var w,O,A,q;const W={method:ma(o.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:f,tag:m},id:y};return ar((w=W.params)==null?void 0:w.prompt)&&((O=W.params)==null||delete O.prompt),ar((A=W.params)==null?void 0:A.tag)&&((q=W.params)==null||delete q.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:W}),this.relayer.request(W)}onPublish(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:o}=t;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(ls.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()}),this.relayer.on(qt.message_ack,t=>{this.onPublish(t.id.toString())})}},$6=class{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const o=s.filter(f=>f!==r);if(!o.length){this.map.delete(t);return}this.map.set(t,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var L6=Object.defineProperty,M6=Object.defineProperties,z6=Object.getOwnPropertyDescriptors,pf=Object.getOwnPropertySymbols,q6=Object.prototype.hasOwnProperty,H6=Object.prototype.propertyIsEnumerable,gf=(n,t,r)=>t in n?L6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,is=(n,t)=>{for(var r in t||(t={}))q6.call(t,r)&&gf(n,r,t[r]);if(pf)for(var r of pf(t))H6.call(t,r)&&gf(n,r,t[r]);return n},Sc=(n,t)=>M6(n,z6(t));class B6 extends lE{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new $6,this.events=new Qr.EventEmitter,this.name=S6,this.version=I6,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Oi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const f=qc(o),m={topic:s,relay:f};this.pending.set(s,m);const y=await this.rpcSubscribe(s,f);return this.onSubscribe(y,m),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),y}catch(f){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(f),f}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,f)=>{const m=new me.Watch;m.start(this.pendingSubscriptionWatchLabel);const y=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(y),m.stop(this.pendingSubscriptionWatchLabel),o(!0)),m.elapsed(this.pendingSubscriptionWatchLabel)>=x6&&(clearInterval(y),m.stop(this.pendingSubscriptionWatchLabel),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async o=>await this.unsubscribeById(t,o,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const o=qc(s);await this.rpcUnsubscribe(t,r,o);const f=Tt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,f),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(t,r){const s={method:ma(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await xa(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(qt.connection_stalled)}return In(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:ma(r.protocol).batchSubscribe,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await xa(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(qt.connection_stalled)}}rpcUnsubscribe(t,r,s){const o={method:ma(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(t,r){this.setSubscription(t,Sc(is({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,is({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,is({},r)),this.topicMap.set(r.topic,t),this.events.emit(Xr.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(Xr.deleted,Sc(is({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Xr.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Xr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);di(r)&&this.onBatchSubscribe(r.map((s,o)=>Sc(is({},t[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(ls.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(qt.connect,async()=>{await this.onConnect()}),this.relayer.on(qt.disconnect,()=>{this.onDisconnect()}),this.events.on(Xr.created,async t=>{const r=Xr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(Xr.deleted,async t=>{const r=Xr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var K6=Object.defineProperty,_f=Object.getOwnPropertySymbols,V6=Object.prototype.hasOwnProperty,k6=Object.prototype.propertyIsEnumerable,yf=(n,t,r)=>t in n?K6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,G6=(n,t)=>{for(var r in t||(t={}))V6.call(t,r)&&yf(n,r,t[r]);if(_f)for(var r of _f(t))k6.call(t,r)&&yf(n,r,t[r]);return n};class W6 extends uE{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Qr.EventEmitter,this.name=v6,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Qe.generateChildLogger(t.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:t.logger||y6})),this.messages=new U6(this.logger,t.core),this.subscriber=new B6(this,this.logger),this.publisher=new j6(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||zd,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},E6)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(f=>{this.subscriber.once(Xr.created,m=>{m.topic===t&&f()})}),new Promise(async f=>{o=await this.subscriber.subscribe(t,r),f()})]),o)}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(qt.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Xr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await xa(this.provider.connect(),5e3,"socket stalled").catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(qt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(qt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(qt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(ts.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Pi(new RE(Qm({sdkVersion:w6,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Zc(t)){if(!t.method.endsWith(b6))return;const r=t.params,{topic:s,message:o,publishedAt:f}=r.data,m={topic:s,message:o,publishedAt:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(G6({type:"event",event:r.id},m)),this.events.emit(r.id,m),await this.acknowledgePayload(t),await this.onMessageEvent(m)}else Qc(t)&&this.events.emit(qt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(qt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=eu(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(ts.payload,t=>this.onProviderPayload(t)),this.provider.on(ts.connect,()=>{this.events.emit(qt.connect)}),this.provider.on(ts.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ts.error,t=>{this.logger.error(t),this.events.emit(qt.error,t)})}registerEventListeners(){this.events.on(qt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(qt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},me.toMiliseconds(m6))}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Y6=Object.defineProperty,vf=Object.getOwnPropertySymbols,J6=Object.prototype.hasOwnProperty,X6=Object.prototype.propertyIsEnumerable,bf=(n,t,r)=>t in n?Y6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,mf=(n,t)=>{for(var r in t||(t={}))J6.call(t,r)&&bf(n,r,t[r]);if(vf)for(var r of vf(t))X6.call(t,r)&&bf(n,r,t[r]);return n};let Ma=class extends hE{constructor(t,r,s,o=Oi,f=void 0){super(t,r,s,o),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=D6,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(m=>{this.getKey&&m!==null&&!ar(m)?this.map.set(this.getKey(m),m):ww(m)?this.map.set(m.id,m):Ew(m)&&this.map.set(m.topic,m)}),this.cached=[],this.initialized=!0)},this.set=async(m,y)=>{this.isInitialized(),this.map.has(m)?await this.update(m,y):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:m,value:y}),this.map.set(m,y),await this.persist())},this.get=m=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:m}),this.getData(m)),this.getAll=m=>(this.isInitialized(),m?this.values.filter(y=>Object.keys(m).every(w=>UE(y[w],m[w]))):this.values),this.update=async(m,y)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:m,update:y});const w=mf(mf({},this.getData(m)),y);this.map.set(m,w),await this.persist()},this.delete=async(m,y)=>{this.isInitialized(),this.map.has(m)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:m,reason:y}),this.map.delete(m),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=f}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}};class Z6{constructor(t,r){this.core=t,this.logger=r,this.name=O6,this.version=P6,this.events=new Yc,this.initialized=!1,this.storagePrefix=Oi,this.ignoredPayloadTypes=[Zi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=zc(),o=await this.core.crypto.setSymKey(s),f=Zr(me.FIVE_MINUTES),m={protocol:Md},y={topic:o,expiry:f,relay:m,active:!1},w=lw({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:m});return await this.pairings.set(o,y),await this.core.relayer.subscribe(o),this.core.expirer.set(o,f),{topic:o,uri:w}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:f,relay:m}=cw(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const y=Zr(me.FIVE_MINUTES),w={topic:o,relay:m,expiry:y,active:!1};return await this.pairings.set(o,w),await this.core.crypto.setSymKey(f,o),await this.core.relayer.subscribe(o,{relay:m}),this.core.expirer.set(o,y),s.activatePairing&&await this.activate({topic:o}),w},this.activate=async({topic:s})=>{this.isInitialized();const o=Zr(me.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const f=await this.sendRequest(o,"wc_pairingPing",{}),{done:m,resolve:y,reject:w}=Dn();this.events.once(zt("pairing_ping",f),({error:O})=>{O?w(O):y()}),await m()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Tt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,f)=>{const m=tu(o,f),y=await this.core.crypto.encode(s,m),w=rs[o].req;return this.core.history.set(s,m),this.core.relayer.publish(s,y,w),m.id},this.sendResult=async(s,o,f)=>{const m=eu(s,f),y=await this.core.crypto.encode(o,m),w=await this.core.history.get(o,s),O=rs[w.request.method].res;await this.core.relayer.publish(o,y,O),await this.core.history.resolve(m)},this.sendError=async(s,o,f)=>{const m=Xc(s,f),y=await this.core.crypto.encode(o,m),w=await this.core.history.get(o,s),O=rs[w.request.method]?rs[w.request.method].res:rs.unregistered_method.res;await this.core.relayer.publish(o,y,O),await this.core.history.resolve(m)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Tt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>xi(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:f}=s,m=f.method;if(this.pairings.keys.includes(o))switch(m){case"wc_pairingPing":return this.onPairingPingRequest(o,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,f);default:return this.onUnknownRpcMethodRequest(o,f)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:f}=s,m=(await this.core.history.get(o,f.id)).request.method;if(this.pairings.keys.includes(o))switch(m){case"wc_pairingPing":return this.onPairingPingResponse(o,f);default:return this.onUnknownRpcMethodResponse(m)}},this.onPairingPingRequest=async(s,o)=>{const{id:f}=o;try{this.isValidPing({topic:s}),await this.sendResult(f,s,!0),this.events.emit("pairing_ping",{id:f,topic:s})}catch(m){await this.sendError(f,s,m),this.logger.error(m)}},this.onPairingPingResponse=(s,o)=>{const{id:f}=o;setTimeout(()=>{Ii(o)?this.events.emit(zt("pairing_ping",f),{}):fi(o)&&this.events.emit(zt("pairing_ping",f),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:f}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:f,topic:s})}catch(m){await this.sendError(f,s,m),this.logger.error(m)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:f,method:m}=o;try{if(this.registeredMethods.includes(m))return;const y=Tt("WC_METHOD_UNSUPPORTED",m);await this.sendError(f,s,y),this.logger.error(y)}catch(y){await this.sendError(f,s,y),this.logger.error(y)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Tt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!_r(s)){const{message:o}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!mw(s.uri)){const{message:o}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!_r(s)){const{message:f}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(f)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:f}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(f)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!kt(s,!1)){const{message:o}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(xi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new Ma(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(qt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);Zc(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Qc(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(Ur.expired,async t=>{const{topic:r}=ld(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class Q6 extends aE{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Qr.EventEmitter,this.name=C6,this.version=A6,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:f}),this.records.has(o.id))return;const m={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:f};this.records.set(m.id,m),this.events.emit(Jr.created,m)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=fi(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(Jr.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(f=>{if(f.topic===s){if(typeof o<"u"&&f.id!==o)return;this.records.delete(f.id),this.events.emit(Jr.deleted,f)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:tu(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Jr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Jr.created,t=>{const r=Jr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Jr.updated,t=>{const r=Jr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Jr.deleted,t=>{const r=Jr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class e2 extends fE{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Qr.EventEmitter,this.name=T6,this.version=N6,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const f=this.formatTarget(s),m={target:f,expiry:o};this.expirations.set(f,m),this.checkExpiry(f,m),this.events.emit(Ur.created,{target:f,expiration:m})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),f=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Ur.deleted,{target:o,expiration:f})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return ew(t);if(typeof t=="number")return tw(t);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ur.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;me.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Ur.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(ls.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ur.created,t=>{const r=Ur.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Ur.expired,t=>{const r=Ur.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Ur.deleted,t=>{const r=Ur.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class t2 extends dE{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Dc,this.initialized=!1,this.init=async s=>{ad()||!uu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||df,await this.createIframe())},this.register=async s=>{var o;this.initialized||await this.init(),this.iframe&&((o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const f=this.startAbortTimer(me.FIVE_SECONDS),m=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(f),m.status===200?(o=await m.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Dc))return s();const f=document.createElement("iframe");f.setAttribute("id",Dc),f.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),f.style.display="none",f.addEventListener("load",()=>{this.initialized=!0,s()}),f.addEventListener("error",m=>{o(m)}),document.body.append(f),this.iframe=f}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),me.toMiliseconds(me.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=df,this.abortController=new AbortController,this.isDevEnv=cu()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),me.toMiliseconds(t))}}var r2=Object.defineProperty,wf=Object.getOwnPropertySymbols,i2=Object.prototype.hasOwnProperty,n2=Object.prototype.propertyIsEnumerable,Ef=(n,t,r)=>t in n?r2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Df=(n,t)=>{for(var r in t||(t={}))i2.call(t,r)&&Ef(n,r,t[r]);if(wf)for(var r of wf(t))n2.call(t,r)&&Ef(n,r,t[r]);return n};let s2=class qd extends sE{constructor(t){super(t),this.protocol=Ld,this.version=a6,this.name=du,this.events=new Qr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||zd;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||o6.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new ls.HeartBeat,this.crypto=new F6(this,this.logger,t==null?void 0:t.keychain),this.history=new Q6(this,this.logger),this.expirer=new e2(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new Yw(Df(Df({},c6),t==null?void 0:t.storageOptions)),this.relayer=new W6({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Z6(this,this.logger),this.verify=new t2(this.projectId||"",this.logger)}static async init(t){const r=new qd(t);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const a2=s2,Hd="wc",Bd=2,Kd="client",pu=`${Hd}@${Bd}:${Kd}:`,Ic={name:Kd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},o2="proposal",Vd="Proposal expired",c2="session",ya=me.SEVEN_DAYS,u2="engine",ns={wc_sessionPropose:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1104},res:{ttl:me.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1106},res:{ttl:me.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1112},res:{ttl:me.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1115}}},xc={min:me.FIVE_MINUTES,max:me.SEVEN_DAYS},h2="request",l2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var f2=Object.defineProperty,d2=Object.defineProperties,p2=Object.getOwnPropertyDescriptors,Sf=Object.getOwnPropertySymbols,g2=Object.prototype.hasOwnProperty,_2=Object.prototype.propertyIsEnumerable,If=(n,t,r)=>t in n?f2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Fr=(n,t)=>{for(var r in t||(t={}))g2.call(t,r)&&If(n,r,t[r]);if(Sf)for(var r of Sf(t))_2.call(t,r)&&If(n,r,t[r]);return n},Oc=(n,t)=>d2(n,p2(t));class y2 extends gE{constructor(t){super(t),this.name=u2,this.events=new Yc,this.initialized=!1,this.ignoredPayloadTypes=[Zi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ns)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Oc(Fr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:f,optionalNamespaces:m,sessionProperties:y,relays:w}=s;let O=o,A,q=!1;if(O&&(q=this.client.core.pairing.pairings.get(O).active),!O||!q){const{topic:M,uri:P}=await this.client.core.pairing.create();O=M,A=P}const W=await this.client.core.crypto.generateKeyPair(),H=Fr({requiredNamespaces:f,optionalNamespaces:m,relays:w??[{protocol:Md}],proposer:{publicKey:W,metadata:this.client.metadata}},y&&{sessionProperties:y}),{reject:$,resolve:X,done:ee}=Dn(me.FIVE_MINUTES,Vd);if(this.events.once(zt("session_connect"),async({error:M,session:P})=>{if(M)$(M);else if(P){P.self.publicKey=W;const N=Oc(Fr({},P),{requiredNamespaces:P.requiredNamespaces,optionalNamespaces:P.optionalNamespaces});await this.client.session.set(P.topic,N),await this.setExpiry(P.topic,P.expiry),O&&await this.client.core.pairing.updateMetadata({topic:O,metadata:P.peer.metadata}),X(N)}}),!O){const{message:M}=de("NO_MATCHING_KEY",`connect() pairing topic: ${O}`);throw new Error(M)}const ue=await this.sendRequest(O,"wc_sessionPropose",H),j=Zr(me.FIVE_MINUTES);return await this.setProposal(ue,Fr({id:ue,expiry:j},H)),{uri:A,approval:ee}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:f,sessionProperties:m}=r,y=this.client.proposal.get(s);let{pairingTopic:w,proposer:O,requiredNamespaces:A,optionalNamespaces:q}=y;w=w||"",xn(A)||(A=gw(f,"approve()"));const W=await this.client.core.crypto.generateKeyPair(),H=O.publicKey,$=await this.client.core.crypto.generateSharedKey(W,H);w&&s&&(await this.client.core.pairing.updateMetadata({topic:w,metadata:O.metadata}),await this.sendResult(s,w,{relay:{protocol:o??"irn"},responderPublicKey:W}),await this.client.proposal.delete(s,Tt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:w}));const X=Fr({relay:{protocol:o??"irn"},namespaces:f,requiredNamespaces:A,optionalNamespaces:q,pairingTopic:w,controller:{publicKey:W,metadata:this.client.metadata},expiry:Zr(ya)},m&&{sessionProperties:m});await this.client.core.relayer.subscribe($),await this.sendRequest($,"wc_sessionSettle",X);const ee=Oc(Fr({},X),{topic:$,pairingTopic:w,acknowledged:!1,self:X.controller,peer:{publicKey:O.publicKey,metadata:O.metadata},controller:W});return await this.client.session.set($,ee),await this.setExpiry($,Zr(ya)),{topic:$,acknowledged:()=>new Promise(ue=>setTimeout(()=>ue(this.client.session.get($)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:f}=this.client.proposal.get(s);f&&(await this.sendError(s,f,o),await this.client.proposal.delete(s,Tt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,f=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:m,resolve:y,reject:w}=Dn();return this.events.once(zt("session_update",f),({error:O})=>{O?w(O):y()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:m}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:f,resolve:m,reject:y}=Dn();return this.events.once(zt("session_extend",o),({error:w})=>{w?y(w):m()}),await this.setExpiry(s,Zr(ya)),{acknowledged:f}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:f,expiry:m}=r,y=await this.sendRequest(f,"wc_sessionRequest",{request:o,chainId:s},m),{done:w,resolve:O,reject:A}=Dn(m);return this.events.once(zt("session_request",y),({error:q,result:W})=>{q?A(q):O(W)}),this.client.events.emit("session_request_sent",{topic:f,request:o,chainId:s,id:y}),await w()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:f}=o;Ii(o)?await this.sendResult(f,s,o.result):fi(o)&&await this.sendError(f,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:f,resolve:m,reject:y}=Dn();this.events.once(zt("session_ping",o),({error:w})=>{w?y(w):m()}),await f()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:f}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:f})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",Tt("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>vw(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(f=>{var m,y;return((m=f.peerMetadata)==null?void 0:m.url)&&((y=f.peerMetadata)==null?void 0:y.url)===r.peer.metadata.url&&f.topic&&f.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(f=>this.client.core.pairing.disconnect({topic:f.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,Tt("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.deleteSymKey(r),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Tt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=ns.wc_sessionRequest.req.ttl,{id:o,topic:f,params:m}=r;await this.client.pendingRequest.set(o,{id:o,topic:f,params:m}),s&&this.client.core.expirer.set(o,Zr(s))},this.sendRequest=async(r,s,o,f)=>{const m=tu(s,o);if(uu()&&l2.includes(s)){const O=In(JSON.stringify(m));await this.client.core.verify.register({attestationId:O})}const y=await this.client.core.crypto.encode(r,m),w=ns[s].req;return f&&(w.ttl=f),this.client.core.history.set(r,m),this.client.core.relayer.publish(r,y,w),m.id},this.sendResult=async(r,s,o)=>{const f=eu(r,o),m=await this.client.core.crypto.encode(s,f),y=await this.client.core.history.get(s,r),w=ns[y.request.method].res;this.client.core.relayer.publish(s,m,w),await this.client.core.history.resolve(f)},this.sendError=async(r,s,o)=>{const f=Xc(r,o),m=await this.client.core.crypto.encode(s,f),y=await this.client.core.history.get(s,r),w=ns[y.request.method].res;this.client.core.relayer.publish(s,m,w),await this.client.core.history.resolve(f)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{xi(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{xi(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,f=o.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,f=(await this.client.core.history.get(s,o.id)).request.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${f}`)}},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:f}=s;try{this.isValidConnect(Fr({},s.params));const m=Zr(me.FIVE_MINUTES),y=Fr({id:f,pairingTopic:r,expiry:m},o);await this.setProposal(f,y);const w=In(JSON.stringify(s)),O=await this.getVerifyContext(w,y.proposer.metadata);this.client.events.emit("session_proposal",{id:f,params:y,verifyContext:O})}catch(m){await this.sendError(f,r,m),this.client.logger.error(m)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(Ii(s)){const{result:f}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:f});const m=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:m});const y=m.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:y});const w=f.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:w});const O=await this.client.core.crypto.generateSharedKey(y,w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:O});const A=await this.client.core.relayer.subscribe(O);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:A}),await this.client.core.pairing.activate({topic:r})}else fi(s)&&(await this.client.proposal.delete(o,Tt("USER_DISCONNECTED")),this.events.emit(zt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:f}=s;try{this.isValidSessionSettleRequest(f);const{relay:m,controller:y,expiry:w,namespaces:O,requiredNamespaces:A,optionalNamespaces:q,sessionProperties:W,pairingTopic:H}=s.params,$=Fr({topic:r,relay:m,expiry:w,namespaces:O,acknowledged:!0,pairingTopic:H,requiredNamespaces:A,optionalNamespaces:q,controller:y.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:y.publicKey,metadata:y.metadata}},W&&{sessionProperties:W});await this.sendResult(s.id,r,!0),this.events.emit(zt("session_connect"),{session:$}),this.cleanupDuplicatePairings($)}catch(m){await this.sendError(o,r,m),this.client.logger.error(m)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;Ii(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(zt("session_approve",o),{})):fi(s)&&(await this.client.session.delete(r,Tt("USER_DISCONNECTED")),this.events.emit(zt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:f}=s;try{this.isValidUpdate(Fr({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(f,r,!0),this.client.events.emit("session_update",{id:f,topic:r,params:o})}catch(m){await this.sendError(f,r,m),this.client.logger.error(m)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(zt("session_update",o),{}):fi(s)&&this.events.emit(zt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Zr(ya)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(f){await this.sendError(o,r,f),this.client.logger.error(f)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(zt("session_extend",o),{}):fi(s)&&this.events.emit(zt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(f){await this.sendError(o,r,f),this.client.logger.error(f)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{Ii(s)?this.events.emit(zt("session_ping",o),{}):fi(s)&&this.events.emit(zt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(f=>{this.client.core.relayer.once(qt.publish,async()=>{f(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(f){await this.sendError(o,r,f),this.client.logger.error(f)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:f}=s;try{this.isValidRequest(Fr({topic:r},f)),await this.setPendingSessionRequest({id:o,topic:r,params:f});const m=In(JSON.stringify(s)),y=this.client.session.get(r),w=await this.getVerifyContext(m,y.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:f,verifyContext:w})}catch(m){await this.sendError(o,r,m),this.client.logger.error(m)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(zt("session_request",o),{result:s.result}):fi(s)&&this.events.emit(zt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:f}=s;try{this.isValidEmit(Fr({topic:r},f)),this.client.events.emit("session_event",{id:o,topic:r,params:f})}catch(m){await this.sendError(o,r,m),this.client.logger.error(m)}},this.isValidConnect=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(w)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:f,sessionProperties:m,relays:y}=r;if(ar(s)||await this.isValidPairingTopic(s),!Aw(y,!0)){const{message:w}=de("MISSING_OR_INVALID",`connect() relays: ${y}`);throw new Error(w)}!ar(o)&&xn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(f)&&xn(f)!==0&&this.validateNamespaces(f,"optionalNamespaces"),ar(m)||this.validateSessionProps(m,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=Cw(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!_r(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:f,sessionProperties:m}=r;await this.isValidProposalId(s);const y=this.client.proposal.get(s),w=Ea(o,"approve()");if(w)throw new Error(w.message);const O=zl(y.requiredNamespaces,o,"approve()");if(O)throw new Error(O.message);if(!kt(f,!0)){const{message:A}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${f}`);throw new Error(A)}ar(m)||this.validateSessionProps(m,"sessionProperties")},this.isValidReject=async r=>{if(!_r(r)){const{message:f}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(f)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!Nw(o)){const{message:f}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidSessionSettleRequest=r=>{if(!_r(r)){const{message:O}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(O)}const{relay:s,controller:o,namespaces:f,expiry:m}=r;if(!pd(s)){const{message:O}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(O)}const y=Dw(o,"onSessionSettleRequest()");if(y)throw new Error(y.message);const w=Ea(f,"onSessionSettleRequest()");if(w)throw new Error(w.message);if(xi(m)){const{message:O}=de("EXPIRED","onSessionSettleRequest()");throw new Error(O)}},this.isValidUpdate=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(w)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const f=this.client.session.get(s),m=Ea(o,"update()");if(m)throw new Error(m.message);const y=zl(f.requiredNamespaces,o,"update()");if(y)throw new Error(y.message)},this.isValidExtend=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(w)}const{topic:s,request:o,chainId:f,expiry:m}=r;await this.isValidSessionTopic(s);const{namespaces:y}=this.client.session.get(s);if(!Ml(y,f)){const{message:w}=de("MISSING_OR_INVALID",`request() chainId: ${f}`);throw new Error(w)}if(!Rw(o)){const{message:w}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(w)}if(!jw(y,f,o.method)){const{message:w}=de("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(w)}if(m&&!zw(m,xc)){const{message:w}=de("MISSING_OR_INVALID",`request() expiry: ${m}. Expiry must be a number (in seconds) between ${xc.min} and ${xc.max}`);throw new Error(w)}},this.isValidRespond=async r=>{if(!_r(r)){const{message:f}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(f)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!Fw(o)){const{message:f}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidPing=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!_r(r)){const{message:y}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(y)}const{topic:s,event:o,chainId:f}=r;await this.isValidSessionTopic(s);const{namespaces:m}=this.client.session.get(s);if(!Ml(m,f)){const{message:y}=de("MISSING_OR_INVALID",`emit() chainId: ${f}`);throw new Error(y)}if(!Uw(o)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}if(!$w(m,f,o.name)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}},this.isValidDisconnect=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const f=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});f&&(o.verified.origin=f,o.verified.validation=f===s.url?"VALID":"INVALID")}catch(f){this.client.logger.error(f)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!kt(o,!1)){const{message:f}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(f)}})}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(qt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);Zc(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Qc(o)&&(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.client.core.expirer.on(Ur.expired,async t=>{const{topic:r,id:s}=ld(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(t){if(!kt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!kt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=de("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(kt(t,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!Tw(t)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=de("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class v2 extends Ma{constructor(t,r){super(t,r,o2,pu),this.core=t,this.logger=r}}class b2 extends Ma{constructor(t,r){super(t,r,c2,pu),this.core=t,this.logger=r}}class m2 extends Ma{constructor(t,r){super(t,r,h2,pu,s=>s.id),this.core=t,this.logger=r}}let w2=class kd extends pE{constructor(t){super(t),this.protocol=Hd,this.version=Bd,this.name=Ic.name,this.events=new Qr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||Ic.name,this.metadata=(t==null?void 0:t.metadata)||Ym();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Ic.logger}));this.core=(t==null?void 0:t.core)||new a2(t),this.logger=Qe.generateChildLogger(r,this.name),this.session=new b2(this.core,this.logger),this.proposal=new v2(this.core,this.logger),this.pendingRequest=new m2(this.core,this.logger),this.engine=new y2(this)}static async init(t){const r=new kd(t);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};const xf="error",E2="wss://relay.walletconnect.com",D2="wc",S2="universal_provider",Of=`${D2}@2:${S2}:`,I2="https://rpc.walletconnect.com/v1",Ai={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,t){(function(){var r,s="4.17.21",o=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",y="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",O=500,A="__lodash_placeholder__",q=1,W=2,H=4,$=1,X=2,ee=1,ue=2,j=4,M=8,P=16,N=32,S=64,c=128,_=256,Z=512,l=30,d="...",v=800,I=16,b=1,p=2,F=3,L=1/0,J=9007199254740991,C=17976931348623157e292,k=0/0,te=4294967295,se=te-1,ie=te>>>1,ye=[["ary",c],["bind",ee],["bindKey",ue],["curry",M],["curryRight",P],["flip",Z],["partial",N],["partialRight",S],["rearg",_]],le="[object Arguments]",be="[object Array]",Y="[object AsyncFunction]",G="[object Boolean]",z="[object Date]",h="[object DOMException]",R="[object Error]",he="[object Function]",pe="[object GeneratorFunction]",Ie="[object Map]",He="[object Number]",Ve="[object Null]",$e="[object Object]",dt="[object Promise]",pt="[object Proxy]",Me="[object RegExp]",xe="[object Set]",Re="[object String]",Fe="[object Symbol]",ze="[object Undefined]",Pe="[object WeakMap]",Ue="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",Qt="[object Uint16Array]",hr="[object Uint32Array]",Br=/\b__p \+= '';/g,er=/\b(__p \+=) '' \+/g,ei=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pi=/&(?:amp|lt|gt|quot|#39);/g,Ti=/[&<>"']/g,mt=RegExp(pi.source),gt=RegExp(Ti.source),wt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Ut=RegExp(Dt.source),St=/^\s+/,Ot=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,$t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,za=/[()=,{}\[\]\/\s]/,qa=/\\(\\)?/g,Ha=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ir=/\w*$/,Ba=/^[-+]0x[0-9a-f]+$/i,Ka=/^0b[01]+$/i,Va=/^\[object .+?Constructor\]$/,ka=/^0o[0-7]+$/i,Ga=/^(?:0|[1-9]\d*)$/,ti=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,Wa=/['\n\r\u2028\u2029\\]/g,rn="\\ud800-\\udfff",Ya="\\u0300-\\u036f",Ja="\\ufe20-\\ufe2f",nn="\\u20d0-\\u20ff",ds=Ya+Ja+nn,ps="\\u2700-\\u27bf",$r="a-z\\xdf-\\xf6\\xf8-\\xff",Xa="\\xac\\xb1\\xd7\\xf7",Za="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qa="\\u2000-\\u206f",eo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gs="A-Z\\xc0-\\xd6\\xd8-\\xde",_s="\\ufe0e\\ufe0f",Ni=Xa+Za+Qa+eo,Cn="['’]",Ri="["+rn+"]",An="["+Ni+"]",Fi="["+ds+"]",ys="\\d+",to="["+ps+"]",vs="["+$r+"]",bs="[^"+rn+Ni+ys+ps+$r+gs+"]",sn="\\ud83c[\\udffb-\\udfff]",ro="(?:"+Fi+"|"+sn+")",ms="[^"+rn+"]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",vr="["+gs+"]",ws="\\u200d",Es="(?:"+vs+"|"+bs+")",Kr="(?:"+vr+"|"+bs+")",Ds="(?:"+Cn+"(?:d|ll|m|re|s|t|ve))?",Ss="(?:"+Cn+"(?:D|LL|M|RE|S|T|VE))?",Is=ro+"?",xs="["+_s+"]?",io="(?:"+ws+"(?:"+[ms,an,gi].join("|")+")"+xs+Is+")*",ri="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Os="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ps=xs+Is+io,on="(?:"+[to,an,gi].join("|")+")"+Ps,no="(?:"+[ms+Fi+"?",Fi,an,gi,Ri].join("|")+")",Tn=RegExp(Cn,"g"),so=RegExp(Fi,"g"),cn=RegExp(sn+"(?="+sn+")|"+no+Ps,"g"),Cs=RegExp([vr+"?"+vs+"+"+Ds+"(?="+[An,vr,"$"].join("|")+")",Kr+"+"+Ss+"(?="+[An,vr+Es,"$"].join("|")+")",vr+"?"+Es+"+"+Ds,vr+"+"+Ss,Os,ri,ys,on].join("|"),"g"),As=RegExp("["+ws+rn+ds+_s+"]"),Ui=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ts=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ao=-1,at={};at[Be]=at[Oe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[Qt]=at[hr]=!0,at[le]=at[be]=at[Se]=at[G]=at[Ce]=at[z]=at[R]=at[he]=at[Ie]=at[He]=at[$e]=at[Me]=at[xe]=at[Re]=at[Pe]=!1;var st={};st[le]=st[be]=st[Se]=st[Ce]=st[G]=st[z]=st[Be]=st[Oe]=st[ke]=st[We]=st[et]=st[Ie]=st[He]=st[$e]=st[Me]=st[xe]=st[Re]=st[Fe]=st[tt]=st[Je]=st[Qt]=st[hr]=!0,st[R]=st[he]=st[Pe]=!1;var x={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,Te=parseInt,lt=typeof ss=="object"&&ss&&ss.Object===Object&&ss,Lt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=lt||Lt||Function("return this")(),ct=t&&!t.nodeType&&t,Pt=ct&&!0&&n&&!n.nodeType&&n,lr=Pt&&Pt.exports===ct,Mt=lr&&lt.process,ft=function(){try{var K=Pt&&Pt.require&&Pt.require("util").types;return K||Mt&&Mt.binding&&Mt.binding("util")}catch{}}(),tr=ft&&ft.isArrayBuffer,Lr=ft&&ft.isDate,xr=ft&&ft.isMap,Vr=ft&&ft.isRegExp,Nn=ft&&ft.isSet,ji=ft&&ft.isTypedArray;function Kt(K,re,Q){switch(Q.length){case 0:return K.call(re);case 1:return K.call(re,Q[0]);case 2:return K.call(re,Q[0],Q[1]);case 3:return K.call(re,Q[0],Q[1],Q[2])}return K.apply(re,Q)}function Wd(K,re,Q,_e){for(var Ae=-1,rt=K==null?0:K.length;++Ae<rt;){var Ht=K[Ae];re(_e,Ht,Q(Ht),K)}return _e}function Or(K,re){for(var Q=-1,_e=K==null?0:K.length;++Q<_e&&re(K[Q],Q,K)!==!1;);return K}function Yd(K,re){for(var Q=K==null?0:K.length;Q--&&re(K[Q],Q,K)!==!1;);return K}function yu(K,re){for(var Q=-1,_e=K==null?0:K.length;++Q<_e;)if(!re(K[Q],Q,K))return!1;return!0}function _i(K,re){for(var Q=-1,_e=K==null?0:K.length,Ae=0,rt=[];++Q<_e;){var Ht=K[Q];re(Ht,Q,K)&&(rt[Ae++]=Ht)}return rt}function Ns(K,re){var Q=K==null?0:K.length;return!!Q&&un(K,re,0)>-1}function oo(K,re,Q){for(var _e=-1,Ae=K==null?0:K.length;++_e<Ae;)if(Q(re,K[_e]))return!0;return!1}function yt(K,re){for(var Q=-1,_e=K==null?0:K.length,Ae=Array(_e);++Q<_e;)Ae[Q]=re(K[Q],Q,K);return Ae}function yi(K,re){for(var Q=-1,_e=re.length,Ae=K.length;++Q<_e;)K[Ae+Q]=re[Q];return K}function co(K,re,Q,_e){var Ae=-1,rt=K==null?0:K.length;for(_e&&rt&&(Q=K[++Ae]);++Ae<rt;)Q=re(Q,K[Ae],Ae,K);return Q}function Jd(K,re,Q,_e){var Ae=K==null?0:K.length;for(_e&&Ae&&(Q=K[--Ae]);Ae--;)Q=re(Q,K[Ae],Ae,K);return Q}function uo(K,re){for(var Q=-1,_e=K==null?0:K.length;++Q<_e;)if(re(K[Q],Q,K))return!0;return!1}var Xd=ho("length");function Zd(K){return K.split("")}function Qd(K){return K.match($t)||[]}function vu(K,re,Q){var _e;return Q(K,function(Ae,rt,Ht){if(re(Ae,rt,Ht))return _e=rt,!1}),_e}function Rs(K,re,Q,_e){for(var Ae=K.length,rt=Q+(_e?1:-1);_e?rt--:++rt<Ae;)if(re(K[rt],rt,K))return rt;return-1}function un(K,re,Q){return re===re?lp(K,re,Q):Rs(K,bu,Q)}function ep(K,re,Q,_e){for(var Ae=Q-1,rt=K.length;++Ae<rt;)if(_e(K[Ae],re))return Ae;return-1}function bu(K){return K!==K}function mu(K,re){var Q=K==null?0:K.length;return Q?fo(K,re)/Q:k}function ho(K){return function(re){return re==null?r:re[K]}}function lo(K){return function(re){return K==null?r:K[re]}}function wu(K,re,Q,_e,Ae){return Ae(K,function(rt,Ht,ut){Q=_e?(_e=!1,rt):re(Q,rt,Ht,ut)}),Q}function tp(K,re){var Q=K.length;for(K.sort(re);Q--;)K[Q]=K[Q].value;return K}function fo(K,re){for(var Q,_e=-1,Ae=K.length;++_e<Ae;){var rt=re(K[_e]);rt!==r&&(Q=Q===r?rt:Q+rt)}return Q}function po(K,re){for(var Q=-1,_e=Array(K);++Q<K;)_e[Q]=re(Q);return _e}function rp(K,re){return yt(re,function(Q){return[Q,K[Q]]})}function Eu(K){return K&&K.slice(0,xu(K)+1).replace(St,"")}function br(K){return function(re){return K(re)}}function go(K,re){return yt(re,function(Q){return K[Q]})}function Rn(K,re){return K.has(re)}function Du(K,re){for(var Q=-1,_e=K.length;++Q<_e&&un(re,K[Q],0)>-1;);return Q}function Su(K,re){for(var Q=K.length;Q--&&un(re,K[Q],0)>-1;);return Q}function ip(K,re){for(var Q=K.length,_e=0;Q--;)K[Q]===re&&++_e;return _e}var np=lo(x),sp=lo(B);function ap(K){return"\\"+ge[K]}function op(K,re){return K==null?r:K[re]}function hn(K){return As.test(K)}function cp(K){return Ui.test(K)}function up(K){for(var re,Q=[];!(re=K.next()).done;)Q.push(re.value);return Q}function _o(K){var re=-1,Q=Array(K.size);return K.forEach(function(_e,Ae){Q[++re]=[Ae,_e]}),Q}function Iu(K,re){return function(Q){return K(re(Q))}}function vi(K,re){for(var Q=-1,_e=K.length,Ae=0,rt=[];++Q<_e;){var Ht=K[Q];(Ht===re||Ht===A)&&(K[Q]=A,rt[Ae++]=Q)}return rt}function Fs(K){var re=-1,Q=Array(K.size);return K.forEach(function(_e){Q[++re]=_e}),Q}function hp(K){var re=-1,Q=Array(K.size);return K.forEach(function(_e){Q[++re]=[_e,_e]}),Q}function lp(K,re,Q){for(var _e=Q-1,Ae=K.length;++_e<Ae;)if(K[_e]===re)return _e;return-1}function fp(K,re,Q){for(var _e=Q+1;_e--;)if(K[_e]===re)return _e;return _e}function ln(K){return hn(K)?pp(K):Xd(K)}function Mr(K){return hn(K)?gp(K):Zd(K)}function xu(K){for(var re=K.length;re--&&Ot.test(K.charAt(re)););return re}var dp=lo(oe);function pp(K){for(var re=cn.lastIndex=0;cn.test(K);)++re;return re}function gp(K){return K.match(cn)||[]}function _p(K){return K.match(Cs)||[]}var yp=function K(re){re=re==null?Xe:fn.defaults(Xe.Object(),re,fn.pick(Xe,Ts));var Q=re.Array,_e=re.Date,Ae=re.Error,rt=re.Function,Ht=re.Math,ut=re.Object,yo=re.RegExp,vp=re.String,Pr=re.TypeError,Us=Q.prototype,bp=rt.prototype,dn=ut.prototype,js=re["__core-js_shared__"],$s=bp.toString,nt=dn.hasOwnProperty,mp=0,Ou=function(){var e=/[^.]+$/.exec(js&&js.keys&&js.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ls=dn.toString,wp=$s.call(ut),Ep=Xe._,Dp=yo("^"+$s.call(nt).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ms=lr?re.Buffer:r,bi=re.Symbol,zs=re.Uint8Array,Pu=Ms?Ms.allocUnsafe:r,qs=Iu(ut.getPrototypeOf,ut),Cu=ut.create,Au=dn.propertyIsEnumerable,Hs=Us.splice,Tu=bi?bi.isConcatSpreadable:r,Fn=bi?bi.iterator:r,$i=bi?bi.toStringTag:r,Bs=function(){try{var e=Hi(ut,"defineProperty");return e({},"",{}),e}catch{}}(),Sp=re.clearTimeout!==Xe.clearTimeout&&re.clearTimeout,Ip=_e&&_e.now!==Xe.Date.now&&_e.now,xp=re.setTimeout!==Xe.setTimeout&&re.setTimeout,Ks=Ht.ceil,Vs=Ht.floor,vo=ut.getOwnPropertySymbols,Op=Ms?Ms.isBuffer:r,Nu=re.isFinite,Pp=Us.join,Cp=Iu(ut.keys,ut),Bt=Ht.max,Jt=Ht.min,Ap=_e.now,Tp=re.parseInt,Ru=Ht.random,Np=Us.reverse,bo=Hi(re,"DataView"),Un=Hi(re,"Map"),mo=Hi(re,"Promise"),pn=Hi(re,"Set"),jn=Hi(re,"WeakMap"),$n=Hi(ut,"create"),ks=jn&&new jn,gn={},Rp=Bi(bo),Fp=Bi(Un),Up=Bi(mo),jp=Bi(pn),$p=Bi(jn),Gs=bi?bi.prototype:r,Ln=Gs?Gs.valueOf:r,Fu=Gs?Gs.toString:r;function E(e){if(xt(e)&&!Ne(e)&&!(e instanceof Ye)){if(e instanceof Cr)return e;if(nt.call(e,"__wrapped__"))return Uh(e)}return new Cr(e)}var _n=function(){function e(){}return function(i){if(!bt(i))return{};if(Cu)return Cu(i);e.prototype=i;var a=new e;return e.prototype=r,a}}();function Ws(){}function Cr(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}E.templateSettings={escape:wt,evaluate:Et,interpolate:vt,variable:"",imports:{_:E}},E.prototype=Ws.prototype,E.prototype.constructor=E,Cr.prototype=_n(Ws.prototype),Cr.prototype.constructor=Cr;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Lp(){var e=new Ye(this.__wrapped__);return e.__actions__=fr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=fr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=fr(this.__views__),e}function Mp(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function zp(){var e=this.__wrapped__.value(),i=this.__dir__,a=Ne(e),u=i<0,g=a?e.length:0,D=Zg(0,g,this.__views__),T=D.start,U=D.end,V=U-T,ne=u?U:T-1,ae=this.__iteratees__,ce=ae.length,fe=0,ve=Jt(V,this.__takeCount__);if(!a||!u&&g==V&&ve==V)return nh(e,this.__actions__);var Ee=[];e:for(;V--&&fe<ve;){ne+=i;for(var qe=-1,De=e[ne];++qe<ce;){var Ge=ae[qe],Ze=Ge.iteratee,Er=Ge.type,nr=Ze(De);if(Er==p)De=nr;else if(!nr){if(Er==b)continue e;break e}}Ee[fe++]=De}return Ee}Ye.prototype=_n(Ws.prototype),Ye.prototype.constructor=Ye;function Li(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function qp(){this.__data__=$n?$n(null):{},this.size=0}function Hp(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function Bp(e){var i=this.__data__;if($n){var a=i[e];return a===w?r:a}return nt.call(i,e)?i[e]:r}function Kp(e){var i=this.__data__;return $n?i[e]!==r:nt.call(i,e)}function Vp(e,i){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=$n&&i===r?w:i,this}Li.prototype.clear=qp,Li.prototype.delete=Hp,Li.prototype.get=Bp,Li.prototype.has=Kp,Li.prototype.set=Vp;function ii(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function kp(){this.__data__=[],this.size=0}function Gp(e){var i=this.__data__,a=Ys(i,e);if(a<0)return!1;var u=i.length-1;return a==u?i.pop():Hs.call(i,a,1),--this.size,!0}function Wp(e){var i=this.__data__,a=Ys(i,e);return a<0?r:i[a][1]}function Yp(e){return Ys(this.__data__,e)>-1}function Jp(e,i){var a=this.__data__,u=Ys(a,e);return u<0?(++this.size,a.push([e,i])):a[u][1]=i,this}ii.prototype.clear=kp,ii.prototype.delete=Gp,ii.prototype.get=Wp,ii.prototype.has=Yp,ii.prototype.set=Jp;function ni(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function Xp(){this.size=0,this.__data__={hash:new Li,map:new(Un||ii),string:new Li}}function Zp(e){var i=oa(this,e).delete(e);return this.size-=i?1:0,i}function Qp(e){return oa(this,e).get(e)}function eg(e){return oa(this,e).has(e)}function tg(e,i){var a=oa(this,e),u=a.size;return a.set(e,i),this.size+=a.size==u?0:1,this}ni.prototype.clear=Xp,ni.prototype.delete=Zp,ni.prototype.get=Qp,ni.prototype.has=eg,ni.prototype.set=tg;function Mi(e){var i=-1,a=e==null?0:e.length;for(this.__data__=new ni;++i<a;)this.add(e[i])}function rg(e){return this.__data__.set(e,w),this}function ig(e){return this.__data__.has(e)}Mi.prototype.add=Mi.prototype.push=rg,Mi.prototype.has=ig;function zr(e){var i=this.__data__=new ii(e);this.size=i.size}function ng(){this.__data__=new ii,this.size=0}function sg(e){var i=this.__data__,a=i.delete(e);return this.size=i.size,a}function ag(e){return this.__data__.get(e)}function og(e){return this.__data__.has(e)}function cg(e,i){var a=this.__data__;if(a instanceof ii){var u=a.__data__;if(!Un||u.length<o-1)return u.push([e,i]),this.size=++a.size,this;a=this.__data__=new ni(u)}return a.set(e,i),this.size=a.size,this}zr.prototype.clear=ng,zr.prototype.delete=sg,zr.prototype.get=ag,zr.prototype.has=og,zr.prototype.set=cg;function Uu(e,i){var a=Ne(e),u=!a&&Ki(e),g=!a&&!u&&Si(e),D=!a&&!u&&!g&&mn(e),T=a||u||g||D,U=T?po(e.length,vp):[],V=U.length;for(var ne in e)(i||nt.call(e,ne))&&!(T&&(ne=="length"||g&&(ne=="offset"||ne=="parent")||D&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||ci(ne,V)))&&U.push(ne);return U}function ju(e){var i=e.length;return i?e[To(0,i-1)]:r}function ug(e,i){return ca(fr(e),zi(i,0,e.length))}function hg(e){return ca(fr(e))}function wo(e,i,a){(a!==r&&!qr(e[i],a)||a===r&&!(i in e))&&si(e,i,a)}function Mn(e,i,a){var u=e[i];(!(nt.call(e,i)&&qr(u,a))||a===r&&!(i in e))&&si(e,i,a)}function Ys(e,i){for(var a=e.length;a--;)if(qr(e[a][0],i))return a;return-1}function lg(e,i,a,u){return mi(e,function(g,D,T){i(u,g,a(g),T)}),u}function $u(e,i){return e&&Gr(i,Vt(i),e)}function fg(e,i){return e&&Gr(i,pr(i),e)}function si(e,i,a){i=="__proto__"&&Bs?Bs(e,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[i]=a}function Eo(e,i){for(var a=-1,u=i.length,g=Q(u),D=e==null;++a<u;)g[a]=D?r:rc(e,i[a]);return g}function zi(e,i,a){return e===e&&(a!==r&&(e=e<=a?e:a),i!==r&&(e=e>=i?e:i)),e}function Ar(e,i,a,u,g,D){var T,U=i&q,V=i&W,ne=i&H;if(a&&(T=g?a(e,u,g,D):a(e)),T!==r)return T;if(!bt(e))return e;var ae=Ne(e);if(ae){if(T=e0(e),!U)return fr(e,T)}else{var ce=Xt(e),fe=ce==he||ce==pe;if(Si(e))return oh(e,U);if(ce==$e||ce==le||fe&&!g){if(T=V||fe?{}:xh(e),!U)return V?Bg(e,fg(T,e)):Hg(e,$u(T,e))}else{if(!st[ce])return g?e:{};T=t0(e,ce,U)}}D||(D=new zr);var ve=D.get(e);if(ve)return ve;D.set(e,T),tl(e)?e.forEach(function(De){T.add(Ar(De,i,a,De,e,D))}):Qh(e)&&e.forEach(function(De,Ge){T.set(Ge,Ar(De,i,a,Ge,e,D))});var Ee=ne?V?Ho:qo:V?pr:Vt,qe=ae?r:Ee(e);return Or(qe||e,function(De,Ge){qe&&(Ge=De,De=e[Ge]),Mn(T,Ge,Ar(De,i,a,Ge,e,D))}),T}function dg(e){var i=Vt(e);return function(a){return Lu(a,e,i)}}function Lu(e,i,a){var u=a.length;if(e==null)return!u;for(e=ut(e);u--;){var g=a[u],D=i[g],T=e[g];if(T===r&&!(g in e)||!D(T))return!1}return!0}function Mu(e,i,a){if(typeof e!="function")throw new Pr(m);return kn(function(){e.apply(r,a)},i)}function zn(e,i,a,u){var g=-1,D=Ns,T=!0,U=e.length,V=[],ne=i.length;if(!U)return V;a&&(i=yt(i,br(a))),u?(D=oo,T=!1):i.length>=o&&(D=Rn,T=!1,i=new Mi(i));e:for(;++g<U;){var ae=e[g],ce=a==null?ae:a(ae);if(ae=u||ae!==0?ae:0,T&&ce===ce){for(var fe=ne;fe--;)if(i[fe]===ce)continue e;V.push(ae)}else D(i,ce,u)||V.push(ae)}return V}var mi=fh(kr),zu=fh(So,!0);function pg(e,i){var a=!0;return mi(e,function(u,g,D){return a=!!i(u,g,D),a}),a}function Js(e,i,a){for(var u=-1,g=e.length;++u<g;){var D=e[u],T=i(D);if(T!=null&&(U===r?T===T&&!wr(T):a(T,U)))var U=T,V=D}return V}function gg(e,i,a,u){var g=e.length;for(a=Le(a),a<0&&(a=-a>g?0:g+a),u=u===r||u>g?g:Le(u),u<0&&(u+=g),u=a>u?0:il(u);a<u;)e[a++]=i;return e}function qu(e,i){var a=[];return mi(e,function(u,g,D){i(u,g,D)&&a.push(u)}),a}function Gt(e,i,a,u,g){var D=-1,T=e.length;for(a||(a=i0),g||(g=[]);++D<T;){var U=e[D];i>0&&a(U)?i>1?Gt(U,i-1,a,u,g):yi(g,U):u||(g[g.length]=U)}return g}var Do=dh(),Hu=dh(!0);function kr(e,i){return e&&Do(e,i,Vt)}function So(e,i){return e&&Hu(e,i,Vt)}function Xs(e,i){return _i(i,function(a){return ui(e[a])})}function qi(e,i){i=Ei(i,e);for(var a=0,u=i.length;e!=null&&a<u;)e=e[Wr(i[a++])];return a&&a==u?e:r}function Bu(e,i,a){var u=i(e);return Ne(e)?u:yi(u,a(e))}function rr(e){return e==null?e===r?ze:Ve:$i&&$i in ut(e)?Xg(e):h0(e)}function Io(e,i){return e>i}function _g(e,i){return e!=null&&nt.call(e,i)}function yg(e,i){return e!=null&&i in ut(e)}function vg(e,i,a){return e>=Jt(i,a)&&e<Bt(i,a)}function xo(e,i,a){for(var u=a?oo:Ns,g=e[0].length,D=e.length,T=D,U=Q(D),V=1/0,ne=[];T--;){var ae=e[T];T&&i&&(ae=yt(ae,br(i))),V=Jt(ae.length,V),U[T]=!a&&(i||g>=120&&ae.length>=120)?new Mi(T&&ae):r}ae=e[0];var ce=-1,fe=U[0];e:for(;++ce<g&&ne.length<V;){var ve=ae[ce],Ee=i?i(ve):ve;if(ve=a||ve!==0?ve:0,!(fe?Rn(fe,Ee):u(ne,Ee,a))){for(T=D;--T;){var qe=U[T];if(!(qe?Rn(qe,Ee):u(e[T],Ee,a)))continue e}fe&&fe.push(Ee),ne.push(ve)}}return ne}function bg(e,i,a,u){return kr(e,function(g,D,T){i(u,a(g),D,T)}),u}function qn(e,i,a){i=Ei(i,e),e=Ah(e,i);var u=e==null?e:e[Wr(Nr(i))];return u==null?r:Kt(u,e,a)}function Ku(e){return xt(e)&&rr(e)==le}function mg(e){return xt(e)&&rr(e)==Se}function wg(e){return xt(e)&&rr(e)==z}function Hn(e,i,a,u,g){return e===i?!0:e==null||i==null||!xt(e)&&!xt(i)?e!==e&&i!==i:Eg(e,i,a,u,Hn,g)}function Eg(e,i,a,u,g,D){var T=Ne(e),U=Ne(i),V=T?be:Xt(e),ne=U?be:Xt(i);V=V==le?$e:V,ne=ne==le?$e:ne;var ae=V==$e,ce=ne==$e,fe=V==ne;if(fe&&Si(e)){if(!Si(i))return!1;T=!0,ae=!1}if(fe&&!ae)return D||(D=new zr),T||mn(e)?Dh(e,i,a,u,g,D):Yg(e,i,V,a,u,g,D);if(!(a&$)){var ve=ae&&nt.call(e,"__wrapped__"),Ee=ce&&nt.call(i,"__wrapped__");if(ve||Ee){var qe=ve?e.value():e,De=Ee?i.value():i;return D||(D=new zr),g(qe,De,a,u,D)}}return fe?(D||(D=new zr),Jg(e,i,a,u,g,D)):!1}function Dg(e){return xt(e)&&Xt(e)==Ie}function Oo(e,i,a,u){var g=a.length,D=g,T=!u;if(e==null)return!D;for(e=ut(e);g--;){var U=a[g];if(T&&U[2]?U[1]!==e[U[0]]:!(U[0]in e))return!1}for(;++g<D;){U=a[g];var V=U[0],ne=e[V],ae=U[1];if(T&&U[2]){if(ne===r&&!(V in e))return!1}else{var ce=new zr;if(u)var fe=u(ne,ae,V,e,i,ce);if(!(fe===r?Hn(ae,ne,$|X,u,ce):fe))return!1}}return!0}function Vu(e){if(!bt(e)||s0(e))return!1;var i=ui(e)?Dp:Va;return i.test(Bi(e))}function Sg(e){return xt(e)&&rr(e)==Me}function Ig(e){return xt(e)&&Xt(e)==xe}function xg(e){return xt(e)&&pa(e.length)&&!!at[rr(e)]}function ku(e){return typeof e=="function"?e:e==null?gr:typeof e=="object"?Ne(e)?Yu(e[0],e[1]):Wu(e):pl(e)}function Po(e){if(!Vn(e))return Cp(e);var i=[];for(var a in ut(e))nt.call(e,a)&&a!="constructor"&&i.push(a);return i}function Og(e){if(!bt(e))return u0(e);var i=Vn(e),a=[];for(var u in e)u=="constructor"&&(i||!nt.call(e,u))||a.push(u);return a}function Co(e,i){return e<i}function Gu(e,i){var a=-1,u=dr(e)?Q(e.length):[];return mi(e,function(g,D,T){u[++a]=i(g,D,T)}),u}function Wu(e){var i=Ko(e);return i.length==1&&i[0][2]?Ph(i[0][0],i[0][1]):function(a){return a===e||Oo(a,e,i)}}function Yu(e,i){return ko(e)&&Oh(i)?Ph(Wr(e),i):function(a){var u=rc(a,e);return u===r&&u===i?ic(a,e):Hn(i,u,$|X)}}function Zs(e,i,a,u,g){e!==i&&Do(i,function(D,T){if(g||(g=new zr),bt(D))Pg(e,i,T,a,Zs,u,g);else{var U=u?u(Wo(e,T),D,T+"",e,i,g):r;U===r&&(U=D),wo(e,T,U)}},pr)}function Pg(e,i,a,u,g,D,T){var U=Wo(e,a),V=Wo(i,a),ne=T.get(V);if(ne){wo(e,a,ne);return}var ae=D?D(U,V,a+"",e,i,T):r,ce=ae===r;if(ce){var fe=Ne(V),ve=!fe&&Si(V),Ee=!fe&&!ve&&mn(V);ae=V,fe||ve||Ee?Ne(U)?ae=U:Ct(U)?ae=fr(U):ve?(ce=!1,ae=oh(V,!0)):Ee?(ce=!1,ae=ch(V,!0)):ae=[]:Gn(V)||Ki(V)?(ae=U,Ki(U)?ae=nl(U):(!bt(U)||ui(U))&&(ae=xh(V))):ce=!1}ce&&(T.set(V,ae),g(ae,V,u,D,T),T.delete(V)),wo(e,a,ae)}function Ju(e,i){var a=e.length;if(a)return i+=i<0?a:0,ci(i,a)?e[i]:r}function Xu(e,i,a){i.length?i=yt(i,function(D){return Ne(D)?function(T){return qi(T,D.length===1?D[0]:D)}:D}):i=[gr];var u=-1;i=yt(i,br(we()));var g=Gu(e,function(D,T,U){var V=yt(i,function(ne){return ne(D)});return{criteria:V,index:++u,value:D}});return tp(g,function(D,T){return qg(D,T,a)})}function Cg(e,i){return Zu(e,i,function(a,u){return ic(e,u)})}function Zu(e,i,a){for(var u=-1,g=i.length,D={};++u<g;){var T=i[u],U=qi(e,T);a(U,T)&&Bn(D,Ei(T,e),U)}return D}function Ag(e){return function(i){return qi(i,e)}}function Ao(e,i,a,u){var g=u?ep:un,D=-1,T=i.length,U=e;for(e===i&&(i=fr(i)),a&&(U=yt(e,br(a)));++D<T;)for(var V=0,ne=i[D],ae=a?a(ne):ne;(V=g(U,ae,V,u))>-1;)U!==e&&Hs.call(U,V,1),Hs.call(e,V,1);return e}function Qu(e,i){for(var a=e?i.length:0,u=a-1;a--;){var g=i[a];if(a==u||g!==D){var D=g;ci(g)?Hs.call(e,g,1):Fo(e,g)}}return e}function To(e,i){return e+Vs(Ru()*(i-e+1))}function Tg(e,i,a,u){for(var g=-1,D=Bt(Ks((i-e)/(a||1)),0),T=Q(D);D--;)T[u?D:++g]=e,e+=a;return T}function No(e,i){var a="";if(!e||i<1||i>J)return a;do i%2&&(a+=e),i=Vs(i/2),i&&(e+=e);while(i);return a}function Ke(e,i){return Yo(Ch(e,i,gr),e+"")}function Ng(e){return ju(wn(e))}function Rg(e,i){var a=wn(e);return ca(a,zi(i,0,a.length))}function Bn(e,i,a,u){if(!bt(e))return e;i=Ei(i,e);for(var g=-1,D=i.length,T=D-1,U=e;U!=null&&++g<D;){var V=Wr(i[g]),ne=a;if(V==="__proto__"||V==="constructor"||V==="prototype")return e;if(g!=T){var ae=U[V];ne=u?u(ae,V,U):r,ne===r&&(ne=bt(ae)?ae:ci(i[g+1])?[]:{})}Mn(U,V,ne),U=U[V]}return e}var eh=ks?function(e,i){return ks.set(e,i),e}:gr,Fg=Bs?function(e,i){return Bs(e,"toString",{configurable:!0,enumerable:!1,value:sc(i),writable:!0})}:gr;function Ug(e){return ca(wn(e))}function Tr(e,i,a){var u=-1,g=e.length;i<0&&(i=-i>g?0:g+i),a=a>g?g:a,a<0&&(a+=g),g=i>a?0:a-i>>>0,i>>>=0;for(var D=Q(g);++u<g;)D[u]=e[u+i];return D}function jg(e,i){var a;return mi(e,function(u,g,D){return a=i(u,g,D),!a}),!!a}function Qs(e,i,a){var u=0,g=e==null?u:e.length;if(typeof i=="number"&&i===i&&g<=ie){for(;u<g;){var D=u+g>>>1,T=e[D];T!==null&&!wr(T)&&(a?T<=i:T<i)?u=D+1:g=D}return g}return Ro(e,i,gr,a)}function Ro(e,i,a,u){var g=0,D=e==null?0:e.length;if(D===0)return 0;i=a(i);for(var T=i!==i,U=i===null,V=wr(i),ne=i===r;g<D;){var ae=Vs((g+D)/2),ce=a(e[ae]),fe=ce!==r,ve=ce===null,Ee=ce===ce,qe=wr(ce);if(T)var De=u||Ee;else ne?De=Ee&&(u||fe):U?De=Ee&&fe&&(u||!ve):V?De=Ee&&fe&&!ve&&(u||!qe):ve||qe?De=!1:De=u?ce<=i:ce<i;De?g=ae+1:D=ae}return Jt(D,se)}function th(e,i){for(var a=-1,u=e.length,g=0,D=[];++a<u;){var T=e[a],U=i?i(T):T;if(!a||!qr(U,V)){var V=U;D[g++]=T===0?0:T}}return D}function rh(e){return typeof e=="number"?e:wr(e)?k:+e}function mr(e){if(typeof e=="string")return e;if(Ne(e))return yt(e,mr)+"";if(wr(e))return Fu?Fu.call(e):"";var i=e+"";return i=="0"&&1/e==-L?"-0":i}function wi(e,i,a){var u=-1,g=Ns,D=e.length,T=!0,U=[],V=U;if(a)T=!1,g=oo;else if(D>=o){var ne=i?null:Gg(e);if(ne)return Fs(ne);T=!1,g=Rn,V=new Mi}else V=i?[]:U;e:for(;++u<D;){var ae=e[u],ce=i?i(ae):ae;if(ae=a||ae!==0?ae:0,T&&ce===ce){for(var fe=V.length;fe--;)if(V[fe]===ce)continue e;i&&V.push(ce),U.push(ae)}else g(V,ce,a)||(V!==U&&V.push(ce),U.push(ae))}return U}function Fo(e,i){return i=Ei(i,e),e=Ah(e,i),e==null||delete e[Wr(Nr(i))]}function ih(e,i,a,u){return Bn(e,i,a(qi(e,i)),u)}function ea(e,i,a,u){for(var g=e.length,D=u?g:-1;(u?D--:++D<g)&&i(e[D],D,e););return a?Tr(e,u?0:D,u?D+1:g):Tr(e,u?D+1:0,u?g:D)}function nh(e,i){var a=e;return a instanceof Ye&&(a=a.value()),co(i,function(u,g){return g.func.apply(g.thisArg,yi([u],g.args))},a)}function Uo(e,i,a){var u=e.length;if(u<2)return u?wi(e[0]):[];for(var g=-1,D=Q(u);++g<u;)for(var T=e[g],U=-1;++U<u;)U!=g&&(D[g]=zn(D[g]||T,e[U],i,a));return wi(Gt(D,1),i,a)}function sh(e,i,a){for(var u=-1,g=e.length,D=i.length,T={};++u<g;){var U=u<D?i[u]:r;a(T,e[u],U)}return T}function jo(e){return Ct(e)?e:[]}function $o(e){return typeof e=="function"?e:gr}function Ei(e,i){return Ne(e)?e:ko(e,i)?[e]:Fh(it(e))}var $g=Ke;function Di(e,i,a){var u=e.length;return a=a===r?u:a,!i&&a>=u?e:Tr(e,i,a)}var ah=Sp||function(e){return Xe.clearTimeout(e)};function oh(e,i){if(i)return e.slice();var a=e.length,u=Pu?Pu(a):new e.constructor(a);return e.copy(u),u}function Lo(e){var i=new e.constructor(e.byteLength);return new zs(i).set(new zs(e)),i}function Lg(e,i){var a=i?Lo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function Mg(e){var i=new e.constructor(e.source,Ir.exec(e));return i.lastIndex=e.lastIndex,i}function zg(e){return Ln?ut(Ln.call(e)):{}}function ch(e,i){var a=i?Lo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function uh(e,i){if(e!==i){var a=e!==r,u=e===null,g=e===e,D=wr(e),T=i!==r,U=i===null,V=i===i,ne=wr(i);if(!U&&!ne&&!D&&e>i||D&&T&&V&&!U&&!ne||u&&T&&V||!a&&V||!g)return 1;if(!u&&!D&&!ne&&e<i||ne&&a&&g&&!u&&!D||U&&a&&g||!T&&g||!V)return-1}return 0}function qg(e,i,a){for(var u=-1,g=e.criteria,D=i.criteria,T=g.length,U=a.length;++u<T;){var V=uh(g[u],D[u]);if(V){if(u>=U)return V;var ne=a[u];return V*(ne=="desc"?-1:1)}}return e.index-i.index}function hh(e,i,a,u){for(var g=-1,D=e.length,T=a.length,U=-1,V=i.length,ne=Bt(D-T,0),ae=Q(V+ne),ce=!u;++U<V;)ae[U]=i[U];for(;++g<T;)(ce||g<D)&&(ae[a[g]]=e[g]);for(;ne--;)ae[U++]=e[g++];return ae}function lh(e,i,a,u){for(var g=-1,D=e.length,T=-1,U=a.length,V=-1,ne=i.length,ae=Bt(D-U,0),ce=Q(ae+ne),fe=!u;++g<ae;)ce[g]=e[g];for(var ve=g;++V<ne;)ce[ve+V]=i[V];for(;++T<U;)(fe||g<D)&&(ce[ve+a[T]]=e[g++]);return ce}function fr(e,i){var a=-1,u=e.length;for(i||(i=Q(u));++a<u;)i[a]=e[a];return i}function Gr(e,i,a,u){var g=!a;a||(a={});for(var D=-1,T=i.length;++D<T;){var U=i[D],V=u?u(a[U],e[U],U,a,e):r;V===r&&(V=e[U]),g?si(a,U,V):Mn(a,U,V)}return a}function Hg(e,i){return Gr(e,Vo(e),i)}function Bg(e,i){return Gr(e,Sh(e),i)}function ta(e,i){return function(a,u){var g=Ne(a)?Wd:lg,D=i?i():{};return g(a,e,we(u,2),D)}}function yn(e){return Ke(function(i,a){var u=-1,g=a.length,D=g>1?a[g-1]:r,T=g>2?a[2]:r;for(D=e.length>3&&typeof D=="function"?(g--,D):r,T&&ir(a[0],a[1],T)&&(D=g<3?r:D,g=1),i=ut(i);++u<g;){var U=a[u];U&&e(i,U,u,D)}return i})}function fh(e,i){return function(a,u){if(a==null)return a;if(!dr(a))return e(a,u);for(var g=a.length,D=i?g:-1,T=ut(a);(i?D--:++D<g)&&u(T[D],D,T)!==!1;);return a}}function dh(e){return function(i,a,u){for(var g=-1,D=ut(i),T=u(i),U=T.length;U--;){var V=T[e?U:++g];if(a(D[V],V,D)===!1)break}return i}}function Kg(e,i,a){var u=i&ee,g=Kn(e);function D(){var T=this&&this!==Xe&&this instanceof D?g:e;return T.apply(u?a:this,arguments)}return D}function ph(e){return function(i){i=it(i);var a=hn(i)?Mr(i):r,u=a?a[0]:i.charAt(0),g=a?Di(a,1).join(""):i.slice(1);return u[e]()+g}}function vn(e){return function(i){return co(fl(ll(i).replace(Tn,"")),e,"")}}function Kn(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=_n(e.prototype),u=e.apply(a,i);return bt(u)?u:a}}function Vg(e,i,a){var u=Kn(e);function g(){for(var D=arguments.length,T=Q(D),U=D,V=bn(g);U--;)T[U]=arguments[U];var ne=D<3&&T[0]!==V&&T[D-1]!==V?[]:vi(T,V);if(D-=ne.length,D<a)return bh(e,i,ra,g.placeholder,r,T,ne,r,r,a-D);var ae=this&&this!==Xe&&this instanceof g?u:e;return Kt(ae,this,T)}return g}function gh(e){return function(i,a,u){var g=ut(i);if(!dr(i)){var D=we(a,3);i=Vt(i),a=function(U){return D(g[U],U,g)}}var T=e(i,a,u);return T>-1?g[D?i[T]:T]:r}}function _h(e){return oi(function(i){var a=i.length,u=a,g=Cr.prototype.thru;for(e&&i.reverse();u--;){var D=i[u];if(typeof D!="function")throw new Pr(m);if(g&&!T&&aa(D)=="wrapper")var T=new Cr([],!0)}for(u=T?u:a;++u<a;){D=i[u];var U=aa(D),V=U=="wrapper"?Bo(D):r;V&&Go(V[0])&&V[1]==(c|M|N|_)&&!V[4].length&&V[9]==1?T=T[aa(V[0])].apply(T,V[3]):T=D.length==1&&Go(D)?T[U]():T.thru(D)}return function(){var ne=arguments,ae=ne[0];if(T&&ne.length==1&&Ne(ae))return T.plant(ae).value();for(var ce=0,fe=a?i[ce].apply(this,ne):ae;++ce<a;)fe=i[ce].call(this,fe);return fe}})}function ra(e,i,a,u,g,D,T,U,V,ne){var ae=i&c,ce=i&ee,fe=i&ue,ve=i&(M|P),Ee=i&Z,qe=fe?r:Kn(e);function De(){for(var Ge=arguments.length,Ze=Q(Ge),Er=Ge;Er--;)Ze[Er]=arguments[Er];if(ve)var nr=bn(De),Dr=ip(Ze,nr);if(u&&(Ze=hh(Ze,u,g,ve)),D&&(Ze=lh(Ze,D,T,ve)),Ge-=Dr,ve&&Ge<ne){var At=vi(Ze,nr);return bh(e,i,ra,De.placeholder,a,Ze,At,U,V,ne-Ge)}var Hr=ce?a:this,li=fe?Hr[e]:e;return Ge=Ze.length,U?Ze=l0(Ze,U):Ee&&Ge>1&&Ze.reverse(),ae&&V<Ge&&(Ze.length=V),this&&this!==Xe&&this instanceof De&&(li=qe||Kn(li)),li.apply(Hr,Ze)}return De}function yh(e,i){return function(a,u){return bg(a,e,i(u),{})}}function ia(e,i){return function(a,u){var g;if(a===r&&u===r)return i;if(a!==r&&(g=a),u!==r){if(g===r)return u;typeof a=="string"||typeof u=="string"?(a=mr(a),u=mr(u)):(a=rh(a),u=rh(u)),g=e(a,u)}return g}}function Mo(e){return oi(function(i){return i=yt(i,br(we())),Ke(function(a){var u=this;return e(i,function(g){return Kt(g,u,a)})})})}function na(e,i){i=i===r?" ":mr(i);var a=i.length;if(a<2)return a?No(i,e):i;var u=No(i,Ks(e/ln(i)));return hn(i)?Di(Mr(u),0,e).join(""):u.slice(0,e)}function kg(e,i,a,u){var g=i&ee,D=Kn(e);function T(){for(var U=-1,V=arguments.length,ne=-1,ae=u.length,ce=Q(ae+V),fe=this&&this!==Xe&&this instanceof T?D:e;++ne<ae;)ce[ne]=u[ne];for(;V--;)ce[ne++]=arguments[++U];return Kt(fe,g?a:this,ce)}return T}function vh(e){return function(i,a,u){return u&&typeof u!="number"&&ir(i,a,u)&&(a=u=r),i=hi(i),a===r?(a=i,i=0):a=hi(a),u=u===r?i<a?1:-1:hi(u),Tg(i,a,u,e)}}function sa(e){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Rr(i),a=Rr(a)),e(i,a)}}function bh(e,i,a,u,g,D,T,U,V,ne){var ae=i&M,ce=ae?T:r,fe=ae?r:T,ve=ae?D:r,Ee=ae?r:D;i|=ae?N:S,i&=~(ae?S:N),i&j||(i&=~(ee|ue));var qe=[e,i,g,ve,ce,Ee,fe,U,V,ne],De=a.apply(r,qe);return Go(e)&&Th(De,qe),De.placeholder=u,Nh(De,e,i)}function zo(e){var i=Ht[e];return function(a,u){if(a=Rr(a),u=u==null?0:Jt(Le(u),292),u&&Nu(a)){var g=(it(a)+"e").split("e"),D=i(g[0]+"e"+(+g[1]+u));return g=(it(D)+"e").split("e"),+(g[0]+"e"+(+g[1]-u))}return i(a)}}var Gg=pn&&1/Fs(new pn([,-0]))[1]==L?function(e){return new pn(e)}:cc;function mh(e){return function(i){var a=Xt(i);return a==Ie?_o(i):a==xe?hp(i):rp(i,e(i))}}function ai(e,i,a,u,g,D,T,U){var V=i&ue;if(!V&&typeof e!="function")throw new Pr(m);var ne=u?u.length:0;if(ne||(i&=~(N|S),u=g=r),T=T===r?T:Bt(Le(T),0),U=U===r?U:Le(U),ne-=g?g.length:0,i&S){var ae=u,ce=g;u=g=r}var fe=V?r:Bo(e),ve=[e,i,a,u,g,ae,ce,D,T,U];if(fe&&c0(ve,fe),e=ve[0],i=ve[1],a=ve[2],u=ve[3],g=ve[4],U=ve[9]=ve[9]===r?V?0:e.length:Bt(ve[9]-ne,0),!U&&i&(M|P)&&(i&=~(M|P)),!i||i==ee)var Ee=Kg(e,i,a);else i==M||i==P?Ee=Vg(e,i,U):(i==N||i==(ee|N))&&!g.length?Ee=kg(e,i,a,u):Ee=ra.apply(r,ve);var qe=fe?eh:Th;return Nh(qe(Ee,ve),e,i)}function wh(e,i,a,u){return e===r||qr(e,dn[a])&&!nt.call(u,a)?i:e}function Eh(e,i,a,u,g,D){return bt(e)&&bt(i)&&(D.set(i,e),Zs(e,i,r,Eh,D),D.delete(i)),e}function Wg(e){return Gn(e)?r:e}function Dh(e,i,a,u,g,D){var T=a&$,U=e.length,V=i.length;if(U!=V&&!(T&&V>U))return!1;var ne=D.get(e),ae=D.get(i);if(ne&&ae)return ne==i&&ae==e;var ce=-1,fe=!0,ve=a&X?new Mi:r;for(D.set(e,i),D.set(i,e);++ce<U;){var Ee=e[ce],qe=i[ce];if(u)var De=T?u(qe,Ee,ce,i,e,D):u(Ee,qe,ce,e,i,D);if(De!==r){if(De)continue;fe=!1;break}if(ve){if(!uo(i,function(Ge,Ze){if(!Rn(ve,Ze)&&(Ee===Ge||g(Ee,Ge,a,u,D)))return ve.push(Ze)})){fe=!1;break}}else if(!(Ee===qe||g(Ee,qe,a,u,D))){fe=!1;break}}return D.delete(e),D.delete(i),fe}function Yg(e,i,a,u,g,D,T){switch(a){case Ce:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Se:return!(e.byteLength!=i.byteLength||!D(new zs(e),new zs(i)));case G:case z:case He:return qr(+e,+i);case R:return e.name==i.name&&e.message==i.message;case Me:case Re:return e==i+"";case Ie:var U=_o;case xe:var V=u&$;if(U||(U=Fs),e.size!=i.size&&!V)return!1;var ne=T.get(e);if(ne)return ne==i;u|=X,T.set(e,i);var ae=Dh(U(e),U(i),u,g,D,T);return T.delete(e),ae;case Fe:if(Ln)return Ln.call(e)==Ln.call(i)}return!1}function Jg(e,i,a,u,g,D){var T=a&$,U=qo(e),V=U.length,ne=qo(i),ae=ne.length;if(V!=ae&&!T)return!1;for(var ce=V;ce--;){var fe=U[ce];if(!(T?fe in i:nt.call(i,fe)))return!1}var ve=D.get(e),Ee=D.get(i);if(ve&&Ee)return ve==i&&Ee==e;var qe=!0;D.set(e,i),D.set(i,e);for(var De=T;++ce<V;){fe=U[ce];var Ge=e[fe],Ze=i[fe];if(u)var Er=T?u(Ze,Ge,fe,i,e,D):u(Ge,Ze,fe,e,i,D);if(!(Er===r?Ge===Ze||g(Ge,Ze,a,u,D):Er)){qe=!1;break}De||(De=fe=="constructor")}if(qe&&!De){var nr=e.constructor,Dr=i.constructor;nr!=Dr&&"constructor"in e&&"constructor"in i&&!(typeof nr=="function"&&nr instanceof nr&&typeof Dr=="function"&&Dr instanceof Dr)&&(qe=!1)}return D.delete(e),D.delete(i),qe}function oi(e){return Yo(Ch(e,r,Lh),e+"")}function qo(e){return Bu(e,Vt,Vo)}function Ho(e){return Bu(e,pr,Sh)}var Bo=ks?function(e){return ks.get(e)}:cc;function aa(e){for(var i=e.name+"",a=gn[i],u=nt.call(gn,i)?a.length:0;u--;){var g=a[u],D=g.func;if(D==null||D==e)return g.name}return i}function bn(e){var i=nt.call(E,"placeholder")?E:e;return i.placeholder}function we(){var e=E.iteratee||ac;return e=e===ac?ku:e,arguments.length?e(arguments[0],arguments[1]):e}function oa(e,i){var a=e.__data__;return n0(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Ko(e){for(var i=Vt(e),a=i.length;a--;){var u=i[a],g=e[u];i[a]=[u,g,Oh(g)]}return i}function Hi(e,i){var a=op(e,i);return Vu(a)?a:r}function Xg(e){var i=nt.call(e,$i),a=e[$i];try{e[$i]=r;var u=!0}catch{}var g=Ls.call(e);return u&&(i?e[$i]=a:delete e[$i]),g}var Vo=vo?function(e){return e==null?[]:(e=ut(e),_i(vo(e),function(i){return Au.call(e,i)}))}:uc,Sh=vo?function(e){for(var i=[];e;)yi(i,Vo(e)),e=qs(e);return i}:uc,Xt=rr;(bo&&Xt(new bo(new ArrayBuffer(1)))!=Ce||Un&&Xt(new Un)!=Ie||mo&&Xt(mo.resolve())!=dt||pn&&Xt(new pn)!=xe||jn&&Xt(new jn)!=Pe)&&(Xt=function(e){var i=rr(e),a=i==$e?e.constructor:r,u=a?Bi(a):"";if(u)switch(u){case Rp:return Ce;case Fp:return Ie;case Up:return dt;case jp:return xe;case $p:return Pe}return i});function Zg(e,i,a){for(var u=-1,g=a.length;++u<g;){var D=a[u],T=D.size;switch(D.type){case"drop":e+=T;break;case"dropRight":i-=T;break;case"take":i=Jt(i,e+T);break;case"takeRight":e=Bt(e,i-T);break}}return{start:e,end:i}}function Qg(e){var i=e.match(ht);return i?i[1].split(jt):[]}function Ih(e,i,a){i=Ei(i,e);for(var u=-1,g=i.length,D=!1;++u<g;){var T=Wr(i[u]);if(!(D=e!=null&&a(e,T)))break;e=e[T]}return D||++u!=g?D:(g=e==null?0:e.length,!!g&&pa(g)&&ci(T,g)&&(Ne(e)||Ki(e)))}function e0(e){var i=e.length,a=new e.constructor(i);return i&&typeof e[0]=="string"&&nt.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function xh(e){return typeof e.constructor=="function"&&!Vn(e)?_n(qs(e)):{}}function t0(e,i,a){var u=e.constructor;switch(i){case Se:return Lo(e);case G:case z:return new u(+e);case Ce:return Lg(e,a);case Be:case Oe:case ke:case We:case et:case tt:case Je:case Qt:case hr:return ch(e,a);case Ie:return new u;case He:case Re:return new u(e);case Me:return Mg(e);case xe:return new u;case Fe:return zg(e)}}function r0(e,i){var a=i.length;if(!a)return e;var u=a-1;return i[u]=(a>1?"& ":"")+i[u],i=i.join(a>2?", ":" "),e.replace(It,`{
/* [wrapped with `+i+`] */
`)}function i0(e){return Ne(e)||Ki(e)||!!(Tu&&e&&e[Tu])}function ci(e,i){var a=typeof e;return i=i??J,!!i&&(a=="number"||a!="symbol"&&Ga.test(e))&&e>-1&&e%1==0&&e<i}function ir(e,i,a){if(!bt(a))return!1;var u=typeof i;return(u=="number"?dr(a)&&ci(i,a.length):u=="string"&&i in a)?qr(a[i],e):!1}function ko(e,i){if(Ne(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||wr(e)?!0:Rt.test(e)||!_t.test(e)||i!=null&&e in ut(i)}function n0(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Go(e){var i=aa(e),a=E[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(e===a)return!0;var u=Bo(a);return!!u&&e===u[0]}function s0(e){return!!Ou&&Ou in e}var a0=js?ui:hc;function Vn(e){var i=e&&e.constructor,a=typeof i=="function"&&i.prototype||dn;return e===a}function Oh(e){return e===e&&!bt(e)}function Ph(e,i){return function(a){return a==null?!1:a[e]===i&&(i!==r||e in ut(a))}}function o0(e){var i=fa(e,function(u){return a.size===O&&a.clear(),u}),a=i.cache;return i}function c0(e,i){var a=e[1],u=i[1],g=a|u,D=g<(ee|ue|c),T=u==c&&a==M||u==c&&a==_&&e[7].length<=i[8]||u==(c|_)&&i[7].length<=i[8]&&a==M;if(!(D||T))return e;u&ee&&(e[2]=i[2],g|=a&ee?0:j);var U=i[3];if(U){var V=e[3];e[3]=V?hh(V,U,i[4]):U,e[4]=V?vi(e[3],A):i[4]}return U=i[5],U&&(V=e[5],e[5]=V?lh(V,U,i[6]):U,e[6]=V?vi(e[5],A):i[6]),U=i[7],U&&(e[7]=U),u&c&&(e[8]=e[8]==null?i[8]:Jt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=g,e}function u0(e){var i=[];if(e!=null)for(var a in ut(e))i.push(a);return i}function h0(e){return Ls.call(e)}function Ch(e,i,a){return i=Bt(i===r?e.length-1:i,0),function(){for(var u=arguments,g=-1,D=Bt(u.length-i,0),T=Q(D);++g<D;)T[g]=u[i+g];g=-1;for(var U=Q(i+1);++g<i;)U[g]=u[g];return U[i]=a(T),Kt(e,this,U)}}function Ah(e,i){return i.length<2?e:qi(e,Tr(i,0,-1))}function l0(e,i){for(var a=e.length,u=Jt(i.length,a),g=fr(e);u--;){var D=i[u];e[u]=ci(D,a)?g[D]:r}return e}function Wo(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Th=Rh(eh),kn=xp||function(e,i){return Xe.setTimeout(e,i)},Yo=Rh(Fg);function Nh(e,i,a){var u=i+"";return Yo(e,r0(u,f0(Qg(u),a)))}function Rh(e){var i=0,a=0;return function(){var u=Ap(),g=I-(u-a);if(a=u,g>0){if(++i>=v)return arguments[0]}else i=0;return e.apply(r,arguments)}}function ca(e,i){var a=-1,u=e.length,g=u-1;for(i=i===r?u:i;++a<i;){var D=To(a,g),T=e[D];e[D]=e[a],e[a]=T}return e.length=i,e}var Fh=o0(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Ft,function(a,u,g,D){i.push(g?D.replace(qa,"$1"):u||a)}),i});function Wr(e){if(typeof e=="string"||wr(e))return e;var i=e+"";return i=="0"&&1/e==-L?"-0":i}function Bi(e){if(e!=null){try{return $s.call(e)}catch{}try{return e+""}catch{}}return""}function f0(e,i){return Or(ye,function(a){var u="_."+a[0];i&a[1]&&!Ns(e,u)&&e.push(u)}),e.sort()}function Uh(e){if(e instanceof Ye)return e.clone();var i=new Cr(e.__wrapped__,e.__chain__);return i.__actions__=fr(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function d0(e,i,a){(a?ir(e,i,a):i===r)?i=1:i=Bt(Le(i),0);var u=e==null?0:e.length;if(!u||i<1)return[];for(var g=0,D=0,T=Q(Ks(u/i));g<u;)T[D++]=Tr(e,g,g+=i);return T}function p0(e){for(var i=-1,a=e==null?0:e.length,u=0,g=[];++i<a;){var D=e[i];D&&(g[u++]=D)}return g}function g0(){var e=arguments.length;if(!e)return[];for(var i=Q(e-1),a=arguments[0],u=e;u--;)i[u-1]=arguments[u];return yi(Ne(a)?fr(a):[a],Gt(i,1))}var _0=Ke(function(e,i){return Ct(e)?zn(e,Gt(i,1,Ct,!0)):[]}),y0=Ke(function(e,i){var a=Nr(i);return Ct(a)&&(a=r),Ct(e)?zn(e,Gt(i,1,Ct,!0),we(a,2)):[]}),v0=Ke(function(e,i){var a=Nr(i);return Ct(a)&&(a=r),Ct(e)?zn(e,Gt(i,1,Ct,!0),r,a):[]});function b0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Le(i),Tr(e,i<0?0:i,u)):[]}function m0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Le(i),i=u-i,Tr(e,0,i<0?0:i)):[]}function w0(e,i){return e&&e.length?ea(e,we(i,3),!0,!0):[]}function E0(e,i){return e&&e.length?ea(e,we(i,3),!0):[]}function D0(e,i,a,u){var g=e==null?0:e.length;return g?(a&&typeof a!="number"&&ir(e,i,a)&&(a=0,u=g),gg(e,i,a,u)):[]}function jh(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var g=a==null?0:Le(a);return g<0&&(g=Bt(u+g,0)),Rs(e,we(i,3),g)}function $h(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var g=u-1;return a!==r&&(g=Le(a),g=a<0?Bt(u+g,0):Jt(g,u-1)),Rs(e,we(i,3),g,!0)}function Lh(e){var i=e==null?0:e.length;return i?Gt(e,1):[]}function S0(e){var i=e==null?0:e.length;return i?Gt(e,L):[]}function I0(e,i){var a=e==null?0:e.length;return a?(i=i===r?1:Le(i),Gt(e,i)):[]}function x0(e){for(var i=-1,a=e==null?0:e.length,u={};++i<a;){var g=e[i];u[g[0]]=g[1]}return u}function Mh(e){return e&&e.length?e[0]:r}function O0(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var g=a==null?0:Le(a);return g<0&&(g=Bt(u+g,0)),un(e,i,g)}function P0(e){var i=e==null?0:e.length;return i?Tr(e,0,-1):[]}var C0=Ke(function(e){var i=yt(e,jo);return i.length&&i[0]===e[0]?xo(i):[]}),A0=Ke(function(e){var i=Nr(e),a=yt(e,jo);return i===Nr(a)?i=r:a.pop(),a.length&&a[0]===e[0]?xo(a,we(i,2)):[]}),T0=Ke(function(e){var i=Nr(e),a=yt(e,jo);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===e[0]?xo(a,r,i):[]});function N0(e,i){return e==null?"":Pp.call(e,i)}function Nr(e){var i=e==null?0:e.length;return i?e[i-1]:r}function R0(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var g=u;return a!==r&&(g=Le(a),g=g<0?Bt(u+g,0):Jt(g,u-1)),i===i?fp(e,i,g):Rs(e,bu,g,!0)}function F0(e,i){return e&&e.length?Ju(e,Le(i)):r}var U0=Ke(zh);function zh(e,i){return e&&e.length&&i&&i.length?Ao(e,i):e}function j0(e,i,a){return e&&e.length&&i&&i.length?Ao(e,i,we(a,2)):e}function $0(e,i,a){return e&&e.length&&i&&i.length?Ao(e,i,r,a):e}var L0=oi(function(e,i){var a=e==null?0:e.length,u=Eo(e,i);return Qu(e,yt(i,function(g){return ci(g,a)?+g:g}).sort(uh)),u});function M0(e,i){var a=[];if(!(e&&e.length))return a;var u=-1,g=[],D=e.length;for(i=we(i,3);++u<D;){var T=e[u];i(T,u,e)&&(a.push(T),g.push(u))}return Qu(e,g),a}function Jo(e){return e==null?e:Np.call(e)}function z0(e,i,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&ir(e,i,a)?(i=0,a=u):(i=i==null?0:Le(i),a=a===r?u:Le(a)),Tr(e,i,a)):[]}function q0(e,i){return Qs(e,i)}function H0(e,i,a){return Ro(e,i,we(a,2))}function B0(e,i){var a=e==null?0:e.length;if(a){var u=Qs(e,i);if(u<a&&qr(e[u],i))return u}return-1}function K0(e,i){return Qs(e,i,!0)}function V0(e,i,a){return Ro(e,i,we(a,2),!0)}function k0(e,i){var a=e==null?0:e.length;if(a){var u=Qs(e,i,!0)-1;if(qr(e[u],i))return u}return-1}function G0(e){return e&&e.length?th(e):[]}function W0(e,i){return e&&e.length?th(e,we(i,2)):[]}function Y0(e){var i=e==null?0:e.length;return i?Tr(e,1,i):[]}function J0(e,i,a){return e&&e.length?(i=a||i===r?1:Le(i),Tr(e,0,i<0?0:i)):[]}function X0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Le(i),i=u-i,Tr(e,i<0?0:i,u)):[]}function Z0(e,i){return e&&e.length?ea(e,we(i,3),!1,!0):[]}function Q0(e,i){return e&&e.length?ea(e,we(i,3)):[]}var e1=Ke(function(e){return wi(Gt(e,1,Ct,!0))}),t1=Ke(function(e){var i=Nr(e);return Ct(i)&&(i=r),wi(Gt(e,1,Ct,!0),we(i,2))}),r1=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,wi(Gt(e,1,Ct,!0),r,i)});function i1(e){return e&&e.length?wi(e):[]}function n1(e,i){return e&&e.length?wi(e,we(i,2)):[]}function s1(e,i){return i=typeof i=="function"?i:r,e&&e.length?wi(e,r,i):[]}function Xo(e){if(!(e&&e.length))return[];var i=0;return e=_i(e,function(a){if(Ct(a))return i=Bt(a.length,i),!0}),po(i,function(a){return yt(e,ho(a))})}function qh(e,i){if(!(e&&e.length))return[];var a=Xo(e);return i==null?a:yt(a,function(u){return Kt(i,r,u)})}var a1=Ke(function(e,i){return Ct(e)?zn(e,i):[]}),o1=Ke(function(e){return Uo(_i(e,Ct))}),c1=Ke(function(e){var i=Nr(e);return Ct(i)&&(i=r),Uo(_i(e,Ct),we(i,2))}),u1=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,Uo(_i(e,Ct),r,i)}),h1=Ke(Xo);function l1(e,i){return sh(e||[],i||[],Mn)}function f1(e,i){return sh(e||[],i||[],Bn)}var d1=Ke(function(e){var i=e.length,a=i>1?e[i-1]:r;return a=typeof a=="function"?(e.pop(),a):r,qh(e,a)});function Hh(e){var i=E(e);return i.__chain__=!0,i}function p1(e,i){return i(e),e}function ua(e,i){return i(e)}var g1=oi(function(e){var i=e.length,a=i?e[0]:0,u=this.__wrapped__,g=function(D){return Eo(D,e)};return i>1||this.__actions__.length||!(u instanceof Ye)||!ci(a)?this.thru(g):(u=u.slice(a,+a+(i?1:0)),u.__actions__.push({func:ua,args:[g],thisArg:r}),new Cr(u,this.__chain__).thru(function(D){return i&&!D.length&&D.push(r),D}))});function _1(){return Hh(this)}function y1(){return new Cr(this.value(),this.__chain__)}function v1(){this.__values__===r&&(this.__values__=rl(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function b1(){return this}function m1(e){for(var i,a=this;a instanceof Ws;){var u=Uh(a);u.__index__=0,u.__values__=r,i?g.__wrapped__=u:i=u;var g=u;a=a.__wrapped__}return g.__wrapped__=e,i}function w1(){var e=this.__wrapped__;if(e instanceof Ye){var i=e;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:ua,args:[Jo],thisArg:r}),new Cr(i,this.__chain__)}return this.thru(Jo)}function E1(){return nh(this.__wrapped__,this.__actions__)}var D1=ta(function(e,i,a){nt.call(e,a)?++e[a]:si(e,a,1)});function S1(e,i,a){var u=Ne(e)?yu:pg;return a&&ir(e,i,a)&&(i=r),u(e,we(i,3))}function I1(e,i){var a=Ne(e)?_i:qu;return a(e,we(i,3))}var x1=gh(jh),O1=gh($h);function P1(e,i){return Gt(ha(e,i),1)}function C1(e,i){return Gt(ha(e,i),L)}function A1(e,i,a){return a=a===r?1:Le(a),Gt(ha(e,i),a)}function Bh(e,i){var a=Ne(e)?Or:mi;return a(e,we(i,3))}function Kh(e,i){var a=Ne(e)?Yd:zu;return a(e,we(i,3))}var T1=ta(function(e,i,a){nt.call(e,a)?e[a].push(i):si(e,a,[i])});function N1(e,i,a,u){e=dr(e)?e:wn(e),a=a&&!u?Le(a):0;var g=e.length;return a<0&&(a=Bt(g+a,0)),ga(e)?a<=g&&e.indexOf(i,a)>-1:!!g&&un(e,i,a)>-1}var R1=Ke(function(e,i,a){var u=-1,g=typeof i=="function",D=dr(e)?Q(e.length):[];return mi(e,function(T){D[++u]=g?Kt(i,T,a):qn(T,i,a)}),D}),F1=ta(function(e,i,a){si(e,a,i)});function ha(e,i){var a=Ne(e)?yt:Gu;return a(e,we(i,3))}function U1(e,i,a,u){return e==null?[]:(Ne(i)||(i=i==null?[]:[i]),a=u?r:a,Ne(a)||(a=a==null?[]:[a]),Xu(e,i,a))}var j1=ta(function(e,i,a){e[a?0:1].push(i)},function(){return[[],[]]});function $1(e,i,a){var u=Ne(e)?co:wu,g=arguments.length<3;return u(e,we(i,4),a,g,mi)}function L1(e,i,a){var u=Ne(e)?Jd:wu,g=arguments.length<3;return u(e,we(i,4),a,g,zu)}function M1(e,i){var a=Ne(e)?_i:qu;return a(e,da(we(i,3)))}function z1(e){var i=Ne(e)?ju:Ng;return i(e)}function q1(e,i,a){(a?ir(e,i,a):i===r)?i=1:i=Le(i);var u=Ne(e)?ug:Rg;return u(e,i)}function H1(e){var i=Ne(e)?hg:Ug;return i(e)}function B1(e){if(e==null)return 0;if(dr(e))return ga(e)?ln(e):e.length;var i=Xt(e);return i==Ie||i==xe?e.size:Po(e).length}function K1(e,i,a){var u=Ne(e)?uo:jg;return a&&ir(e,i,a)&&(i=r),u(e,we(i,3))}var V1=Ke(function(e,i){if(e==null)return[];var a=i.length;return a>1&&ir(e,i[0],i[1])?i=[]:a>2&&ir(i[0],i[1],i[2])&&(i=[i[0]]),Xu(e,Gt(i,1),[])}),la=Ip||function(){return Xe.Date.now()};function k1(e,i){if(typeof i!="function")throw new Pr(m);return e=Le(e),function(){if(--e<1)return i.apply(this,arguments)}}function Vh(e,i,a){return i=a?r:i,i=e&&i==null?e.length:i,ai(e,c,r,r,r,r,i)}function kh(e,i){var a;if(typeof i!="function")throw new Pr(m);return e=Le(e),function(){return--e>0&&(a=i.apply(this,arguments)),e<=1&&(i=r),a}}var Zo=Ke(function(e,i,a){var u=ee;if(a.length){var g=vi(a,bn(Zo));u|=N}return ai(e,u,i,a,g)}),Gh=Ke(function(e,i,a){var u=ee|ue;if(a.length){var g=vi(a,bn(Gh));u|=N}return ai(i,u,e,a,g)});function Wh(e,i,a){i=a?r:i;var u=ai(e,M,r,r,r,r,r,i);return u.placeholder=Wh.placeholder,u}function Yh(e,i,a){i=a?r:i;var u=ai(e,P,r,r,r,r,r,i);return u.placeholder=Yh.placeholder,u}function Jh(e,i,a){var u,g,D,T,U,V,ne=0,ae=!1,ce=!1,fe=!0;if(typeof e!="function")throw new Pr(m);i=Rr(i)||0,bt(a)&&(ae=!!a.leading,ce="maxWait"in a,D=ce?Bt(Rr(a.maxWait)||0,i):D,fe="trailing"in a?!!a.trailing:fe);function ve(At){var Hr=u,li=g;return u=g=r,ne=At,T=e.apply(li,Hr),T}function Ee(At){return ne=At,U=kn(Ge,i),ae?ve(At):T}function qe(At){var Hr=At-V,li=At-ne,gl=i-Hr;return ce?Jt(gl,D-li):gl}function De(At){var Hr=At-V,li=At-ne;return V===r||Hr>=i||Hr<0||ce&&li>=D}function Ge(){var At=la();if(De(At))return Ze(At);U=kn(Ge,qe(At))}function Ze(At){return U=r,fe&&u?ve(At):(u=g=r,T)}function Er(){U!==r&&ah(U),ne=0,u=V=g=U=r}function nr(){return U===r?T:Ze(la())}function Dr(){var At=la(),Hr=De(At);if(u=arguments,g=this,V=At,Hr){if(U===r)return Ee(V);if(ce)return ah(U),U=kn(Ge,i),ve(V)}return U===r&&(U=kn(Ge,i)),T}return Dr.cancel=Er,Dr.flush=nr,Dr}var G1=Ke(function(e,i){return Mu(e,1,i)}),W1=Ke(function(e,i,a){return Mu(e,Rr(i)||0,a)});function Y1(e){return ai(e,Z)}function fa(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Pr(m);var a=function(){var u=arguments,g=i?i.apply(this,u):u[0],D=a.cache;if(D.has(g))return D.get(g);var T=e.apply(this,u);return a.cache=D.set(g,T)||D,T};return a.cache=new(fa.Cache||ni),a}fa.Cache=ni;function da(e){if(typeof e!="function")throw new Pr(m);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function J1(e){return kh(2,e)}var X1=$g(function(e,i){i=i.length==1&&Ne(i[0])?yt(i[0],br(we())):yt(Gt(i,1),br(we()));var a=i.length;return Ke(function(u){for(var g=-1,D=Jt(u.length,a);++g<D;)u[g]=i[g].call(this,u[g]);return Kt(e,this,u)})}),Qo=Ke(function(e,i){var a=vi(i,bn(Qo));return ai(e,N,r,i,a)}),Xh=Ke(function(e,i){var a=vi(i,bn(Xh));return ai(e,S,r,i,a)}),Z1=oi(function(e,i){return ai(e,_,r,r,r,i)});function Q1(e,i){if(typeof e!="function")throw new Pr(m);return i=i===r?i:Le(i),Ke(e,i)}function e_(e,i){if(typeof e!="function")throw new Pr(m);return i=i==null?0:Bt(Le(i),0),Ke(function(a){var u=a[i],g=Di(a,0,i);return u&&yi(g,u),Kt(e,this,g)})}function t_(e,i,a){var u=!0,g=!0;if(typeof e!="function")throw new Pr(m);return bt(a)&&(u="leading"in a?!!a.leading:u,g="trailing"in a?!!a.trailing:g),Jh(e,i,{leading:u,maxWait:i,trailing:g})}function r_(e){return Vh(e,1)}function i_(e,i){return Qo($o(i),e)}function n_(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function s_(e){return Ar(e,H)}function a_(e,i){return i=typeof i=="function"?i:r,Ar(e,H,i)}function o_(e){return Ar(e,q|H)}function c_(e,i){return i=typeof i=="function"?i:r,Ar(e,q|H,i)}function u_(e,i){return i==null||Lu(e,i,Vt(i))}function qr(e,i){return e===i||e!==e&&i!==i}var h_=sa(Io),l_=sa(function(e,i){return e>=i}),Ki=Ku(function(){return arguments}())?Ku:function(e){return xt(e)&&nt.call(e,"callee")&&!Au.call(e,"callee")},Ne=Q.isArray,f_=tr?br(tr):mg;function dr(e){return e!=null&&pa(e.length)&&!ui(e)}function Ct(e){return xt(e)&&dr(e)}function d_(e){return e===!0||e===!1||xt(e)&&rr(e)==G}var Si=Op||hc,p_=Lr?br(Lr):wg;function g_(e){return xt(e)&&e.nodeType===1&&!Gn(e)}function __(e){if(e==null)return!0;if(dr(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||Si(e)||mn(e)||Ki(e)))return!e.length;var i=Xt(e);if(i==Ie||i==xe)return!e.size;if(Vn(e))return!Po(e).length;for(var a in e)if(nt.call(e,a))return!1;return!0}function y_(e,i){return Hn(e,i)}function v_(e,i,a){a=typeof a=="function"?a:r;var u=a?a(e,i):r;return u===r?Hn(e,i,r,a):!!u}function ec(e){if(!xt(e))return!1;var i=rr(e);return i==R||i==h||typeof e.message=="string"&&typeof e.name=="string"&&!Gn(e)}function b_(e){return typeof e=="number"&&Nu(e)}function ui(e){if(!bt(e))return!1;var i=rr(e);return i==he||i==pe||i==Y||i==pt}function Zh(e){return typeof e=="number"&&e==Le(e)}function pa(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=J}function bt(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function xt(e){return e!=null&&typeof e=="object"}var Qh=xr?br(xr):Dg;function m_(e,i){return e===i||Oo(e,i,Ko(i))}function w_(e,i,a){return a=typeof a=="function"?a:r,Oo(e,i,Ko(i),a)}function E_(e){return el(e)&&e!=+e}function D_(e){if(a0(e))throw new Ae(f);return Vu(e)}function S_(e){return e===null}function I_(e){return e==null}function el(e){return typeof e=="number"||xt(e)&&rr(e)==He}function Gn(e){if(!xt(e)||rr(e)!=$e)return!1;var i=qs(e);if(i===null)return!0;var a=nt.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&$s.call(a)==wp}var tc=Vr?br(Vr):Sg;function x_(e){return Zh(e)&&e>=-J&&e<=J}var tl=Nn?br(Nn):Ig;function ga(e){return typeof e=="string"||!Ne(e)&&xt(e)&&rr(e)==Re}function wr(e){return typeof e=="symbol"||xt(e)&&rr(e)==Fe}var mn=ji?br(ji):xg;function O_(e){return e===r}function P_(e){return xt(e)&&Xt(e)==Pe}function C_(e){return xt(e)&&rr(e)==Ue}var A_=sa(Co),T_=sa(function(e,i){return e<=i});function rl(e){if(!e)return[];if(dr(e))return ga(e)?Mr(e):fr(e);if(Fn&&e[Fn])return up(e[Fn]());var i=Xt(e),a=i==Ie?_o:i==xe?Fs:wn;return a(e)}function hi(e){if(!e)return e===0?e:0;if(e=Rr(e),e===L||e===-L){var i=e<0?-1:1;return i*C}return e===e?e:0}function Le(e){var i=hi(e),a=i%1;return i===i?a?i-a:i:0}function il(e){return e?zi(Le(e),0,te):0}function Rr(e){if(typeof e=="number")return e;if(wr(e))return k;if(bt(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=bt(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Eu(e);var a=Ka.test(e);return a||ka.test(e)?Te(e.slice(2),a?2:8):Ba.test(e)?k:+e}function nl(e){return Gr(e,pr(e))}function N_(e){return e?zi(Le(e),-J,J):e===0?e:0}function it(e){return e==null?"":mr(e)}var R_=yn(function(e,i){if(Vn(i)||dr(i)){Gr(i,Vt(i),e);return}for(var a in i)nt.call(i,a)&&Mn(e,a,i[a])}),sl=yn(function(e,i){Gr(i,pr(i),e)}),_a=yn(function(e,i,a,u){Gr(i,pr(i),e,u)}),F_=yn(function(e,i,a,u){Gr(i,Vt(i),e,u)}),U_=oi(Eo);function j_(e,i){var a=_n(e);return i==null?a:$u(a,i)}var $_=Ke(function(e,i){e=ut(e);var a=-1,u=i.length,g=u>2?i[2]:r;for(g&&ir(i[0],i[1],g)&&(u=1);++a<u;)for(var D=i[a],T=pr(D),U=-1,V=T.length;++U<V;){var ne=T[U],ae=e[ne];(ae===r||qr(ae,dn[ne])&&!nt.call(e,ne))&&(e[ne]=D[ne])}return e}),L_=Ke(function(e){return e.push(r,Eh),Kt(al,r,e)});function M_(e,i){return vu(e,we(i,3),kr)}function z_(e,i){return vu(e,we(i,3),So)}function q_(e,i){return e==null?e:Do(e,we(i,3),pr)}function H_(e,i){return e==null?e:Hu(e,we(i,3),pr)}function B_(e,i){return e&&kr(e,we(i,3))}function K_(e,i){return e&&So(e,we(i,3))}function V_(e){return e==null?[]:Xs(e,Vt(e))}function k_(e){return e==null?[]:Xs(e,pr(e))}function rc(e,i,a){var u=e==null?r:qi(e,i);return u===r?a:u}function G_(e,i){return e!=null&&Ih(e,i,_g)}function ic(e,i){return e!=null&&Ih(e,i,yg)}var W_=yh(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=Ls.call(i)),e[i]=a},sc(gr)),Y_=yh(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=Ls.call(i)),nt.call(e,i)?e[i].push(a):e[i]=[a]},we),J_=Ke(qn);function Vt(e){return dr(e)?Uu(e):Po(e)}function pr(e){return dr(e)?Uu(e,!0):Og(e)}function X_(e,i){var a={};return i=we(i,3),kr(e,function(u,g,D){si(a,i(u,g,D),u)}),a}function Z_(e,i){var a={};return i=we(i,3),kr(e,function(u,g,D){si(a,g,i(u,g,D))}),a}var Q_=yn(function(e,i,a){Zs(e,i,a)}),al=yn(function(e,i,a,u){Zs(e,i,a,u)}),ey=oi(function(e,i){var a={};if(e==null)return a;var u=!1;i=yt(i,function(D){return D=Ei(D,e),u||(u=D.length>1),D}),Gr(e,Ho(e),a),u&&(a=Ar(a,q|W|H,Wg));for(var g=i.length;g--;)Fo(a,i[g]);return a});function ty(e,i){return ol(e,da(we(i)))}var ry=oi(function(e,i){return e==null?{}:Cg(e,i)});function ol(e,i){if(e==null)return{};var a=yt(Ho(e),function(u){return[u]});return i=we(i),Zu(e,a,function(u,g){return i(u,g[0])})}function iy(e,i,a){i=Ei(i,e);var u=-1,g=i.length;for(g||(g=1,e=r);++u<g;){var D=e==null?r:e[Wr(i[u])];D===r&&(u=g,D=a),e=ui(D)?D.call(e):D}return e}function ny(e,i,a){return e==null?e:Bn(e,i,a)}function sy(e,i,a,u){return u=typeof u=="function"?u:r,e==null?e:Bn(e,i,a,u)}var cl=mh(Vt),ul=mh(pr);function ay(e,i,a){var u=Ne(e),g=u||Si(e)||mn(e);if(i=we(i,4),a==null){var D=e&&e.constructor;g?a=u?new D:[]:bt(e)?a=ui(D)?_n(qs(e)):{}:a={}}return(g?Or:kr)(e,function(T,U,V){return i(a,T,U,V)}),a}function oy(e,i){return e==null?!0:Fo(e,i)}function cy(e,i,a){return e==null?e:ih(e,i,$o(a))}function uy(e,i,a,u){return u=typeof u=="function"?u:r,e==null?e:ih(e,i,$o(a),u)}function wn(e){return e==null?[]:go(e,Vt(e))}function hy(e){return e==null?[]:go(e,pr(e))}function ly(e,i,a){return a===r&&(a=i,i=r),a!==r&&(a=Rr(a),a=a===a?a:0),i!==r&&(i=Rr(i),i=i===i?i:0),zi(Rr(e),i,a)}function fy(e,i,a){return i=hi(i),a===r?(a=i,i=0):a=hi(a),e=Rr(e),vg(e,i,a)}function dy(e,i,a){if(a&&typeof a!="boolean"&&ir(e,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&i===r?(e=0,i=1):(e=hi(e),i===r?(i=e,e=0):i=hi(i)),e>i){var u=e;e=i,i=u}if(a||e%1||i%1){var g=Ru();return Jt(e+g*(i-e+ot("1e-"+((g+"").length-1))),i)}return To(e,i)}var py=vn(function(e,i,a){return i=i.toLowerCase(),e+(a?hl(i):i)});function hl(e){return nc(it(e).toLowerCase())}function ll(e){return e=it(e),e&&e.replace(ti,np).replace(so,"")}function gy(e,i,a){e=it(e),i=mr(i);var u=e.length;a=a===r?u:zi(Le(a),0,u);var g=a;return a-=i.length,a>=0&&e.slice(a,g)==i}function _y(e){return e=it(e),e&&gt.test(e)?e.replace(Ti,sp):e}function yy(e){return e=it(e),e&&Ut.test(e)?e.replace(Dt,"\\$&"):e}var vy=vn(function(e,i,a){return e+(a?"-":"")+i.toLowerCase()}),by=vn(function(e,i,a){return e+(a?" ":"")+i.toLowerCase()}),my=ph("toLowerCase");function wy(e,i,a){e=it(e),i=Le(i);var u=i?ln(e):0;if(!i||u>=i)return e;var g=(i-u)/2;return na(Vs(g),a)+e+na(Ks(g),a)}function Ey(e,i,a){e=it(e),i=Le(i);var u=i?ln(e):0;return i&&u<i?e+na(i-u,a):e}function Dy(e,i,a){e=it(e),i=Le(i);var u=i?ln(e):0;return i&&u<i?na(i-u,a)+e:e}function Sy(e,i,a){return a||i==null?i=0:i&&(i=+i),Tp(it(e).replace(St,""),i||0)}function Iy(e,i,a){return(a?ir(e,i,a):i===r)?i=1:i=Le(i),No(it(e),i)}function xy(){var e=arguments,i=it(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var Oy=vn(function(e,i,a){return e+(a?"_":"")+i.toLowerCase()});function Py(e,i,a){return a&&typeof a!="number"&&ir(e,i,a)&&(i=a=r),a=a===r?te:a>>>0,a?(e=it(e),e&&(typeof i=="string"||i!=null&&!tc(i))&&(i=mr(i),!i&&hn(e))?Di(Mr(e),0,a):e.split(i,a)):[]}var Cy=vn(function(e,i,a){return e+(a?" ":"")+nc(i)});function Ay(e,i,a){return e=it(e),a=a==null?0:zi(Le(a),0,e.length),i=mr(i),e.slice(a,a+i.length)==i}function Ty(e,i,a){var u=E.templateSettings;a&&ir(e,i,a)&&(i=r),e=it(e),i=_a({},i,u,wh);var g=_a({},i.imports,u.imports,wh),D=Vt(g),T=go(g,D),U,V,ne=0,ae=i.interpolate||tn,ce="__p += '",fe=yo((i.escape||tn).source+"|"+ae.source+"|"+(ae===vt?Ha:tn).source+"|"+(i.evaluate||tn).source+"|$","g"),ve="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ao+"]")+`
`;e.replace(fe,function(De,Ge,Ze,Er,nr,Dr){return Ze||(Ze=Er),ce+=e.slice(ne,Dr).replace(Wa,ap),Ge&&(U=!0,ce+=`' +
__e(`+Ge+`) +
'`),nr&&(V=!0,ce+=`';
`+nr+`;
__p += '`),Ze&&(ce+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ne=Dr+De.length,De}),ce+=`';
`;var Ee=nt.call(i,"variable")&&i.variable;if(!Ee)ce=`with (obj) {
`+ce+`
}
`;else if(za.test(Ee))throw new Ae(y);ce=(V?ce.replace(Br,""):ce).replace(er,"$1").replace(ei,"$1;"),ce="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var qe=dl(function(){return rt(D,ve+"return "+ce).apply(r,T)});if(qe.source=ce,ec(qe))throw qe;return qe}function Ny(e){return it(e).toLowerCase()}function Ry(e){return it(e).toUpperCase()}function Fy(e,i,a){if(e=it(e),e&&(a||i===r))return Eu(e);if(!e||!(i=mr(i)))return e;var u=Mr(e),g=Mr(i),D=Du(u,g),T=Su(u,g)+1;return Di(u,D,T).join("")}function Uy(e,i,a){if(e=it(e),e&&(a||i===r))return e.slice(0,xu(e)+1);if(!e||!(i=mr(i)))return e;var u=Mr(e),g=Su(u,Mr(i))+1;return Di(u,0,g).join("")}function jy(e,i,a){if(e=it(e),e&&(a||i===r))return e.replace(St,"");if(!e||!(i=mr(i)))return e;var u=Mr(e),g=Du(u,Mr(i));return Di(u,g).join("")}function $y(e,i){var a=l,u=d;if(bt(i)){var g="separator"in i?i.separator:g;a="length"in i?Le(i.length):a,u="omission"in i?mr(i.omission):u}e=it(e);var D=e.length;if(hn(e)){var T=Mr(e);D=T.length}if(a>=D)return e;var U=a-ln(u);if(U<1)return u;var V=T?Di(T,0,U).join(""):e.slice(0,U);if(g===r)return V+u;if(T&&(U+=V.length-U),tc(g)){if(e.slice(U).search(g)){var ne,ae=V;for(g.global||(g=yo(g.source,it(Ir.exec(g))+"g")),g.lastIndex=0;ne=g.exec(ae);)var ce=ne.index;V=V.slice(0,ce===r?U:ce)}}else if(e.indexOf(mr(g),U)!=U){var fe=V.lastIndexOf(g);fe>-1&&(V=V.slice(0,fe))}return V+u}function Ly(e){return e=it(e),e&&mt.test(e)?e.replace(pi,dp):e}var My=vn(function(e,i,a){return e+(a?" ":"")+i.toUpperCase()}),nc=ph("toUpperCase");function fl(e,i,a){return e=it(e),i=a?r:i,i===r?cp(e)?_p(e):Qd(e):e.match(i)||[]}var dl=Ke(function(e,i){try{return Kt(e,r,i)}catch(a){return ec(a)?a:new Ae(a)}}),zy=oi(function(e,i){return Or(i,function(a){a=Wr(a),si(e,a,Zo(e[a],e))}),e});function qy(e){var i=e==null?0:e.length,a=we();return e=i?yt(e,function(u){if(typeof u[1]!="function")throw new Pr(m);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var g=-1;++g<i;){var D=e[g];if(Kt(D[0],this,u))return Kt(D[1],this,u)}})}function Hy(e){return dg(Ar(e,q))}function sc(e){return function(){return e}}function By(e,i){return e==null||e!==e?i:e}var Ky=_h(),Vy=_h(!0);function gr(e){return e}function ac(e){return ku(typeof e=="function"?e:Ar(e,q))}function ky(e){return Wu(Ar(e,q))}function Gy(e,i){return Yu(e,Ar(i,q))}var Wy=Ke(function(e,i){return function(a){return qn(a,e,i)}}),Yy=Ke(function(e,i){return function(a){return qn(e,a,i)}});function oc(e,i,a){var u=Vt(i),g=Xs(i,u);a==null&&!(bt(i)&&(g.length||!u.length))&&(a=i,i=e,e=this,g=Xs(i,Vt(i)));var D=!(bt(a)&&"chain"in a)||!!a.chain,T=ui(e);return Or(g,function(U){var V=i[U];e[U]=V,T&&(e.prototype[U]=function(){var ne=this.__chain__;if(D||ne){var ae=e(this.__wrapped__),ce=ae.__actions__=fr(this.__actions__);return ce.push({func:V,args:arguments,thisArg:e}),ae.__chain__=ne,ae}return V.apply(e,yi([this.value()],arguments))})}),e}function Jy(){return Xe._===this&&(Xe._=Ep),this}function cc(){}function Xy(e){return e=Le(e),Ke(function(i){return Ju(i,e)})}var Zy=Mo(yt),Qy=Mo(yu),ev=Mo(uo);function pl(e){return ko(e)?ho(Wr(e)):Ag(e)}function tv(e){return function(i){return e==null?r:qi(e,i)}}var rv=vh(),iv=vh(!0);function uc(){return[]}function hc(){return!1}function nv(){return{}}function sv(){return""}function av(){return!0}function ov(e,i){if(e=Le(e),e<1||e>J)return[];var a=te,u=Jt(e,te);i=we(i),e-=te;for(var g=po(u,i);++a<e;)i(a);return g}function cv(e){return Ne(e)?yt(e,Wr):wr(e)?[e]:fr(Fh(it(e)))}function uv(e){var i=++mp;return it(e)+i}var hv=ia(function(e,i){return e+i},0),lv=zo("ceil"),fv=ia(function(e,i){return e/i},1),dv=zo("floor");function pv(e){return e&&e.length?Js(e,gr,Io):r}function gv(e,i){return e&&e.length?Js(e,we(i,2),Io):r}function _v(e){return mu(e,gr)}function yv(e,i){return mu(e,we(i,2))}function vv(e){return e&&e.length?Js(e,gr,Co):r}function bv(e,i){return e&&e.length?Js(e,we(i,2),Co):r}var mv=ia(function(e,i){return e*i},1),wv=zo("round"),Ev=ia(function(e,i){return e-i},0);function Dv(e){return e&&e.length?fo(e,gr):0}function Sv(e,i){return e&&e.length?fo(e,we(i,2)):0}return E.after=k1,E.ary=Vh,E.assign=R_,E.assignIn=sl,E.assignInWith=_a,E.assignWith=F_,E.at=U_,E.before=kh,E.bind=Zo,E.bindAll=zy,E.bindKey=Gh,E.castArray=n_,E.chain=Hh,E.chunk=d0,E.compact=p0,E.concat=g0,E.cond=qy,E.conforms=Hy,E.constant=sc,E.countBy=D1,E.create=j_,E.curry=Wh,E.curryRight=Yh,E.debounce=Jh,E.defaults=$_,E.defaultsDeep=L_,E.defer=G1,E.delay=W1,E.difference=_0,E.differenceBy=y0,E.differenceWith=v0,E.drop=b0,E.dropRight=m0,E.dropRightWhile=w0,E.dropWhile=E0,E.fill=D0,E.filter=I1,E.flatMap=P1,E.flatMapDeep=C1,E.flatMapDepth=A1,E.flatten=Lh,E.flattenDeep=S0,E.flattenDepth=I0,E.flip=Y1,E.flow=Ky,E.flowRight=Vy,E.fromPairs=x0,E.functions=V_,E.functionsIn=k_,E.groupBy=T1,E.initial=P0,E.intersection=C0,E.intersectionBy=A0,E.intersectionWith=T0,E.invert=W_,E.invertBy=Y_,E.invokeMap=R1,E.iteratee=ac,E.keyBy=F1,E.keys=Vt,E.keysIn=pr,E.map=ha,E.mapKeys=X_,E.mapValues=Z_,E.matches=ky,E.matchesProperty=Gy,E.memoize=fa,E.merge=Q_,E.mergeWith=al,E.method=Wy,E.methodOf=Yy,E.mixin=oc,E.negate=da,E.nthArg=Xy,E.omit=ey,E.omitBy=ty,E.once=J1,E.orderBy=U1,E.over=Zy,E.overArgs=X1,E.overEvery=Qy,E.overSome=ev,E.partial=Qo,E.partialRight=Xh,E.partition=j1,E.pick=ry,E.pickBy=ol,E.property=pl,E.propertyOf=tv,E.pull=U0,E.pullAll=zh,E.pullAllBy=j0,E.pullAllWith=$0,E.pullAt=L0,E.range=rv,E.rangeRight=iv,E.rearg=Z1,E.reject=M1,E.remove=M0,E.rest=Q1,E.reverse=Jo,E.sampleSize=q1,E.set=ny,E.setWith=sy,E.shuffle=H1,E.slice=z0,E.sortBy=V1,E.sortedUniq=G0,E.sortedUniqBy=W0,E.split=Py,E.spread=e_,E.tail=Y0,E.take=J0,E.takeRight=X0,E.takeRightWhile=Z0,E.takeWhile=Q0,E.tap=p1,E.throttle=t_,E.thru=ua,E.toArray=rl,E.toPairs=cl,E.toPairsIn=ul,E.toPath=cv,E.toPlainObject=nl,E.transform=ay,E.unary=r_,E.union=e1,E.unionBy=t1,E.unionWith=r1,E.uniq=i1,E.uniqBy=n1,E.uniqWith=s1,E.unset=oy,E.unzip=Xo,E.unzipWith=qh,E.update=cy,E.updateWith=uy,E.values=wn,E.valuesIn=hy,E.without=a1,E.words=fl,E.wrap=i_,E.xor=o1,E.xorBy=c1,E.xorWith=u1,E.zip=h1,E.zipObject=l1,E.zipObjectDeep=f1,E.zipWith=d1,E.entries=cl,E.entriesIn=ul,E.extend=sl,E.extendWith=_a,oc(E,E),E.add=hv,E.attempt=dl,E.camelCase=py,E.capitalize=hl,E.ceil=lv,E.clamp=ly,E.clone=s_,E.cloneDeep=o_,E.cloneDeepWith=c_,E.cloneWith=a_,E.conformsTo=u_,E.deburr=ll,E.defaultTo=By,E.divide=fv,E.endsWith=gy,E.eq=qr,E.escape=_y,E.escapeRegExp=yy,E.every=S1,E.find=x1,E.findIndex=jh,E.findKey=M_,E.findLast=O1,E.findLastIndex=$h,E.findLastKey=z_,E.floor=dv,E.forEach=Bh,E.forEachRight=Kh,E.forIn=q_,E.forInRight=H_,E.forOwn=B_,E.forOwnRight=K_,E.get=rc,E.gt=h_,E.gte=l_,E.has=G_,E.hasIn=ic,E.head=Mh,E.identity=gr,E.includes=N1,E.indexOf=O0,E.inRange=fy,E.invoke=J_,E.isArguments=Ki,E.isArray=Ne,E.isArrayBuffer=f_,E.isArrayLike=dr,E.isArrayLikeObject=Ct,E.isBoolean=d_,E.isBuffer=Si,E.isDate=p_,E.isElement=g_,E.isEmpty=__,E.isEqual=y_,E.isEqualWith=v_,E.isError=ec,E.isFinite=b_,E.isFunction=ui,E.isInteger=Zh,E.isLength=pa,E.isMap=Qh,E.isMatch=m_,E.isMatchWith=w_,E.isNaN=E_,E.isNative=D_,E.isNil=I_,E.isNull=S_,E.isNumber=el,E.isObject=bt,E.isObjectLike=xt,E.isPlainObject=Gn,E.isRegExp=tc,E.isSafeInteger=x_,E.isSet=tl,E.isString=ga,E.isSymbol=wr,E.isTypedArray=mn,E.isUndefined=O_,E.isWeakMap=P_,E.isWeakSet=C_,E.join=N0,E.kebabCase=vy,E.last=Nr,E.lastIndexOf=R0,E.lowerCase=by,E.lowerFirst=my,E.lt=A_,E.lte=T_,E.max=pv,E.maxBy=gv,E.mean=_v,E.meanBy=yv,E.min=vv,E.minBy=bv,E.stubArray=uc,E.stubFalse=hc,E.stubObject=nv,E.stubString=sv,E.stubTrue=av,E.multiply=mv,E.nth=F0,E.noConflict=Jy,E.noop=cc,E.now=la,E.pad=wy,E.padEnd=Ey,E.padStart=Dy,E.parseInt=Sy,E.random=dy,E.reduce=$1,E.reduceRight=L1,E.repeat=Iy,E.replace=xy,E.result=iy,E.round=wv,E.runInContext=K,E.sample=z1,E.size=B1,E.snakeCase=Oy,E.some=K1,E.sortedIndex=q0,E.sortedIndexBy=H0,E.sortedIndexOf=B0,E.sortedLastIndex=K0,E.sortedLastIndexBy=V0,E.sortedLastIndexOf=k0,E.startCase=Cy,E.startsWith=Ay,E.subtract=Ev,E.sum=Dv,E.sumBy=Sv,E.template=Ty,E.times=ov,E.toFinite=hi,E.toInteger=Le,E.toLength=il,E.toLower=Ny,E.toNumber=Rr,E.toSafeInteger=N_,E.toString=it,E.toUpper=Ry,E.trim=Fy,E.trimEnd=Uy,E.trimStart=jy,E.truncate=$y,E.unescape=Ly,E.uniqueId=uv,E.upperCase=My,E.upperFirst=nc,E.each=Bh,E.eachRight=Kh,E.first=Mh,oc(E,function(){var e={};return kr(E,function(i,a){nt.call(E.prototype,a)||(e[a]=i)}),e}(),{chain:!1}),E.VERSION=s,Or(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){E[e].placeholder=E}),Or(["drop","take"],function(e,i){Ye.prototype[e]=function(a){a=a===r?1:Bt(Le(a),0);var u=this.__filtered__&&!i?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Jt(a,u.__takeCount__):u.__views__.push({size:Jt(a,te),type:e+(u.__dir__<0?"Right":"")}),u},Ye.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),Or(["filter","map","takeWhile"],function(e,i){var a=i+1,u=a==b||a==F;Ye.prototype[e]=function(g){var D=this.clone();return D.__iteratees__.push({iteratee:we(g,3),type:a}),D.__filtered__=D.__filtered__||u,D}}),Or(["head","last"],function(e,i){var a="take"+(i?"Right":"");Ye.prototype[e]=function(){return this[a](1).value()[0]}}),Or(["initial","tail"],function(e,i){var a="drop"+(i?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(gr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,i){return typeof e=="function"?new Ye(this):this.map(function(a){return qn(a,e,i)})}),Ye.prototype.reject=function(e){return this.filter(da(we(e)))},Ye.prototype.slice=function(e,i){e=Le(e);var a=this;return a.__filtered__&&(e>0||i<0)?new Ye(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),i!==r&&(i=Le(i),a=i<0?a.dropRight(-i):a.take(i-e)),a)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(te)},kr(Ye.prototype,function(e,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),g=E[u?"take"+(i=="last"?"Right":""):i],D=u||/^find/.test(i);g&&(E.prototype[i]=function(){var T=this.__wrapped__,U=u?[1]:arguments,V=T instanceof Ye,ne=U[0],ae=V||Ne(T),ce=function(Ge){var Ze=g.apply(E,yi([Ge],U));return u&&fe?Ze[0]:Ze};ae&&a&&typeof ne=="function"&&ne.length!=1&&(V=ae=!1);var fe=this.__chain__,ve=!!this.__actions__.length,Ee=D&&!fe,qe=V&&!ve;if(!D&&ae){T=qe?T:new Ye(this);var De=e.apply(T,U);return De.__actions__.push({func:ua,args:[ce],thisArg:r}),new Cr(De,fe)}return Ee&&qe?e.apply(this,U):(De=this.thru(ce),Ee?u?De.value()[0]:De.value():De)})}),Or(["pop","push","shift","sort","splice","unshift"],function(e){var i=Us[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);E.prototype[e]=function(){var g=arguments;if(u&&!this.__chain__){var D=this.value();return i.apply(Ne(D)?D:[],g)}return this[a](function(T){return i.apply(Ne(T)?T:[],g)})}}),kr(Ye.prototype,function(e,i){var a=E[i];if(a){var u=a.name+"";nt.call(gn,u)||(gn[u]=[]),gn[u].push({name:i,func:a})}}),gn[ra(r,ue).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Lp,Ye.prototype.reverse=Mp,Ye.prototype.value=zp,E.prototype.at=g1,E.prototype.chain=_1,E.prototype.commit=y1,E.prototype.next=v1,E.prototype.plant=m1,E.prototype.reverse=w1,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=E1,E.prototype.first=E.prototype.head,Fn&&(E.prototype[Fn]=b1),E},fn=yp();Pt?((Pt.exports=fn)._=fn,ct._=fn):Xe._=fn}).call(ss)})(Kc,Kc.exports);var x2=Object.defineProperty,O2=Object.defineProperties,P2=Object.getOwnPropertyDescriptors,Pf=Object.getOwnPropertySymbols,C2=Object.prototype.hasOwnProperty,A2=Object.prototype.propertyIsEnumerable,Cf=(n,t,r)=>t in n?x2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,va=(n,t)=>{for(var r in t||(t={}))C2.call(t,r)&&Cf(n,r,t[r]);if(Pf)for(var r of Pf(t))A2.call(t,r)&&Cf(n,r,t[r]);return n},T2=(n,t)=>O2(n,P2(t));function jr(n,t,r){let s;const o=Vc(n);return t.rpcMap&&(s=t.rpcMap[o]),s||(s=`${I2}?chainId=eip155:${o}&projectId=${r}`),s}function Vc(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function N2(n,t){if(!t.includes(n))throw new Error(`Chain '${n}' not approved. Please use one of the following: ${t.toString()}`)}function R2(n){return n.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function F2(n,t){const r=Object.keys(t.namespaces).filter(o=>o.includes(n));if(!r.length)return[];const s=[];return r.forEach(o=>{const f=t.namespaces[o].accounts;s.push(...f)}),s}function U2(n,t={}){const r=Af(n),s=Af(t);return Kc.exports.merge(r,s)}function Af(n){var t,r,s,o;const f={};if(!xn(n))return f;for(const[m,y]of Object.entries(n)){const w=fd(m)?[m]:y.chains,O=y.methods||[],A=y.events||[],q=y.rpcMap||{},W=wa(m);f[W]=T2(va(va({},f[W]),y),{chains:_c(w,(t=f[W])==null?void 0:t.chains),methods:_c(O,(r=f[W])==null?void 0:r.methods),events:_c(A,(s=f[W])==null?void 0:s.events),rpcMap:va(va({},q),(o=f[W])==null?void 0:o.rpcMap)})}return f}const en=(n,t)=>{const r=s=>{s.request!==t.request||s.topic!==t.topic||(n.events.removeListener("session_request_sent",r),j2(t,n.core.storage))};n.on("session_request_sent",r)};async function j2(n,t){try{const r=await t.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const f=`${o}/wc?requestId=${n.id}&sessionTopic=${n.topic}`,m=od();m===Yi.browser?window.open(f,"_self","noreferrer noopener"):m===Yi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(f)}catch(r){console.error(r)}}const Gd={},Nt=n=>Gd[n],Pc=(n,t)=>{Gd[n]=t};class $2{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(en(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace);return typeof s>"u"?void 0:new Pi(new Xi(s,Nt("disableProviderPing")))}}class L2{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){var r;switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?(en(this.client,t),await this.client.request(t)):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){const s=Vc(t);if(!this.httpProviders[s]){const o=r||jr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Nt("disableProviderPing")))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const o=Vc(r);t[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}handleSwitchChain(t){const r=parseInt(t,16),s=`${this.name}:${r}`;N2(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class M2{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(en(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Nt("disableProviderPing")))}}class z2{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(en(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Nt("disableProviderPing")))}}class q2{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(en(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);t[r]=this.createHttpProvider(r,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);return typeof s>"u"?void 0:new Pi(new Xi(s,Nt("disableProviderPing")))}}class H2{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(en(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Nt("disableProviderPing")))}}class B2{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(en(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Nt("disableProviderPing")))}}var K2=Object.defineProperty,V2=Object.defineProperties,k2=Object.getOwnPropertyDescriptors,Tf=Object.getOwnPropertySymbols,G2=Object.prototype.hasOwnProperty,W2=Object.prototype.propertyIsEnumerable,Nf=(n,t,r)=>t in n?K2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ba=(n,t)=>{for(var r in t||(t={}))G2.call(t,r)&&Nf(n,r,t[r]);if(Tf)for(var r of Tf(t))W2.call(t,r)&&Nf(n,r,t[r]);return n},Cc=(n,t)=>V2(n,k2(t));class gu{constructor(t){this.events=new Yc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||xf})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new gu(t);return await r.initialize(),r}async request(t,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:ba({},t),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Tt("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(f=>{this.session=f}).catch(f=>{if(f.message!==Vd)throw f;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{const[s,o]=this.validateChain(t);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(di(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await w2.init({logger:this.providerOpts.logger||xf,relayUrl:this.providerOpts.relayUrl||E2,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>wa(r)))];Pc("client",this.client),Pc("events",this.events),Pc("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const s=F2(r,this.session),o=R2(s),f=U2(this.namespaces,this.optionalNamespaces),m=Cc(ba({},f[r]),{accounts:s,chains:o});switch(r){case"eip155":this.rpcProviders[r]=new L2({namespace:m});break;case"solana":this.rpcProviders[r]=new M2({namespace:m});break;case"cosmos":this.rpcProviders[r]=new z2({namespace:m});break;case"polkadot":this.rpcProviders[r]=new $2({namespace:m});break;case"cip34":this.rpcProviders[r]=new q2({namespace:m});break;case"elrond":this.rpcProviders[r]=new H2({namespace:m});break;case"multiversx":this.rpcProviders[r]=new B2({namespace:m});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,f=(s=this.client)==null?void 0:s.session.get(t);this.session=Cc(ba({},f),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Cc(ba({},Tt("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Ai.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=t;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=(t==null?void 0:t.split(":"))||["",""];if(r&&!Object.keys(this.namespaces).map(m=>wa(m)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=wa(Object.keys(this.namespaces)[0]),f=this.rpcProviders[o].getDefaultChain();return[o,f]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;const[o,f]=this.validateChain(t);r||this.getProvider(o).setDefaultChain(f),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${f}`]).defaultChain=f,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",f)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${Of}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${Of}/${t}`)}}const Y2=gu,J2="wc",X2="ethereum_provider",Z2=`${J2}@2:${X2}:`,Q2="https://rpc.walletconnect.com/v1/",kc=["eth_sendTransaction","personal_sign"],yD=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Gc=["chainChanged","accountsChanged"],vD=["message","disconnect","connect"];var eD=Object.defineProperty,tD=Object.defineProperties,rD=Object.getOwnPropertyDescriptors,Rf=Object.getOwnPropertySymbols,iD=Object.prototype.hasOwnProperty,nD=Object.prototype.propertyIsEnumerable,Ff=(n,t,r)=>t in n?eD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Ac=(n,t)=>{for(var r in t||(t={}))iD.call(t,r)&&Ff(n,r,t[r]);if(Rf)for(var r of Rf(t))nD.call(t,r)&&Ff(n,r,t[r]);return n},Uf=(n,t)=>tD(n,rD(t));function Wc(n){return Number(n[0].split(":")[1])}function Tc(n){return`0x${n.toString(16)}`}function sD(n){const{chains:t,optionalChains:r,methods:s,optionalMethods:o,events:f,optionalEvents:m,rpcMap:y}=n;if(!di(t))throw new Error("Invalid chains");const w=t,O=s||kc,A=f||Gc,q={[Wc(w)]:y[Wc(w)]},W={chains:w,methods:O,events:A,rpcMap:q},H=f==null?void 0:f.filter(ue=>!Gc.includes(ue)),$=s==null?void 0:s.filter(ue=>!kc.includes(ue));if(!r&&!m&&!o&&!(H!=null&&H.length)&&!($!=null&&$.length))return{required:W};const X=(H==null?void 0:H.length)&&($==null?void 0:$.length)||!r,ee={chains:[...new Set(X?w.concat(r||[]):r)],methods:[...new Set(O.concat(o||[]))],events:[...new Set(A.concat(m||[]))],rpcMap:y};return{required:W,optional:ee}}class _u{constructor(){this.events=new Qr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Z2,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new _u;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=sD(this.rpc);try{const o=await new Promise(async(m,y)=>{var w;this.rpc.showQrModal&&((w=this.modal)==null||w.subscribeModal(O=>{!O.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),y(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Uf(Ac({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(O=>{m(O)}).catch(O=>{y(new Error(O.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const f=Rm(o.namespaces,[this.namespace]);this.setAccounts(f),this.events.emit("connect",{chainId:Tc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",Tc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",Uf(Ac({},Tt("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}setHttpProvider(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Tc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.setHttpProvider(r)}}parseAccountId(t){const[r,s,o]=t.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;return{chains:((r=t.chains)==null?void 0:r.map(o=>this.formatChainId(o)))||[`${this.namespace}:1`],optionalChains:t.optionalChains?t.optionalChains.map(o=>this.formatChainId(o)):void 0,methods:(t==null?void 0:t.methods)||kc,events:(t==null?void 0:t.events)||Gc,optionalMethods:(t==null?void 0:t.optionalMethods)||[],optionalEvents:(t==null?void 0:t.optionalEvents)||[],rpcMap:(t==null?void 0:t.rpcMap)||this.buildRpcMap(t.chains.concat(t.optionalChains||[]),t.projectId),showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:(s=t==null?void 0:t.qrModalOptions)!=null?s:void 0,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=Wc(this.rpc.chains),this.signer=await Y2.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:r}=await Cv(()=>import("./index.es-eaa41c5d.js").then(s=>s.i),["assets/index.es-eaa41c5d.js","assets/index-81fcd937.js","assets/index-d526a0c5.css"]);this.modal=new r(Ac({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:o}=t;r&&di(r)&&(this.rpc.chains=r.map(f=>this.formatChainId(f)),r.forEach(f=>{this.rpc.rpcMap[f]=(o==null?void 0:o[f])||this.getRpcUrl(f)})),s&&di(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(f=>this.formatChainId(f)),s.forEach(f=>{this.rpc.rpcMap[f]=(o==null?void 0:o[f])||this.getRpcUrl(f)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${Q2}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(t?[this.formatChainId(t)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const bD=_u;export{bD as EthereumProvider,vD as OPTIONAL_EVENTS,yD as OPTIONAL_METHODS,Gc as REQUIRED_EVENTS,kc as REQUIRED_METHODS,_u as default};
