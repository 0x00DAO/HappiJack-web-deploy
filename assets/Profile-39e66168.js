var j=Object.defineProperty;var S=(a,o,e)=>o in a?j(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e;var i=(a,o,e)=>(S(a,typeof o!="symbol"?o+"":o,e),e);import{bb as A,bc as p,bd as f,be as E,aS as c,aO as R,bf as B,q as d,s as u,a6 as H,bg as W,n as x,l as F,a8 as b,o as t,S as C,C as z,B as L}from"./index-ed808f58.js";import{s as O,c as I}from"./Loading-bbd18150.js";import{R as w,C as h}from"./row-6f339768.js";import{T as k}from"./index-690d80a2.js";import"./CheckOutlined-d8f27960.js";import"./useLocale-8e67744f.js";import"./TextArea-e9e62514.js";const T=class extends A{constructor(){super(...arguments);i(this,"Owner",null);i(this,"TokenType",c.ChainToken);i(this,"TokenAddress",null);i(this,"Amount","0")}get _primaryKey(){return""}get primaryKey(){return[p(f.from(this.Owner).toHexString(),32),p(f.from(this.TokenType).toHexString(),32),p(f.from(this.TokenAddress).toHexString(),32)]}static get attributes(){return[{key:"TokenType",type:"address"},{key:"TokenType",type:"uint256",format:e=>parseInt(e.toString())},{key:"TokenAddress",type:"address"},{key:"Amount",type:"uint256",format:e=>e&&e.toString()!=="0x"?E(e):"0"}]}static formatter(e,r){return T.fillWith(super.formatter(e,r))}};let y=T;i(y,"tableName","LotteryGameWalletSafeBoxTable");class m extends R{constructor(){super(...arguments);i(this,"Amount","0");i(this,"TokenType",c.ChainToken);i(this,"TokenAddress",null);i(this,"Owner",null)}get tokenSymbol(){return this.TokenType===c.ChainToken,"ETH"}get isEmpty(){return!this.Amount||B(this.Amount).lte(f.from(0))}async withdrawETH(){await(await d.instance.getContract(u.LotteryGameLotteryWalletSafeBoxSystem)).withdrawETH()}async withdrawERC20(){await(await d.instance.getContract(u.LotteryGameLotteryWalletSafeBoxSystem)).withdrawERC20(this.TokenAddress)}async withdraw(){this.TokenType===c.ChainToken?await this.withdrawETH():await this.withdrawERC20()}static async create(e=c.ChainToken,r=W){if(!H.isWalletConnected)throw new Error("Wallet is not connected");const g=await d.instance.getContract(u.GameRoot).getContract(),n=await d.instance.getAddress(),s=await y.queryByKeys(g,[n,e,r],1),l=new m;return l.TokenType=e,l.TokenAddress=r,l.Owner=n,l.Amount=s.Amount,l}}function Z(){const[a,o]=x.useState(new m),e=async()=>{const n=await m.create();o(n)},r=async()=>{try{O(),await a.withdraw(),await e()}catch(n){b.error(n!=null&&n.message&&n.message.length<30?n.message:"claim failed")}finally{I()}},g=F();return x.useEffect(()=>{async function n(){await e()}try{n()}catch(s){b.error(s!=null&&s.message&&s.message.length<30?s.message:"claim failed")}},[g.pathname]),t.jsx(t.Fragment,{children:t.jsxs(C,{direction:"vertical",size:"large",style:{display:"grid",justifyContent:"center",alignContent:"center",minHeight:`${z}`,marginTop:-230},children:[t.jsx(w,{gutter:0,children:t.jsxs(h,{span:"auto",style:{maxWidth:"100%"},children:[t.jsx(k.Text,{style:{fontSize:90,fontWeight:700,fontFamily:"Eras Bold ITC",display:"grid",justifyContent:"center",alignContent:"center",WebkitTextFillColor:"white",WebkitTextStroke:"2px #8C59F9"},children:"Total Amount"}),t.jsx(k.Text,{style:{fontSize:60,fontFamily:"Arimo Hebrew Subset",fontWeight:700,color:"white",display:"grid",justifyContent:"center",alignContent:"center"},children:`${a.Amount} ${a.tokenSymbol}`})]})}),t.jsx(C,{style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx(L,{style:{fontSize:40,fontWeight:700,width:556,height:100,color:"white"},shape:"round",onClick:r,disabled:a.isEmpty,children:"Claim"})}),t.jsxs("div",{style:{width:1440,height:430,position:"fixed",bottom:0,left:"50%",transform:"translate(-50%, 0)"},children:[t.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",borderTopLeftRadius:40,borderTopRightRadius:40,border:"4px solid #6d89f5",borderBottom:"none",background:"linear-gradient(90deg, #2A5698 0%, #6706B2 100%)",opacity:.7,zIndex:-1}}),t.jsxs(w,{style:{width:"100%",height:80,position:"relative"},children:[t.jsx("div",{style:{width:480,height:77,background:"#4222c3",borderBottomLeftRadius:40,borderBottomRightRadius:40,position:"absolute",left:"50%",top:4,transform:"translate(-50%, 0)",opacity:.7}}),t.jsx("div",{style:{width:480,height:70,top:3,background:"#4c50b7",borderBottomLeftRadius:40,borderBottomRightRadius:40,position:"absolute",left:"50%",transform:"translate(-51%, 0)",opacity:.7}}),t.jsx("label",{style:{position:"absolute",color:"#FAFF16",fontSize:30,fontFamily:"Eras Bold ITC",width:480,height:70,left:"50%",transform:"translate(-30%,25%)"},children:"Recent transactions"})]}),t.jsxs(w,{style:{width:1432,height:50,background:"#4c50b7",margin:"0 auto",marginTop:30},children:[t.jsx(h,{span:8,style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx("p",{style:{fontSize:24,color:"#faff16",fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginTop:10},children:"Game ID"})}),t.jsx(h,{span:8,style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx("p",{style:{fontSize:24,color:"#faff16",fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginTop:10},children:"Draw Time"})}),t.jsx(h,{span:8,style:{display:"flex",justifyContent:"center",alignContent:"center"},children:t.jsx("p",{style:{fontSize:24,color:"#faff16",fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginTop:10},children:"Type"})})]})]})]})})}export{Z as default};
