import{N as F,n as A,G as E,m as z,F as x,H as B,D as C,s as e,J as H,B as w,S as g,R as a,t as s,I as y,w as p,A as b,z as N,u as W,l as G,K as D,C as M,v as R,x as U,o as v,L as I,M as O}from"./index-01ce5102.js";import{C as Q}from"./closable-3c26f926.js";import{s as P,c as T}from"./Loading-4cad762c.js";import{M as K,P as Y,I as J}from"./information-0cecfb5c.js";import{S as L}from"./index-695e6c7f.js";import{N as V}from"./nft_bottom-1b63c0d9.js";import{T as X}from"./ticket_nft-6fc753da.js";import{T as k}from"./index-33ff0aed.js";import"./useLocale-93b88a4a.js";import"./useForceUpdate-6573ebe7.js";import"./CheckOutlined-7fe11062.js";import"./TextArea-370be1dd.js";import"./index-db83e77f.js";class Z{static uuidGen(l,c){const d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];let t;if(c=c||d.length,l)for(t=0;t<l;t++)o[t]=d[0|Math.random()*c];else{let h;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",t=0;t<36;t++)o[t]||(h=0|Math.random()*16,o[t]=d[t===19?h&3|8:h])}return o.join("")}static generateRandomNumber(l,c){const d=Math.random()*(c-l)+l;return Math.floor(d)}}const _="/assets/buy_ticket_bg_vector-0731bf82.png",$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGUSURBVHgB7VbRccMgDJUzgUdgg3qDjlBv0BHMBvYmzgZuJvB1g25gb5BuoEIqLgrBIAf+knfHcQbp6SGwAOCFABBRmbbYBplwPJZT6uCCY0EBKBLhB/cdzHdtWm/azOwszjTWBXyUSETMkOZmlGMM+C9REZHgHa3QrdSSt55NQ2NHvM2K3hKxJcAP3jPCybQaEqBAXEgfEJE+W7RyB71hs0lmxgfm/wl7QEpd2oeI3QWRec22Q8EOAS6FY8IuKoBsJreFIAyuWOoU5AuoWTbvztAh4NNSf6yqaoVMGI5f053oU0sEfFD/BeXguN6TlixdjcA2uQVk57ZV9PuJSLltBEuK9wB5WKE08FouFRQC/pfqSz3w50IZWKl/g3JQ1P+AQMA39S2Ug+M6JS2pcLjymbx8BHziwsadZtxTPuNcorLuO/HLSMODwOt1vu8yImfNUtfDTqDgOpeQ8Dt9lKyCztDE/AbIAWXi7Amxz6+G2Sgam/D2+fbw9vki/GdWCjMWLGS+kI4C8KwsNGa3LPvXfeG58Adarnz4vNBoNgAAAABJRU5ErkJggg==",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEISURBVHgB7ZXhEYIwDIVbzwFwA0dhE9nAOgF1sjqCG+AGsEFs7tIz9FoKFNQf/e4UjiYvj7Q5hCgUCgQAXOyvh/3psJarK5mBzl7O4jsMUsrT6ImzN5U1JyaFr3EQP+avDAz4Z7tj+CHZCqtZozav5Qco77S2gZhVZwC1mC5OmooFVp6ROteADW+YnsYac5I0JZgNDBhKU0uSKtcukW/AEXzz1BSk25VmmFqMGXBT8BD5POma3gJqfcvadvHW12xBzfRU9BDahSuMP0Y6ELPYAOVpGKNCQa64AW/8cg1QbgOfiehXiecYiGmUj9GR3eO8VnNanLsNlpe74R248YUdwRe9i0KhQLwBTDvXbFf0UTgAAAAASUVORK5CYII=",{Countdown:ee}=L,te=()=>Z.generateRandomNumber(1e5,999999),ie=/^(?:[1-9]\d{0,5}|999999)$/,ne=F.create(()=>{const r=A.useRef(null),[l,c]=A.useState(`${te()}`),[d,o]=A.useState(new E),t=i=>{const n=i.target.value;if(h(n))c(parseInt(`${n}`,10).toString());else{const m=n.replace(/[^0-9]/g,"");m.length>6?i.target.value=m.slice(-6):i.target.value=m,h(i.target.value)?c(parseInt(`${i.target.value}`,10).toString()):c("")}},h=i=>i===void 0?!1:ie.test(i),f=z(),j=async()=>{const i=x.getData("LATEST_GAME_ID");if(B(i)){C("Invalid lottery id");return}try{if(!h(l))throw new Error("Invalid lucky number input");P(),await(await(await p.instance.getContract(b.LotteryGameSellSystem)).buyLotteryTicketETH(i,parseInt(l),x.ticketPrice)).wait(),T(),N("Buy ticket successfully"),f.hide()}catch(n){C(n!=null&&n.message&&n.message.length<60?n.message:"Buy ticket failed"),T()}},S=()=>{f.hide()};return A.useEffect(()=>{const i=x.getData("LATEST_GAME_ID");if(B(i)){C("Invalid lottery id");return}i&&(async()=>{const u=await(await p.instance.getContract(b.LotteryGameSystem)).getGame(i);u&&o(u),r.current&&(r.current.focus(),r.current.value=`${l}`)})()}),e.jsx(K,{...H(f),title:"",centered:!0,closable:!1,width:1160,footer:[e.jsx(w,{onClick:j,disabled:!h(l),className:"start-btn",style:{width:460,height:100,borderRadius:40,fontSize:40,fontWeight:700,display:"grid",alignItems:"center",margin:"0 auto"},children:"Pay to WIN"})],children:e.jsxs(g,{direction:"vertical",style:{width:"100%",position:"relative"},children:[e.jsxs(a,{style:{position:"absolute",width:"100%",left:0,top:0},children:[e.jsx(s,{span:23}),e.jsx(s,{span:1,children:e.jsx(y,{preview:!1,src:Q,style:{cursor:"pointer",width:48,height:48},onClick:()=>f.hide()})})]}),e.jsx(a,{style:{width:"100%",height:50,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold"},children:"SETTING LUCKY NUMBER"})}),e.jsx(a,{style:{width:"100%",height:100,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("input",{ref:r,style:{paddingLeft:20,color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:90,fontWeight:"bold",letterSpacing:22,display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:500,backgroundColor:"transparent",border:"none",textAlign:"center",caretColor:"#05e6c4"},autoComplete:"off",inputMode:"decimal",name:"depositAmount",onChange:t})}),e.jsxs(a,{style:{width:"100%",height:100,display:"flex",justifyContent:"center"},children:[e.jsx("label",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",color:"#91A7BE"},children:"The prize amount is determined by the Lucky Numbers"}),e.jsx(y,{src:_,preview:!1})]}),e.jsxs(a,{style:{width:"100%",height:300,marginTop:30},children:[e.jsxs(a,{style:{width:"100%"},children:[e.jsx(s,{span:12,style:{paddingLeft:150},children:e.jsxs(g,{direction:"horizontal",children:[e.jsx(y,{src:q,preview:!1}),e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:30},children:"Tickets Left"})]})}),e.jsx(s,{span:12,children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},children:d.remainingTicket})})]}),e.jsxs(a,{style:{width:"100%"},children:[e.jsx(s,{span:12,style:{paddingLeft:150},children:e.jsxs(g,{direction:"horizontal",children:[e.jsx(y,{src:$,preview:!1}),e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:30},children:"Time Left"})]})}),e.jsx(s,{span:12,children:e.jsx("label",{children:e.jsx(ee,{valueStyle:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},value:d.endTime*1e3,onFinish:S})})})]}),e.jsxs(a,{style:{width:"100%"},children:[e.jsx(s,{span:12,style:{paddingLeft:150},children:e.jsx(g,{direction:"horizontal",children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:70},children:"Winning Chance"})})}),e.jsx(s,{span:12,children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},children:"100%"})})]}),e.jsxs(a,{style:{width:"100%"},children:[e.jsx(s,{span:12,style:{paddingLeft:150},children:e.jsx(g,{direction:"horizontal",children:e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:70},children:"Jackpot"})})}),e.jsx(s,{span:12,children:e.jsxs("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:30,fontWeight:"bold",paddingLeft:220},children:[x.ticketPrice," ",d.tokenSymbol]})})]})]})]})})}),{Countdown:se}=L;function xe(){const r=W(),l=G(),c=D(),d=z(ne),[o]=A.useState(window.innerHeight),[t,h]=A.useState(new E),f=async(i,n)=>{const u=await(await p.instance.getContract(b.LotteryGameSystem)).getGame(i,!0);h(u),await p.instance.getAddress()===n&&c(`/game/${u.isFull?"joined":"waiting"}/${i}`)};A.useEffect(()=>{async function i(){const n=r.id,u=await(await p.instance.getContract(b.LotteryGameSystem)).getGame(n);return h(u),v.instance.on(I.event,f),()=>v.instance.off(I.event,f)}i()},[l.pathname]);const j=()=>{if(!r||!(r!=null&&r.id))O.error("Invalid lottery id");else{const i=r.id;x.setData("LATEST_GAME_ID",i),d.show()}},S=()=>{c("/")};return e.jsx(e.Fragment,{children:e.jsxs(g,{direction:"vertical",size:"large",style:{minHeight:`${M}`,width:"100%",display:"flex",justifyContent:"center"},children:[e.jsx(a,{gutter:0,style:{alignItems:"center",background:"rgba(33, 60, 153, 0.70)",flexShrink:0,width:"100%",display:"flex",flexDirection:"column",position:"absolute",top:120},children:e.jsx(s,{span:24,style:{flex:1,paddingBottom:10,paddingTop:10},children:e.jsx(k.Text,{style:{fontSize:50,fontFamily:"Eras Bold ITC",color:"#52c41a",display:"flex",paddingLeft:120,paddingRight:120,justifyContent:"center",background:"linear-gradient(to right, #FDECB2, #FDA6EC, #CD59CC)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",lineHeight:1.2,width:"100%",maxHeight:"2.4em",overflow:"hidden",textOverflow:"ellipsis"},children:t.ad})})}),e.jsx(a,{gutter:0,style:{alignItems:"center",background:"rgba(33, 60, 153, 0.70)",flexShrink:0,width:"100%",display:`${o<900?"none":"flex"}`,flexDirection:"column",visibility:"hidden"},children:e.jsx(s,{span:24,style:{flex:1,paddingBottom:10,paddingTop:10},children:e.jsx(k.Text,{style:{fontSize:50,fontFamily:"Eras Bold ITC",color:"#52c41a",display:"flex",paddingLeft:120,paddingRight:120,justifyContent:"center",background:"linear-gradient(to right, #FDECB2, #FDA6EC, #CD59CC)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",lineHeight:1.2,width:"100%",maxHeight:"2.4em",overflow:"hidden",textOverflow:"ellipsis"},children:t.ad})})}),e.jsxs(a,{children:[e.jsx(s,{span:16,children:e.jsxs(g,{direction:"vertical",size:"middle",style:{paddingLeft:120},children:[e.jsxs("p",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:60,fontWeight:700,letterSpacing:0,textAlign:"left",marginTop:40},children:["Jackpot:",e.jsxs("span",{style:{color:"#fcdc36",fontFamily:"Arimo Hebrew Subset",fontSize:60,fontWeight:700,letterSpacing:0,textAlign:"left"},children:[" ",t.TotalAmount," ",t.tokenSymbol]})]}),e.jsx(g,{direction:"horizontal",size:"small",hidden:!t.hasHash,children:e.jsxs(w,{type:"text",style:{display:"flex"},target:"_blank",href:`${R(p.instance.chainId)}/tx/${t.transactionHash}`,disabled:!t.hasHash,children:[e.jsxs("p",{style:{color:"#91a7be",fontSize:30,fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginLeft:-10},children:["TX: ",t.shortHash]}),e.jsx("svg",{style:{marginTop:2,marginLeft:30,color:"#91a7be",fontSize:40,display:"none"},stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",focusable:"false",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),e.jsxs(g,{direction:"horizontal",style:{marginTop:20},children:[e.jsx("label",{style:{color:"#EB91FF",fontFamily:"Arimo Hebrew Subset",fontSize:50,fontWeight:700,letterSpacing:0,textAlign:"left"},children:"100%"}),e.jsx("label",{style:{color:"white",fontFamily:"Arimo Hebrew Subset",fontSize:50,fontWeight:700,letterSpacing:0,textAlign:"left"},children:"Win"})]}),e.jsxs(g,{direction:"vertical",size:"small",children:[e.jsxs("label",{style:{fontSize:34,textAlign:"left",fontFamily:"Arimo Hebrew Subset",color:"white"},children:["Remaining Number: ",t.remainingTicket]}),e.jsx("label",{children:e.jsx(se,{valueStyle:{fontSize:34,textAlign:"left",fontFamily:"Arimo Hebrew Subset",color:"white"},prefix:"Lucky Draw In:",value:t.endTime*1e3,onFinish:S})})]})]})}),e.jsx(s,{span:8,style:{position:"relative"},children:e.jsx(a,{style:{width:"100%"},children:e.jsxs(s,{style:{position:"relative",width:"100%"},children:[e.jsx(y,{src:V,preview:!1,style:{position:"absolute",width:678,margin:"0 auto",top:-80,left:-230}}),e.jsx(y,{src:X,style:{position:"absolute",width:375,transform:"rotate(-11.204deg)",margin:"0 auto",top:50}})]})})})]}),e.jsxs(g,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:30},children:[e.jsxs(w,{onClick:j,className:"start-btn",style:{fontFamily:"Arimo Hebrew Sunset",width:654,height:100,borderRadius:40,fontSize:40,fontWeight:700},children:["Just Pay: ",t.TicketPrice," ",t.tokenSymbol]}),e.jsx(Y,{content:U,title:"Rules",placement:"right",children:e.jsx(w,{style:{width:42,height:42,background:"transparent",border:"none",marginLeft:35},icon:e.jsx(y,{src:J,preview:!1,style:{width:42,height:42}}),type:"default"})})]})]})})}export{xe as default};
